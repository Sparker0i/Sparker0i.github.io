<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Sparker0i's Blog</title><link>https://blog.sparker0i.me/post/</link><description>Recent content in Posts on Sparker0i's Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 09 Aug 2025 16:50:16 +0000</lastBuildDate><atom:link href="https://blog.sparker0i.me/post/index.xml" rel="self" type="application/rss+xml"/><item><title>The wait is over: Witnessing RCB's Historic IPL 2025 Victory</title><link>https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/</link><pubDate>Sat, 09 Aug 2025 16:50:16 +0000</pubDate><guid>https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/</guid><description>&lt;img src="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/rcb-trio.jpeg" alt="Featured image of post The wait is over: Witnessing RCB's Historic IPL 2025 Victory" />&lt;p>Eighteen years. Eighteen long years of heartbreak, near misses and unwavering hope. As I sat on the stands at the NaMo stadium on that fine evening of June 3rd, 2025, I never imagined I would witness history in the making. RCB had finally done it - they had won their first ever IPL title.&lt;/p>
&lt;h2 id="the-burden-of-the-past">The burden of the past
&lt;/h2>&lt;p>For those of us who have followed RCB through the highs and lows, this moment felt surreal. Three times we had reached the final - 2009, 2011 and 2016 - and all the three times we had to watch our dreams slip away. The pain of those defeats, especially the heartbreaking loss in 2016 when Virat Kohli had played the greatest individual IPL season, still lingered in our hearts.&lt;/p>
&lt;p>But it wasn&amp;rsquo;t just the final defeats that tested our faith. The dark years of 2017-19 were perhaps the most challenging period in RCB&amp;rsquo;s history. Finishing at the bottom in 2017 and scoring the league&amp;rsquo;s lowest total, sixth in 2018 and last again in 2019 where we missed out on qualification thanks to one no-ball - those were seasons that truly tested what it meant to be an RCB fan. Watching the team struggle to even qualify for the playoffs, seeing majority of the team underperform and enduring the constant criticism and memes about our franchise was heartbreaking.&lt;/p>
&lt;p>But here we were again, in another final, this time against PBKS - another franchise part of the holy trinity desperately seeking their maiden title.&lt;/p>
&lt;h2 id="a-match-for-the-ages">A match for the ages
&lt;/h2>&lt;p>The atmosphere outside and inside the Narendra Modi Stadium was electric from the moment I arrived. The entry points were a sea of red and gold, with RCB fans vastly outnumbering Punjab Kings supporters. Despite being technically a neutral venue, it felt like a home game for us. Every gate, every corridor, every section of the stadium was dominated by RCB jerseys, flags, and chants. The &amp;ldquo;RCB! RCB!&amp;rdquo; echoes were deafening even before the players took the field.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/outside-stadium.jpeg"
width="1284"
height="2282"
srcset="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/outside-stadium_hu_aa8f8ed59bf1c717.jpeg 480w, https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/outside-stadium_hu_a4b00e97cc5ac70.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="56"
data-flex-basis="135px"
>&lt;/p>
&lt;p>Walking through the stadium concourses, you could see families who had traveled from across the country, groups of friends who had planned this trip for months, and die-hard fans who had followed RCB through every heartbreak. The energy was infectious – strangers were sharing stories of their RCB journey, kids were getting their faces painted in red and gold, and everyone seemed to carry that mix of nervous excitement and desperate hope that only comes with supporting a team that has broken your heart before.&lt;/p>
&lt;p>When Punjab won the toss and chose to field first, there was pindrop silence in the stadium, with all of us losing hope. The pressure was on our boys to set a defendable total on what appeared to be a tricky Ahmedabad surface.&lt;/p>
&lt;p>Watching Kohli walk out to bat, you could sense the weight of expectations on his shoulders. This was the man who had given his youth, prime and experience to RCB; who had stayed loyal when others might have moved on, who had scored mountains of runs but never lifted the trophy that mattered most to him and to us.&lt;/p>
&lt;p>The innings unfolded like a masterclass in T20 batting under pressure. Kohli anchored the innings with a crucial 43 off 35 balls, playing the role he has perfected over the years - being the calm in the storm. But it was the collective effort that stood out. Livingstone&amp;rsquo;s quickfire 25, Jitesh&amp;rsquo;s explosive 24 off 10 balls, and crucially Romario&amp;rsquo;s late cameo of 17 off 9 pushed us to 190/9.&lt;/p>
&lt;p>From the stands, every wicket brought in silence, every run started feeling precious, every boundary was celebrated like a victory in itself. When Romario brought in the blitzkreig, the entire RCB fanbase erupted. 190 felt like a lost cause yet again, but in T20 cricket you never know when things turn to your side.&lt;/p>
&lt;h2 id="the-defense">The defense
&lt;/h2>&lt;p>If our batting had been about building pressure and seizing moments, our bowling was about holding our nerves and executing under ultimate pressure, something which we&amp;rsquo;ve consistently failed to do over the years after qualifying for playoffs. Punjab started well through Priyansh Arya and Prabhsimran Singh, and for a moment, &lt;strong>that&lt;/strong> familiar feeling of dread began creeping in.&lt;/p>
&lt;p>But then Hazlewood struck the first blow, and the game shifted. Watching Krunal Pandya bowl his heart out was poetry in motion - this was a man who had a habit of winning IPL titles with his clutch performances, and he brought all that experience to bear when it mattered the most. His figures of 2/17 in 4 overs were the backbone of our defense.&lt;/p>
&lt;p>The tension in the stadium was palpable. Every dot ball was cheered, every wicket celebrated like we had already won. When Romario dismissed the opposition captain, you could sense the momentum shift decisively in our favour. Every wicket that fell after that strengthened our belief too.&lt;/p>
&lt;p>In T20 cricket it&amp;rsquo;s never over until it&amp;rsquo;s over. Even with Punjab needing 29 off the final over, the match wasn&amp;rsquo;t dead yet. The monstrous Shashank Singh was still out there playing brilliantly. But Hazlewood started the final over with two crucial dot balls, which mathematically all but sealed the contest. All he had to do was not bowl a no-ball. Then Shashank exploded, hitting 6, 4, 6, 6 off the final four balls, but those magnificent strikes came just a touch too late.&lt;/p>
&lt;p>When the final ball was bowled and we had won by 6 runs, the noise in the stadium was deafening.&lt;/p>
&lt;h2 id="that-moment">That Moment
&lt;/h2>&lt;p>I&amp;rsquo;ll never forget the image of Virat Kohli falling to his knees, cupping his face in his hands, tears streaming down his cheeks. This was a man who had carried the hopes and dreams of millions of RCB fans on his shoulders for over a decade. To see him finally achieve what he had worked so tirelessly for was deeply emotional.&lt;/p>
&lt;p>The celebrations on the field were pure euphoria. Players were running in all directions, some crying, others roaring with joy. The support staff who had worked tirelessly behind the scenes were finally getting their moment in the sun. Coaches, physiotherapists, analysts – everyone who had been part of this incredible journey was soaking in the magnitude of what they had just achieved.&lt;/p>
&lt;p>After the final ball was bowled and victory was confirmed, something magical happened in the stadium. Despite the late hour, the majority of RCB fans stayed rooted to their seats. Not a single person moved an inch. We all wanted to witness the trophy presentation with our own eyes, to see our heroes finally lift that golden prize we had dreamed about for so long. The collective refusal to leave was a testament to how much this moment meant to every single one of us.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/stadium-after-winning.jpg"
width="1536"
height="2048"
srcset="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/stadium-after-winning_hu_761cd3f761dbf046.jpg 480w, https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/stadium-after-winning_hu_e762ae8092d83f73.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>Around me in the stands, grown men were crying. Strangers were hugging each other. Flags were waving. The 18-year wait was over.&lt;/p>
&lt;h2 id="what-this-means">What This Means
&lt;/h2>&lt;p>This title changes the story of RCB. On paper the match reads like a thriller: Royal Challengers Bengaluru posted 190 for 9, and Punjab Kings finished on 184 for 7 - RCB winners by six runs in the final. That number - six runs - will live in RCB folklore forever. It rewrites the narrative from &amp;ldquo;nearly&amp;rdquo; to &amp;ldquo;champions&amp;rdquo;, gives Virat Kohli a chapter he’s sought for years, and gives the fans a memory to bring out on any gloomy evening. It’s a reminder of why we follow sport at all - for the small, ordinary build-ups that, once in a while, explode into something unforgettable.&lt;/p>
&lt;p>For players like Krunal Pandya, Bhuvneshwar Kumar, and Yash Dayal, it was another title to add to their collection, but one that felt special because of the journey. For Rajat Patidar, it was the perfect start to his captaincy journey – lifting the IPL trophy in his very first season as skipper, a feat that will be remembered for years to come. His tactical acumen throughout the tournament and calm demeanor in pressure situations were crucial to this victory. To win the IPL in your debut season as captain is the stuff of dreams, and Patidar executed it perfectly.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/captain-getting-trophy.jpg"
width="1536"
height="2048"
srcset="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/captain-getting-trophy_hu_2f530b0cd87a4906.jpg 480w, https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/captain-getting-trophy_hu_873b4555a6d2f41a.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
> &lt;img src="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/team-with-trophy.jpg"
width="2160"
height="3840"
srcset="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/team-with-trophy_hu_3857f706fb758229.jpg 480w, https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/team-with-trophy_hu_cad4cbda4e95eaf5.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="56"
data-flex-basis="135px"
>&lt;/p>
&lt;p>But what made the celebration even more special was seeing the RCB legends who had joined us for this historic moment. Chris Gayle, the Universe Boss who had almost single-handedly carried us to the 2011 final with his explosive batting, was there on the field celebrating with the team. And AB de Villiers – Mr. 360, the man who had redefined T20 batting during his time with RCB – was also there to lift the trophy alongside the current squad. Seeing these icons, who had given their all for RCB during their playing days, finally get to hold that elusive IPL trophy was incredibly moving.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/rcb-trio.jpeg"
width="1280"
height="853"
srcset="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/rcb-trio_hu_24a96f9f2e51f6c0.jpeg 480w, https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/rcb-trio_hu_75a0be52b16d42b7.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p>
&lt;p>For us fans, it was the end of a long, emotional journey and the beginning of a new chapter. It&amp;rsquo;s redemption for a franchise that had been labeled &amp;ldquo;chokers&amp;rdquo; and &amp;ldquo;unlucky&amp;rdquo;. It&amp;rsquo;s proof that loyalty and persistence eventually pay off.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/me-with-rcb-flag.jpg"
width="1536"
height="2048"
srcset="https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/me-with-rcb-flag_hu_7789746e31a45b8c.jpg 480w, https://blog.sparker0i.me/rcb-historic-ipl-2025-victory/me-with-rcb-flag_hu_371c24e5e02e8976.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;h2 id="a-celebration-turned-tragic">A Celebration Turned Tragic
&lt;/h2>&lt;p>But as we basked in the glory of our historic victory, tragedy struck the very next day. On June 4th, during RCB&amp;rsquo;s victory celebration and felicitation ceremony at the M. Chinnaswamy Stadium, a stampede occurred that claimed 11 lives and injured at least 50 others. What was meant to be a joyous homecoming for our champions turned into an unthinkable tragedy when almost 250k fans gathered outside the stadium, far exceeding the venue&amp;rsquo;s capacity.&lt;/p>
&lt;p>As I sat in Ahmedabad airport waiting for my flight back to Bangalore, watching the news unfold on my phone, I was filled with a mixture of horror and a chilling realization – had I been in Bangalore that day, I would have undoubtedly joined those crowds outside Chinnaswamy, risking everything just to be part of the celebration. The thought of what could have happened sent shivers down my spine.&lt;/p>
&lt;p>The scenes were heartbreaking – fans trying to climb boundary walls, exhaustion and trauma spreading through the crowds, emergency wards working frantically to save lives. RCB had announced compensation for the families of the deceased and pledged to cover medical expenses for the injured, but no amount of money could heal the pain of losing loved ones during what should have been a celebration.&lt;/p>
&lt;p>This tragedy served as a stark reminder that our passion for cricket, while beautiful, must always be tempered with safety and proper planning. The joy of RCB&amp;rsquo;s victory will forever be tinged with sorrow for those families who lost their loved ones. Their memory will always be part of RCB&amp;rsquo;s story. RCB must learn from this tragedy and do something meaningful to ensure it never happens again. The fans who lost their lives were celebrating the very victory we had all waited 18 years for - they deserved better, and their families deserve more than just our prayers.&lt;/p>
&lt;h2 id="looking-back-moving-forward">Looking Back, Moving Forward
&lt;/h2>&lt;p>As I walked out of the Narendra Modi Stadium that night, still in disbelief, I thought about all the RCB fans over the years who didn&amp;rsquo;t live to see this day. I thought about the heartbreaks we had endured together, the hope we had carried through season after season of disappointment.&lt;/p>
&lt;p>And then it hit me – my birthday was just two days away, on June 5th. What better birthday gift could I have asked for than witnessing RCB&amp;rsquo;s maiden IPL victory? After years of birthday wishes that always included &amp;ldquo;Please let RCB win the IPL this year,&amp;rdquo; the universe had finally delivered the ultimate present, two days early no less!&lt;/p>
&lt;p>But mostly, I thought about how beautiful this game is – how it can break your heart and mend it again, how it can test your faith and then reward it in the most spectacular fashion.&lt;/p>
&lt;p>The Royal Challengers Bengaluru are finally IPL champions. The wait is over. The dream has come true.&lt;/p>
&lt;p>And I was there to witness it all.&lt;/p>
&lt;p>&lt;em>Ee Sala Cup Namdu – This Year, the Cup is now ours. Finally.&lt;/em>&lt;/p></description></item><item><title>I tried the iPad as a development machine. Here's how that went</title><link>https://blog.sparker0i.me/tried-ipad-as-development-machine/</link><pubDate>Sat, 19 Jul 2025 17:04:00 +0000</pubDate><guid>https://blog.sparker0i.me/tried-ipad-as-development-machine/</guid><description>&lt;img src="https://blog.sparker0i.me/tried-ipad-as-development-machine/ipad-header.jpeg" alt="Featured image of post I tried the iPad as a development machine. Here's how that went" />&lt;p>Earlier this year, my gaming laptop started to show its signs of aging. Games constantly froze, laptop kept getting hotter on idle use and graphics and animations were slower than ever before. Thus I had decided to build a gaming PC for myself.&lt;/p>
&lt;p>But I still needed a laptop for when I&amp;rsquo;d be traveling. Most of the latest laptops available in the Indian market were that of Intel. Given the spate of issues that have hit Intel chips in the last few years, I did not want to go for them. The ones having the AMD chip were all gaming laptops and were too expensive. Snapdragon X based laptops are not quite ready yet for the full development lifecycle.&lt;/p>
&lt;p>I then realized I could do all of my development online. Which then drove me to the iPad. The iPad Air with the M3 chip and 256GB storage was available at Rs. 80k and was far cheaper than the other laptops I&amp;rsquo;d been looking at. The iPad combined with a Magic Keyboard was all that I needed to properly code on the go.&lt;/p>
&lt;h2 id="my-coding-combination">My Coding Combination
&lt;/h2>&lt;p>&lt;strong>GitHub Codespaces&lt;/strong> became my primary development environment. The biggest gotcha? iPadOS keyboard shortcuts. They&amp;rsquo;re locked down tighter than a production database, so the usual Cmd+T for new tabs simply opens a new Safari tab instead of a terminal tab in VS Code.&lt;/p>
&lt;p>My workaround: Open the codespace, then &amp;ldquo;Add to Home Screen&amp;rdquo; via Safari&amp;rsquo;s share menu. This creates a pseudo-native PWA app that bypasses some shortcut restrictions. You can finally remap Option-based shortcuts to something sensible like Option+W for closing tabs and Option+Tab for switching between them.&lt;/p>
&lt;p>The muscle memory adjustment took about two weeks, but now I&amp;rsquo;m flying through code again.&lt;/p>
&lt;p>&lt;strong>Beyond the basic setup&lt;/strong>, I&amp;rsquo;m running a 2-core, 8GB RAM codespace instance that costs roughly $0.36/hour. For most days, the free 120 hours covers everything, but intense project weeks can push me into paid territory.&lt;/p>
&lt;h2 id="what-nobody-tells-you-about-ipad-development">What Nobody Tells You About iPad Development
&lt;/h2>&lt;h3 id="the-good-stuff-that-surprised-me">The good stuff that surprised me
&lt;/h3>&lt;p>The M3 chip is genuinely overkill for development work. I can have 20+ Safari tabs open, multiple codespace instances, Slack, Figma, and a Zoom call running simultaneously without any thermal throttling. My old Intel laptop would have sounded like a jet engine by now.&lt;/p>
&lt;p>Battery life is incredible. I coded for 6 hours straight during a recent flight to north India, watched a web series episode, and still had 20% charge left. Try that with any x86 laptop under Rs. 1.5 lakhs.&lt;/p>
&lt;h3 id="the-painful-realities">The painful realities
&lt;/h3>&lt;p>Internet dependency is brutal. During a power outage that killed my Wi-Fi for 3 hours, the iPad became an expensive paperweight. No local Node.js, no Git, no nothing. Laptops with local dev environments would have kept me productive. I then had to rely on the hotspot from my iPhone, but that ended up draining the battery of both the devices.&lt;/p>
&lt;p>File management feels terrible. Want to drag a CSV from Files into your web app for testing? Prepare for a 5-step dance involving the share sheet, temporary storage, and prayer. The Files app is a beautiful lie that promises desktop-like file handling but delivers mobile-first friction. However things might change with the upcoming iPadOS 26 release.&lt;/p>
&lt;h3 id="real-performance-testing">Real Performance Testing
&lt;/h3>&lt;p>I stress-tested this setup during a weekend trying to do multiple things:&lt;/p>
&lt;ul>
&lt;li>Migrate this blog from Hashnode to Hugo&lt;/li>
&lt;li>Learn about LLMs by building an app&lt;/li>
&lt;li>Build a webserver in Go from scratch&lt;/li>
&lt;/ul>
&lt;p>All of the above were on three different codespaces on GitHub. Here&amp;rsquo;s what came out of that weekend:&lt;/p>
&lt;ul>
&lt;li>Day 1: Smooth sailing. Hot reloading worked perfectly on Hugo, additional go module installs were fast thanks to codespace&amp;rsquo;s fiber connection, and the iPad stayed cool despite 12 hours of continuous use.&lt;/li>
&lt;li>Day 2: Discovered the multi-tasking limitations. Switching between the codespaces, go documentation, and Discord required constant app switching. Unlike Windows or Mac, the switching between app animations takes ~2 seconds to complete. This definitely frustrated me.&lt;/li>
&lt;/ul>
&lt;h2 id="cost-reality-check">Cost Reality Check
&lt;/h2>&lt;p>My iPad Air M3 (256GB) set me back ₹80,000 and the Magic Keyboard cost another ₹27,000, totalling ₹1,07,000. Compare this to a MacBook Air M3 at ₹1,15,000 or a decent Windows laptop at ₹80,000-1,20,000. Unfortunately the iPad falls flat in front of the MacBook Air thanks to its positioning in premium pricing territory while delivering close to no benefits over the MacBook.&lt;/p>
&lt;h2 id="when-ipad-development-actually-makes-sense">When iPad Development Actually Makes Sense
&lt;/h2>&lt;p>You&amp;rsquo;re a good candidate if you satisfy some of these below points:&lt;/p>
&lt;ul>
&lt;li>Your codebase lives in GitHub with proper CI/CD setup through GitHub Actions&lt;/li>
&lt;li>You primarily work with web technologies (React, Vue, Node.js, Python web apps)&lt;/li>
&lt;li>You have reliable high-speed internet everywhere you code&lt;/li>
&lt;li>You value portability over raw performance&lt;/li>
&lt;li>You&amp;rsquo;re comfortable with cloud-first workflows&lt;/li>
&lt;/ul>
&lt;p>If that doesn&amp;rsquo;t sound like you, then you should stick to a laptop if:&lt;/p>
&lt;ul>
&lt;li>You do native iOS/Android development (yes, the irony)&lt;/li>
&lt;li>Your workflow involves Docker, VMs, or local databases&lt;/li>
&lt;li>You frequently work offline or with spotty internet&lt;/li>
&lt;li>You need multiple monitors for productivity&lt;/li>
&lt;li>You rely heavily on platform-specific tools&lt;/li>
&lt;/ul>
&lt;h2 id="three-months-later-the-honest-verdict">Three months later: The honest verdict
&lt;/h2>&lt;p>This experiment succeeded, but with important caveats. The iPad handles 80% of my development tasks beautifully. The remaining 20% – complex debugging, performance profiling, multi-service local development – still sends me back to my desktop.&lt;/p>
&lt;p>&lt;strong>What I miss most&lt;/strong>: Terminal muscle memory. Web-based terminals are good, but they&amp;rsquo;re not &lt;em>native&lt;/em>. Keyboard shortcuts feel slightly off, copy-paste behavior is inconsistent, and there&amp;rsquo;s always a tiny input lag that breaks flow state.&lt;/p>
&lt;p>&lt;strong>What I appreciate most&lt;/strong>: Zero thermal throttling, all-day battery, and the ability to code comfortably in coffee shops without looking like I&amp;rsquo;m running a crypto mining operation.&lt;/p>
&lt;p>The iPad won&amp;rsquo;t replace serious development machines yet, but it&amp;rsquo;s redefined what &amp;ldquo;portable coding&amp;rdquo; means for me. When Apple inevitably allows proper terminal emulators and fixes the multitasking limitations, this setup will become genuinely compelling for a broader range of developers.&lt;/p>
&lt;h2 id="the-bottom-line">The Bottom Line
&lt;/h2>&lt;p>If you&amp;rsquo;re expecting a laptop replacement, you&amp;rsquo;ll be disappointed. If you&amp;rsquo;re looking for a capable secondary development device that happens to be the best tablet on the market, the iPad delivers.&lt;/p>
&lt;p>The future of development is increasingly cloud-native, and the iPad offers a glimpse into that future today. It&amp;rsquo;s not perfect, but it&amp;rsquo;s far more capable than I expected when I started this experiment.&lt;/p>
&lt;p>Would I buy it again? Absolutely. But I&amp;rsquo;d also keep a proper development machine for the heavy lifting.&lt;/p></description></item><item><title>Self Contained Systems: Beyond the Monolith vs Microservices debate</title><link>https://blog.sparker0i.me/self-contained-systems-alternate-to-monolith-microservices/</link><pubDate>Sun, 29 Jun 2025 08:27:38 +0000</pubDate><guid>https://blog.sparker0i.me/self-contained-systems-alternate-to-monolith-microservices/</guid><description>&lt;img src="https://blog.sparker0i.me/self-contained-systems-alternate-to-monolith-microservices/scs.jpg" alt="Featured image of post Self Contained Systems: Beyond the Monolith vs Microservices debate" />&lt;p>The Software Architecture landscape has often been dominated by two major choices: monolithic applications for simplicity vs microservices for scalability. This has forced teams to make major architectural calls, often sometimes forcing compromises that don&amp;rsquo;t fully address their needs. However, there may be another path that is gaining traction: Self-Contained Systems (SCS).&lt;/p>
&lt;p>Self-Contained Systems represent an architectural pattern that combines the best aspects of both monoliths and microservices while addressing their key limitations. Unlike a typical microservices approach which focuses primarily on decomposing into multiple backend services, SCS embraces a full-stack philosophy where each system/team owns its complete user experience from start to finish.&lt;/p>
&lt;p>This post will try to examine why SCS might be the sweet spot in your architecture, providing detailed comparison, practical frameworks and real-world insights to guide your architectural decisions.&lt;/p>
&lt;h2 id="understanding-self-contained-systems">Understanding Self-Contained Systems
&lt;/h2>&lt;h3 id="defining-self-contained-systems">Defining Self-Contained Systems
&lt;/h3>&lt;p>A Self-Contained System is an autonomous, full-stack application that:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>Owns its complete stack&lt;/strong>: From the database schemas to the user interfaces&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Implements a specific business requirement&lt;/strong>: Focused on a bounded context&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Operates Independently&lt;/strong>: Can function without other systems&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Communicates asynchronously&lt;/strong>: Primarily through events and data replication&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Maintains its own deployment lifecycle&lt;/strong>: Independent versioning and releases&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="core-principles-of-scs">Core Principles of SCS
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Autonomy&lt;/strong>: Each SCS can be developed, tested, deployed and operated independently by a dedicated team. This autonomy extends beyond just the backend services to include the complete user experience.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Business Alignment&lt;/strong>: Systems are organized around business capabilities rather than technical layers. For example, an e-commerce SCS might own everything related to Product catalog - the DB Schemas, business logic, APIs and web pages for browsing and searching through products.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Full-Stack Ownership&lt;/strong>: Unlike microservices that often share frontend applications, each SCS owns its portion of the user interface. This eliminates coordination overhead and enables true end-to-end ownership.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Loose Coupling&lt;/strong>: SCS instances communicate primarily through async mechanisms like events, message queues or data replication. Synchronous calls are minimized as much as possible and carefully managed.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Technology diversity&lt;/strong>: Teams can choose the most appropriate tech stack for their specific domain without being constrained by org wide standards.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="scs-vs-traditional-microservices">SCS vs Traditional Microservices
&lt;/h2>&lt;p>While microservices focus on decomposing the backend into smaller services while often sharing the frontend, SCS takes a more holistic approach, decomposing the entire application stack - including UI - into independent systems.&lt;/p>
&lt;p>This fundamental difference has profound implications for team structure, development process, and operational complexity.&lt;/p>
&lt;h2 id="the-monolith-strengths-and-limitations">The Monolith: Strengths and Limitations
&lt;/h2>&lt;h3 id="monolith-strengths">Monolith Strengths
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Simplicity&lt;/strong>: Monoliths offer simpler development, testing and deployment processes. Developers work within a single codebase with familiar patterns and tools.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Performance&lt;/strong>: In-process communication eliminates network latency. Database transactions can maintain ACID properties across the entire application.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Debugging and Monitoring&lt;/strong>: Centralized logging, monitoring, and debugging provide clear visibility into an application&amp;rsquo;s behaviour.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Consistency&lt;/strong>: Shared Libraries, coding standards and architectural patterns ensure consistency throughout the application.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Initial Development Speed&lt;/strong>: Small teams can move quickly without the overhead of distributed system complexity.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="monolithic-limitations">Monolithic Limitations
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Scalability constraints&lt;/strong>: The entire app must be scaled as a unit, which may lead to resource wasting and scaling bottlenecks if not utilized properly.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Technology Lock-In&lt;/strong>: Since the entire application becomes bound to a single technology stack, it may limit innovation opportunities.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Team Coordination Overhead&lt;/strong>: As teams grow, coordination becomes increasingly complex.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Deployment Risk&lt;/strong>: Changes to any part of the application requires deploying the entire monolith, increasing the blast radius for any potential failures.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Limited Fault Isolation&lt;/strong>: A failure in any single component may bring down the entire application.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="microservices-promise-and-pitfalls">Microservices: Promise and Pitfalls
&lt;/h2>&lt;h3 id="microservices-strengths">Microservices Strengths
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Independent Scalability&lt;/strong>: Services can be scaled independently based on their specific load patterns and resource requirements.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Technology Diversity&lt;/strong>: Teams can choose the most appropriate tech stack for each service&amp;rsquo;s requirements.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Fault Isolation&lt;/strong>: Failure in one service doesn&amp;rsquo;t necessarily cascade to others, thereby improving overall system resilience.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Team Autonomy&lt;/strong>: Small, focused teams can own and operate individual services with minimal coordination.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>CI/CD&lt;/strong>: Services can be deployed independently, enabling faster release cycles and reduced deployment risk.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="microservices-pitfalls">Microservices Pitfalls
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Operational Complexity&lt;/strong>: Managing dozens or hundreds of services requires sophisticated tooling for deployment, monitoring, logging and debugging. This may end up being difficult to understand, maintain and coordinate.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Network Complexity&lt;/strong>: Service-to-Service communication introduces latency, failure modes and the need for specific design patterns for microservices like circuit breakers and retry/resubmit mechanisms.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Frontend Coordination&lt;/strong>: While backend systems are decomposed, frontends often end up remaining monolithic, creating coordination bottlenecks and deployment dependencies.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Testing Complexity&lt;/strong>: Integration Testing across Multiple Services is significantly more complex than testing a single application.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Distributed System Fallacies&lt;/strong>: Teams often underestimate the challenges of distributed systems leading to issues with network reliability, latency and security.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="detailed-architectural-comparison">Detailed Architectural Comparison
&lt;/h2>&lt;h3 id="development-complexity">Development Complexity
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Monolith&lt;/strong>: Low complexity for small teams and simple applications. Complexity increases dramatically as the codebase grows.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Microservices&lt;/strong>: High Complexity from day 1. Requires expertise in distributed systems, container orchestration and service discovery.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>SCS&lt;/strong>: Moderate Complexity. More complex than Monoliths but significantly less complex than fine-grained microservices. Complexity remains manageable as the system grows.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="operational-overhead">Operational Overhead
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Monolith&lt;/strong>: Minimal operational overhead. Single deployment, monitoring and logging.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Microservices&lt;/strong>: High operational overhead. Requires sophisticated tooling for container orchestration, service mesh, distributed tracing and centralized logging.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>SCS&lt;/strong>: Moderate operational Overhead. Fewer systems to manage than microservices, while also providing better isolation than monoliths.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="technology-flexibility">Technology Flexibility
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Monolith&lt;/strong>: Limited to a single stack across the entire application&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Microservices&lt;/strong>: Maximum technology flexibility, but can lead to operational complexity and knowledge fragmentation.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>SCS&lt;/strong>: Good technology flexibility with natural boundaries.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="scalability-patterns">Scalability Patterns
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Monolith&lt;/strong>: Scales the entire application as a unit. Simple, but potentially wasteful blocking up resources it doesn&amp;rsquo;t need.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Microservices&lt;/strong>: Fine grained scalability for individual services. Highly Optimized, but complex.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>SCS&lt;/strong>: Coarse grained scalability for business capabilities. Good balance between simplicity and optimization.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="decision-matrix-to-pick-between-the-styles">Decision Matrix to pick between the styles
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Factor&lt;/th>
&lt;th>Monolith&lt;/th>
&lt;th>Microservices&lt;/th>
&lt;th>SCS&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Domain Complexity&lt;/td>
&lt;td>Simple&lt;/td>
&lt;td>Complex&lt;/td>
&lt;td>Moderate&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Scalability Requirements&lt;/td>
&lt;td>Low-Medium&lt;/td>
&lt;td>Extremely High&lt;/td>
&lt;td>Medium-High&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Time to Market&lt;/td>
&lt;td>Fast&lt;/td>
&lt;td>Slow&lt;/td>
&lt;td>Medium&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Technology Diversity&lt;/td>
&lt;td>None&lt;/td>
&lt;td>Maximum&lt;/td>
&lt;td>High&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Development Speed&lt;/td>
&lt;td>Initially Fast&lt;/td>
&lt;td>Slow&lt;/td>
&lt;td>Medium&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Testing/Debugging Complexity&lt;/td>
&lt;td>Low&lt;/td>
&lt;td>High&lt;/td>
&lt;td>Medium&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Deployment Complexity&lt;/td>
&lt;td>Low&lt;/td>
&lt;td>High&lt;/td>
&lt;td>Medium&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Fault Isolation&lt;/td>
&lt;td>Poor&lt;/td>
&lt;td>Excellent&lt;/td>
&lt;td>Good&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Learning Curve&lt;/td>
&lt;td>Low&lt;/td>
&lt;td>High&lt;/td>
&lt;td>Medium&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="real-world-examples">Real World Examples
&lt;/h2>&lt;h3 id="zalando">Zalando
&lt;/h3>&lt;p>Zalando re-architected its e-commerce platform around autonomous teams and micro-frontends, stitching UI fragments together via their Project Mosaic framework. Each feature team deploys independent UI blocks backed by dedicated services and data stores, accelerating experiments and reducing cross-team impacts.&lt;/p>
&lt;p>&lt;a class="link" href="https://kubernetes.io/case-studies/zalando/" target="_blank" rel="noopener"
>Link 1&lt;/a>, &lt;a class="link" href="https://engineering.zalando.com/posts/2021/03/micro-frontends-part1.html" target="_blank" rel="noopener"
>Link 2&lt;/a>&lt;/p>
&lt;h3 id="breuninger">Breuninger
&lt;/h3>&lt;p>Breuninger is a leading German fashion and lifestyle retailer with a strong online presence. The company needed to optimize its e-commerce platform to respond more quickly to market demands and customer expectations. Hence they adopted SCS architecture, which allowed independent and rapid development and deployment of new features tailored to the customer journey. This approach improved time-to-market for new features, increased platform stability, and enhanced customer satisfaction through a more optimized shopping experience.&lt;/p>
&lt;p>&lt;a class="link" href="https://www.innoq.com/en/cases/ecommerce-breuninger/" target="_blank" rel="noopener"
>Link&lt;/a>&lt;/p>
&lt;h3 id="kühnenagel">Kühne+Nagel
&lt;/h3>&lt;p>Kühne+Nagel is a global logistics company. The company needed to break down its monolithic software to improve agility and maintainability. Kühne+Nagel adopted SCS (within the context of logistics), comparing it to microservices and choosing SCS for its clearer boundaries and team ownership. The transition enabled more independent team operations and simplified the management of complex logistics workflows. SCS offered a practical alternative to both monoliths and microservices for large, distributed organizations.&lt;/p>
&lt;p>&lt;a class="link" href="https://www.elastic.io/integration-best-practices/breaking-down-monolith-microservices-and-self-contained-systems/" target="_blank" rel="noopener"
>Link&lt;/a>&lt;/p>
&lt;h3 id="a-personal-anecdote">A Personal Anecdote
&lt;/h3>&lt;p>In my previous role, I had the opportunity to work closely with a team that developed a comprehensive &lt;a class="link" href="https://www.ibm.com/case-studies/ibm-cio-sales-incentive-systems" target="_blank" rel="noopener"
>PaaS offering&lt;/a> from scratch - a product that exemplified the SCS principles in action. The platform consisted of three very distinct Self-Contained Systems, each addressing a specific business capability. All three systems had their own tech stack for frontend (2x React, 1x Angular), backend (2x Go, 1x Python) and database (2x MongoDB, 1x DB2) integrated with a central authentication API (Go+MongoDB) that handled user login and session management. However, each of these SCS independently managed authorization within their respective areas using the principles of RBAC.&lt;/p>
&lt;h2 id="conclusion">Conclusion
&lt;/h2>&lt;p>Self-Contained Systems offer a compelling alternative to the traditional monolith versus microservices debate. By focusing on business-aligned, full-stack ownership, SCS provides many of the benefits of microservices while avoiding much of their complexity.&lt;/p>
&lt;p>The key insights for architectural decision-making are:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Start with Team Structure: Organize your architecture around how you want to organize your teams. SCS works best when teams can own complete business capabilities.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Embrace Business Alignment: Technical boundaries should reflect business boundaries. This makes systems easier to understand, maintain, and evolve.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Balance Complexity: SCS provides a sweet spot between monolithic simplicity and microservices flexibility. Choose the approach that matches your organization&amp;rsquo;s current capabilities and growth trajectory.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Focus on Autonomy: The primary benefit of SCS is team autonomy. Optimize for reducing coordination overhead while maintaining necessary integration points.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Evolve Gradually: Architecture is not a destination but a journey. Start with what works for your current situation and evolve as your organization and requirements change.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>The future of software architecture likely includes all three approaches - monoliths for simple applications, fine-grained microservices for high-scale optimization, and Self-Contained Systems for the vast middle ground where most applications live. Understanding when and how to apply each approach is the key to successful software architecture in the modern era.&lt;/p>
&lt;p>As we continue to learn from industry experiences and evolve our understanding of distributed systems, Self-Contained Systems represent a mature approach to organizing software that aligns technical and business concerns while maintaining manageable complexity. For many organizations, SCS may indeed be the architectural pattern they&amp;rsquo;ve been searching for.&lt;/p></description></item><item><title>How to Identify and Refactor Code Smells for Better Code Quality</title><link>https://blog.sparker0i.me/identify-and-refactor-code-smells-for-better-code-quality/</link><pubDate>Mon, 12 May 2025 07:43:20 +0000</pubDate><guid>https://blog.sparker0i.me/identify-and-refactor-code-smells-for-better-code-quality/</guid><description>&lt;img src="https://blog.sparker0i.me/identify-and-refactor-code-smells-for-better-code-quality/6821a6985006bd988f7f9344.png" alt="Featured image of post How to Identify and Refactor Code Smells for Better Code Quality" />&lt;p>Code is more than just instructions for a machine - it&amp;rsquo;s a form of communication with your future self and teammates. Yet all too often, codebases accumulate hidden &amp;ldquo;stinkers&amp;rdquo; that slow down development, introduce bugs, and frustrate newcomers. These are &lt;strong>code smells&lt;/strong>: surface indicators that something deeper in the design or implementation needs attention. In this post, we&amp;rsquo;ll explore a comprehensive catalog of common smells and walk through concrete refactoring - complete with before/after snippets (in Go, but the logic can be applied to any language)- to help you keep your codebase clean, maintainable, and a joy to work with.&lt;/p>
&lt;h2 id="why-code-smells-matter">Why Code Smells matter?
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>Readability &amp;amp; Onboarding&lt;/strong>: Long, tangled methods or duplicated logic force readers to mentally untangle intent from implementation. New team members spend hours deciphering what should&amp;rsquo;ve been clear.&lt;/li>
&lt;li>&lt;strong>Bug Rate&lt;/strong>: Smelly code often has hidden dependencies or unexpected side effects. One small change can ripple out, breaking functionality in multiple places.&lt;/li>
&lt;li>&lt;strong>Confidence to Change&lt;/strong>: When refactoring feels risky, teams delay improvements, leading to technical debt escalation. Over time, even minor enhancements require heroic effort.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>Personal Anecdote&lt;/strong>: During the early stages of my career I inherited a 5k line class handling everything from fetching data then transforming it and loading it somewhere. This class was growing exponentially with every sprint/iteration, and soon risked crossing 10k lines. Every change required a full regression suite and lots of manual testing. After identifying just three key smells - Long Method, Feature Envy, and Primitive Obsession - we applied targeted refactorings that reduced that class to under 1000 lines and we were easily able to extend our codebase.&lt;/p>&lt;/blockquote>
&lt;h2 id="basic-code-smells--refactorings">&lt;strong>Basic Code Smells &amp;amp; Refactorings&lt;/strong>
&lt;/h2>&lt;h3 id="long-method">Long Method
&lt;/h3>&lt;p>&lt;strong>What it is:&lt;/strong> A method or function that spans many lines - often 200+ - and tries to do too much: input validation, business logic, data transformation, persistence, side-effects, and user interaction all in one place.&lt;/p>
&lt;p>&lt;strong>Why it matters&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Cognitive Load&lt;/strong>: Readers must keep many moving parts and intents in mind at once.&lt;/li>
&lt;li>&lt;strong>Hard to Test&lt;/strong>: You can&amp;rsquo;t isolate pieces easily for unit tests.&lt;/li>
&lt;li>&lt;strong>Change Risk&lt;/strong>: A tweak for one concern can inadvertently break another.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How to spot it&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Look for methods longer than a screen.&lt;/li>
&lt;li>Multiple comments like // validate, // compute, // persist in one block.&lt;/li>
&lt;li>Deep nesting of conditionals and loops.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Refactoring&lt;/strong>: Use Extract Method&lt;/p>
&lt;ol>
&lt;li>Identify a coherent chunk: it does one logical sub-task.&lt;/li>
&lt;li>Give it a descriptive name.&lt;/li>
&lt;li>Replace the chunk with a call to the new method.&lt;/li>
&lt;/ol>
&lt;p>Example: Before&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">Checkout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span> &lt;span class="n">Cart&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="mf">1.&lt;/span> &lt;span class="n">Validate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Items&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nb">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;empty cart&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="mf">2.&lt;/span> &lt;span class="n">Sum&lt;/span> &lt;span class="n">prices&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">cart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Items&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Price&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Qty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="mf">3.&lt;/span> &lt;span class="n">Apply&lt;/span> &lt;span class="n">discount&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">cart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Customer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">IsVIP&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">sum&lt;/span> &lt;span class="o">*=&lt;/span> &lt;span class="mf">0.9&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="mf">4.&lt;/span> &lt;span class="n">Log&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">persist&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Total: &lt;/span>&lt;span class="si">%.2f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sum&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">db&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sum&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="mf">5.&lt;/span> &lt;span class="n">Send&lt;/span> &lt;span class="n">email&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">emailService&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Customer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Email&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sum&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Example: After&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">Checkout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span> &lt;span class="n">Cart&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">validate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">total&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">calculateTotal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Items&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">total&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">applyDiscount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">total&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Customer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">finalizeOrder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">total&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">validate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span> &lt;span class="n">Cart&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Items&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;cart empty&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">calculateTotal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">items&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="n">Item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">applyDiscount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">total&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="n">Customer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">finalizeOrder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span> &lt;span class="n">Cart&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">total&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Total: &lt;/span>&lt;span class="si">%.2f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">total&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">db&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">total&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">emailService&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Customer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Email&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">total&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="duplicated-code">Duplicated Code
&lt;/h3>&lt;p>&lt;strong>What it is&lt;/strong>: Slivers of nearly identical logic appear in two or more locations - copy-paste programming.&lt;/p>
&lt;p>&lt;strong>Why it matters&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Maintenance Hell&lt;/strong>: Fixing a bug requires updating every copy.&lt;/li>
&lt;li>&lt;strong>Divergence&lt;/strong>: Over time, copies drift apart, hiding inconsistent behavior.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How to spot it&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Search for the same loop, conditional, or calculation in multiple files.&lt;/li>
&lt;li>In code reviews, ask &amp;ldquo;Have we done this before?&amp;rdquo;&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Refactoring Options&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Pull shared logic into a single helper function.&lt;/li>
&lt;li>Replace all occurrences with calls to that helper&lt;/li>
&lt;/ul>
&lt;p>Example: Before&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">CalculateTaxA&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">order&lt;/span> &lt;span class="n">Order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tax&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">order&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Items&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tax&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Price&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">item&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Quantity&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">0.08&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">tax&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">CalculateTaxB&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">invoice&lt;/span> &lt;span class="n">Invoice&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tax&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">invoice&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Lines&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tax&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">line&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UnitPrice&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Count&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">0.08&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">tax&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Example: After&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">calculateTax&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">subtotal&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">subtotal&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">0.08&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">CalculateTaxA&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">order&lt;/span> &lt;span class="n">Order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">subtotal&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">sumPrices&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">order&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Items&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">calculateTax&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">subtotal&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">CalculateTaxB&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">inv&lt;/span> &lt;span class="n">Invoice&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">subtotal&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">sumInvoiceLines&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">inv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Lines&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">calculateTax&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">subtotal&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">Shared&lt;/span> &lt;span class="n">helpers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">sumPrices&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">items&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="n">Item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">total&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">items&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">total&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Price&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Quantity&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">total&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">sumInvoiceLines&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lines&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="n">Line&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">total&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">lines&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">total&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UnitPrice&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Count&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">total&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="long-parameter-list">Long Parameter List
&lt;/h3>&lt;p>&lt;strong>What it is&lt;/strong>: Methods that accept many parameters - often over five - making calls verbose and error-prone.&lt;/p>
&lt;p>&lt;strong>Why it matters&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Hard to Remember Order: Callers mix up parameters.&lt;/li>
&lt;li>&lt;strong>Low Cohesion&lt;/strong>: Signals multiple responsibilities or data clumps.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How to spot it&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Method signatures with more than 4 arguments.&lt;/li>
&lt;li>Frequent use of null or default values to skip parameters.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Refactoring&lt;/strong>: Introduce Parameter Object&lt;/p>
&lt;ol>
&lt;li>Identify parameters that form a logical group.&lt;/li>
&lt;li>Create a class/struct to hold them.&lt;/li>
&lt;li>Replace the parameter list with the new object.&lt;/li>
&lt;/ol>
&lt;p>Example: Before&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">CreateUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">firstName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lastName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">email&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">phone&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">role&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">isActive&lt;/span> &lt;span class="ne">bool&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>After:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">CreateUserRequest&lt;/span> &lt;span class="n">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">FirstName&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LastName&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Email&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Phone&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Role&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">IsActive&lt;/span> &lt;span class="ne">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">CreateUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span> &lt;span class="n">CreateUserRequest&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="divergent-change">Divergent Change
&lt;/h3>&lt;p>&lt;strong>What it is&lt;/strong>: A single class or module is edited for many unrelated reasons&amp;ndash;bug fixes, UI tweaks, business-rule updates&amp;ndash;indicating mixed responsibilities.&lt;/p>
&lt;p>&lt;strong>Why it matters&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Fragile&lt;/strong>: Changes for one concern can break another.&lt;/li>
&lt;li>&lt;strong>Violates SRP&lt;/strong>: Violates the Single Responsibility Principle.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How to spot it&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Version-control history shows one file modified by many tickets of different types.&lt;/li>
&lt;li>Code reviewers comment: &amp;ldquo;Why are we touching this here?&amp;rdquo;&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Refactoring&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Identify distinct responsibilities and extract them into new types.&lt;/li>
&lt;li>Move methods closer to the data they operate on.&lt;/li>
&lt;/ul>
&lt;p>Example: Before - one class handles both user validation and reporting logic:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">UserService&lt;/span> &lt;span class="n">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">UserService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Validate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">User&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Email&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;email required&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="n">many&lt;/span> &lt;span class="n">more&lt;/span> &lt;span class="n">checks&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">UserService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">GenerateReport&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">User&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Report&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">mixing&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="n">access&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">formatting&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Report&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="o">*/&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Example: After - split responsibilities into two classes:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">UserValidator&lt;/span> &lt;span class="n">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">UserValidator&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Validate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">User&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Email&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;email required&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="n">other&lt;/span> &lt;span class="n">checks&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">UserReportService&lt;/span> &lt;span class="n">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">UserReportService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Generate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">User&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Report&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">report&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">Report&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="n">focused&lt;/span> &lt;span class="n">report&lt;/span> &lt;span class="n">generation&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="o">*/&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">report&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="feature-envy">Feature Envy
&lt;/h3>&lt;p>&lt;strong>What it is&lt;/strong>: A method in one type heavily accesses fields or methods of another type - more than its own - indicating misplaced behavior.&lt;/p>
&lt;p>&lt;strong>Why it matters&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Tight Coupling&lt;/strong>: Class A becomes tightly coupled to B&amp;rsquo;s internals.&lt;/li>
&lt;li>&lt;strong>Poor Encapsulation&lt;/strong>: Behavior isn&amp;rsquo;t located where the data resides.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How to spot it&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>A method&amp;rsquo;s code reads like b.getX(), b.getY(), b.computeZ() repeatedly.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Refactoring&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Move Method&lt;/strong>: Shift the method into Class B.&lt;/li>
&lt;li>&lt;strong>Extract Method&lt;/strong>: If only part of the code envies B, extract that fragment into a helper on B.&lt;/li>
&lt;/ul>
&lt;p>Example: Before - a method in &lt;code>InvoiceService&lt;/code> reaching into &lt;code>Order&lt;/code> internals:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">InvoiceService&lt;/span> &lt;span class="n">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">InvoiceService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">TotalWithTax&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">Order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Items&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Price&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">item&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Quantity&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rate&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Customer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">State&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">TaxRate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">sum&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">rate&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Example: After - move the logic into &lt;code>Order&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">Order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">TotalWithTax&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Items&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Price&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">item&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Quantity&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">sum&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Customer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">State&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">TaxRate&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">InvoiceService&lt;/span> &lt;span class="n">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">InvoiceService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">TotalWithTax&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">Order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">TotalWithTax&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="shotgun-surgery">Shotgun Surgery
&lt;/h3>&lt;p>&lt;strong>What it is&lt;/strong>: A small change requires edits in many different places - scattered across classes or modules.&lt;/p>
&lt;p>&lt;strong>Why it matters&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Error-Prone&lt;/strong>: Easy to miss one location.&lt;/li>
&lt;li>&lt;strong>Discourages Change&lt;/strong>: Teams avoid improvements.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How to spot it&lt;/strong>: Search-and-replace touches dozens of files for a single concept.&lt;/p>
&lt;p>&lt;strong>Refactoring&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Introduce Facade&lt;/strong>: Centralize calls behind one interface.&lt;/li>
&lt;li>&lt;strong>Move Related Behavior&lt;/strong>: Co-locate methods and data so that a change is&lt;/li>
&lt;/ul>
&lt;p>Example: Before&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">OnboardUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">userID&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">db&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FetchUserData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">userID&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">processed&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">processor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Process&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">notifier&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SendWelcome&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">userID&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">processed&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Summary&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Example: After&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">OnboardingFacade&lt;/span> &lt;span class="n">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DB&lt;/span> &lt;span class="n">Database&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Processor&lt;/span> &lt;span class="n">Processor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Notifier&lt;/span> &lt;span class="n">Notifier&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">OnboardingFacade&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Onboard&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">userID&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DB&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FetchUserData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">userID&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">summary&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Processor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Process&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Summary&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Notifier&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SendWelcome&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">userID&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">summary&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">Client&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">facade&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">OnboardingFacade&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">processor&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">notifier&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">facade&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Onboard&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;user123&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="primitive-obsession">Primitive Obsession
&lt;/h3>&lt;p>&lt;strong>What it is&lt;/strong>: Overusing built-in types (String, int, bool) for domain concepts instead of small dedicated classes or value objects.&lt;/p>
&lt;p>&lt;strong>Why it matters&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Scattering of Validation&lt;/strong>: Every user-input string is validated in ad-hoc ways.&lt;/li>
&lt;li>&lt;strong>Duplication&lt;/strong>: Parsing and formatting logic repeated.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How to spot it&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Method signatures full of String parameters representing distinct concepts (e.g., email, phone, address).&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Refactoring&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Replace Primitive with Value Object: Create classes like &lt;code>EmailAddress&lt;/code>, &lt;code>PhoneNumber&lt;/code> that encapsulate format checks and domain logic.&lt;/li>
&lt;/ul>
&lt;p>Example: Before&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">ConvertAmount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">amount&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fromCurrency&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">toCurrency&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rate&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">lookupRate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fromCurrency&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">toCurrency&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">amount&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">rate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Example: After&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">Currency&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">Currency&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">RateTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">other&lt;/span> &lt;span class="n">Currency&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">lookupRate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">other&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">ConvertAmount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">amount&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">from&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">Currency&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">amount&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">from&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RateTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="replace-temp-with-query">Replace Temp with Query
&lt;/h3>&lt;p>&lt;strong>What it is&lt;/strong>: Temporary variables hold intermediate calculation results, cluttering the method body.&lt;/p>
&lt;p>&lt;strong>Why it matters&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Readability&lt;/strong>: Readers must track variables and their transformations.&lt;/li>
&lt;li>&lt;strong>Duplication&lt;/strong>: The same calculation might reappear elsewhere.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How to spot it&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Sequences like temp = expr; &amp;hellip; use temp; &amp;hellip; modify temp.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Refactoring&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Encapsulate the expression in a well-named query method, then call it directly.&lt;/li>
&lt;/ul>
&lt;p>Example: Before&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">FinalPrice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">Order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">basePrice&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Quantity&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UnitPrice&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">discount&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">basePrice&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">1000&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">discount&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">basePrice&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">0.05&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">basePrice&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">discount&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Example: After&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">FinalPrice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">Order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">calculateBase&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">calculateDiscount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">calculateBase&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">Order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Quantity&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UnitPrice&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">calculateDiscount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">Order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">base&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">calculateBase&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">base&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">1000&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">base&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">0.05&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="replace-conditional-with-polymorphism">Replace Conditional with Polymorphism
&lt;/h3>&lt;p>&lt;strong>What it is&lt;/strong>: Extensive &lt;code>if-else&lt;/code> or &lt;code>switch&lt;/code> blocks that dispatch based on type codes or flags.&lt;/p>
&lt;p>&lt;strong>Why it matters&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Open/Closed Violation&lt;/strong>: Every time you add a new type, you modify the conditional.&lt;/li>
&lt;li>&lt;strong>Readability&lt;/strong>: Logic spread across a tangled conditional.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How to spot it&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Large switch(order.type) { case A:&amp;hellip;; case B:&amp;hellip; } constructs.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Refactoring&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Strategy Pattern or Class Hierarchy: Define a common interface and let each subtype implement its behavior.&lt;/li>
&lt;/ul>
&lt;p>Example: Before&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">SendNotification&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">method&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">method&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;email&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sendEmail&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Email&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Hello!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">method&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;sms&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sendSMS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Phone&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Hello!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">method&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;push&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sendPush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DeviceToken&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Hello!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Example: After&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">Notifier&lt;/span> &lt;span class="n">interface&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Notify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">EmailNotifier&lt;/span> &lt;span class="n">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">EmailNotifier&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Notify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">User&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">sendEmail&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Email&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Hello!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">SMSNotifier&lt;/span> &lt;span class="n">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">SMSNotifier&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Notify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">User&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">sendSMS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Phone&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Hello!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">PushNotifier&lt;/span> &lt;span class="n">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">PushNotifier&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Notify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">User&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">sendPush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DeviceToken&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Hello!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">notifierMap&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">Notifier&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;email&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">EmailNotifier&lt;/span>&lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sms&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">SMSNotifier&lt;/span>&lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;push&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">PushNotifier&lt;/span>&lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">SendNotification&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">method&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ok&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">notifierMap&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="n">ok&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Notify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="data-clumps">Data Clumps
&lt;/h3>&lt;p>&lt;strong>What it is&lt;/strong>: Groups of variables that always appear together&amp;ndash;e.g., x, y, z coordinates, street, city, zip.&lt;/p>
&lt;p>&lt;strong>Why it matters&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Duplication&lt;/strong>: Same parameter list repeated.&lt;/li>
&lt;li>&lt;strong>Cohesion&lt;/strong>: Related data isn&amp;rsquo;t grouped.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How to spot it&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Method after method accepting the same set of parameters.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Refactoring&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Introduce Parameter Object or Data Class to bundle related fields into one type.&lt;/li>
&lt;/ul>
&lt;p>Example: Before&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">DrawLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y2&lt;/span> &lt;span class="n">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetStrokeColor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">MoveTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LineTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Stroke&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Example: After&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span> &lt;span class="n">Point&lt;/span> &lt;span class="n">struct&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y&lt;/span> &lt;span class="n">float64&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">DrawLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p2&lt;/span> &lt;span class="n">Point&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetStrokeColor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">MoveTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LineTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Stroke&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">Usage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DrawLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Point&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="n">Point&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="general-refactoring-best-practices">General Refactoring Best Practices
&lt;/h2>&lt;ol>
&lt;li>&lt;strong>Test Coverage First&lt;/strong>: Ensure you have reliable unit and integration tests before refactoring.&lt;/li>
&lt;li>&lt;strong>Tiny, Safe Steps&lt;/strong>: Change one thing at a time; run tests after each change to catch regressions early.&lt;/li>
&lt;li>&lt;strong>IDE Assistance&lt;/strong>: Leverage built-in refactorings - Extract Method, Rename, Inline - to minimize manual edits.&lt;/li>
&lt;li>&lt;strong>Code Reviews with Smell Checks&lt;/strong>: Add &amp;ldquo;smell spotting&amp;rdquo; to your review checklist to catch issues collaboratively.&lt;/li>
&lt;li>&lt;strong>Continuous Refactoring&lt;/strong>: Make cleanup part of your regular workflow and Definition of Done, not a separate &amp;ldquo;cleanup sprint.&amp;rdquo;&lt;/li>
&lt;/ol>
&lt;h2 id="conclusion">Conclusion
&lt;/h2>&lt;p>Code smells are inevitable, but they need not become insurmountable technical debt. By recognizing these ten patterns and applying targeted refactorings, you&amp;rsquo;ll cultivate a codebase that&amp;rsquo;s more understandable, safer to change, and more enjoyable for your entire team. Start small, build momentum with quick wins like Extract Method, then tackle more advanced refactorings. Your future self (and teammates) will thank you.&lt;/p></description></item><item><title>Why Every Developer Should Care About Design Patterns: A Deep Dive</title><link>https://blog.sparker0i.me/why-every-developer-should-care-about-design-patterns/</link><pubDate>Sat, 08 Mar 2025 08:02:38 +0000</pubDate><guid>https://blog.sparker0i.me/why-every-developer-should-care-about-design-patterns/</guid><description>&lt;img src="https://blog.sparker0i.me/why-every-developer-should-care-about-design-patterns/67cbf99efca581965cde6fca.png" alt="Featured image of post Why Every Developer Should Care About Design Patterns: A Deep Dive" />&lt;p>Imagine you&amp;rsquo;re building furniture. You could design each piece from scratch, figuring out how legs connect to tabletops or how drawers slide in and out. Or, you could use tried-and-tested blueprints that woodworkers have refined over generations.&lt;/p>
&lt;p>In software development, design patterns are these blueprints. They represent elegant solutions to common coding problems that developers have encountered repeatedly over decades. And whether you&amp;rsquo;re just starting your coding journey or you&amp;rsquo;re a seasoned developer, understanding these patterns can dramatically improve your programming skills.&lt;/p>
&lt;h2 id="what-are-design-patterns-really">What Are Design Patterns, Really?
&lt;/h2>&lt;p>At their core, design patterns are reusable solutions to problems that occur frequently in software design. Think of them as templates that can be applied to different situations, saving you from reinventing the wheel each time you face a familiar challenge.&lt;/p>
&lt;p>The concept was popularized in 1994 when four authors (often called the &amp;ldquo;Gang of Four&amp;rdquo; or GoF) published the book &amp;ldquo;Design Patterns: Elements of Reusable Object-Oriented Software.&amp;rdquo; This landmark text identified 23 patterns that addressed common problems in object-oriented programming.&lt;/p>
&lt;h2 id="the-three-categories-of-design-patterns">The Three Categories of Design Patterns
&lt;/h2>&lt;p>Design patterns generally fall into three categories, each addressing a different aspect of software design:&lt;/p>
&lt;h3 id="1-creational-patterns">1. Creational Patterns
&lt;/h3>&lt;p>These patterns deal with object creation mechanisms, trying to create objects in a manner suitable to the situation.&lt;/p>
&lt;p>&lt;strong>Example: The Factory Pattern&lt;/strong>&lt;/p>
&lt;p>Imagine you&amp;rsquo;re developing a game with different character types (warrior, mage, archer). Instead of writing code like this everywhere:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Character&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">equals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;warrior&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Warrior&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">equals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mage&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Mage&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">equals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;archer&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Archer&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>You could use a Factory pattern:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Character&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CharacterFactory&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">createCharacter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>The factory handles the complex creation logic, making your code cleaner and more maintainable. If you add a new character type later, you only need to modify the factory, not every place characters are created.&lt;/p>
&lt;h3 id="2-structural-patterns">2. Structural Patterns
&lt;/h3>&lt;p>These patterns focus on how classes and objects are composed to form larger structures.&lt;/p>
&lt;p>&lt;strong>Example: The Adapter Pattern&lt;/strong>&lt;/p>
&lt;p>Imagine you have a new library that tracks user analytics, but its interface doesn&amp;rsquo;t match what your application expects:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Your application expects:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">OldAnalytics&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">trackEvent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// But the new library uses:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">NewAnalyticsLibrary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">logActivity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activityName&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">JSONObject&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">attributes&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// Implementation&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Instead of changing your entire codebase, you can create an adapter:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">AnalyticsAdapter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">OldAnalytics&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">NewAnalyticsLibrary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">newAnalytics&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">NewAnalyticsLibrary&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">trackEvent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">JSONObject&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">convertMapToJson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">newAnalytics&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">logActivity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">JSONObject&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">convertMapToJson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// Conversion logic&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">JSONObject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Now your existing code works with the new library without modifications!&lt;/p>
&lt;h3 id="3-behavioral-patterns">3. Behavioral Patterns
&lt;/h3>&lt;p>These patterns are concerned with algorithms and the assignment of responsibilities between objects.&lt;/p>
&lt;p>&lt;strong>Example: The Observer Pattern&lt;/strong>&lt;/p>
&lt;p>Think of how social media works: when someone posts an update, all their followers get notified. This is the Observer pattern in action!&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">Post&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">followers&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&amp;gt;&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">addFollower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">followers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">createUpdate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// Create the update&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">notifyFollowers&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">notifyFollowers&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">follower&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">followers&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">follower&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">notify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;New post available!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>This pattern creates a one-to-many dependency where multiple observers (followers) are notified when the subject (post creator) changes state.&lt;/p>
&lt;h2 id="why-should-beginners-care-about-design-patterns">Why Should Beginners Care About Design Patterns?
&lt;/h2>&lt;p>If you&amp;rsquo;re new to programming, you might wonder if design patterns are relevant to you yet. The answer is a resounding yes, for several important reasons:&lt;/p>
&lt;h3 id="1-they-teach-you-how-to-think-about-code-structure">1. They Teach You How to Think About Code Structure
&lt;/h3>&lt;p>Learning design patterns early helps develop an architectural mindset. Instead of focusing solely on making your code work, you start considering how it&amp;rsquo;s organized and how different components interact.&lt;/p>
&lt;h3 id="2-they-help-you-write-more-professional-code-faster">2. They Help You Write More Professional Code Faster
&lt;/h3>&lt;p>When you recognize common problems, you can apply established solutions rather than struggling through trial and error. This accelerates your development process and results in more robust solutions.&lt;/p>
&lt;h3 id="3-they-improve-collaboration">3. They Improve Collaboration
&lt;/h3>&lt;p>Programming is rarely a solo activity. Using established patterns creates a shared vocabulary with other developers. When you mention using a &amp;ldquo;Factory Method&amp;rdquo; or &amp;ldquo;Observer Pattern,&amp;rdquo; other developers immediately understand your approach.&lt;/p>
&lt;h3 id="4-they-prepare-you-for-framework-learning">4. They Prepare You for Framework Learning
&lt;/h3>&lt;p>Modern frameworks like React, Angular, and Spring incorporate many design patterns. Understanding these patterns makes learning frameworks easier because you recognize the underlying concepts.&lt;/p>
&lt;h3 id="5-they-prevent-common-mistakes">5. They Prevent Common Mistakes
&lt;/h3>&lt;p>Many design patterns evolved specifically to address problems that repeatedly caused bugs or maintenance headaches. Learning these patterns helps you avoid these pitfalls from the start.&lt;/p>
&lt;h2 id="design-patterns-in-real-world-applications">Design Patterns in Real-World Applications
&lt;/h2>&lt;p>Let&amp;rsquo;s look at some examples of how design patterns show up in technologies you might already be using:&lt;/p>
&lt;h3 id="in-web-development">In Web Development
&lt;/h3>&lt;p>&lt;strong>React&amp;rsquo;s Component Model:&lt;/strong> React uses the Composite pattern, allowing you to build complex UIs from simple components that can contain other components.&lt;/p>
&lt;p>&lt;strong>Event Handling in JavaScript:&lt;/strong> The Observer pattern is used extensively in event-driven programming, where event listeners &amp;ldquo;observe&amp;rdquo; elements and respond to user interactions.&lt;/p>
&lt;h3 id="in-mobile-apps">In Mobile Apps
&lt;/h3>&lt;p>&lt;strong>iOS&amp;rsquo;s Delegation Pattern:&lt;/strong> This is a variation of the Observer pattern where objects delegate certain responsibilities to other objects.&lt;/p>
&lt;p>&lt;strong>Android&amp;rsquo;s Adapter Views:&lt;/strong> These use the Adapter pattern to convert data sources into views that can be displayed in lists.&lt;/p>
&lt;h3 id="in-everyday-applications">In Everyday Applications
&lt;/h3>&lt;p>&lt;strong>Word Processors:&lt;/strong> The Command pattern powers features like undo/redo, where each action is encapsulated as an object that can be executed, tracked, and reversed.&lt;/p>
&lt;p>&lt;strong>Video Games:&lt;/strong> The State pattern manages character behaviors, allowing characters to smoothly transition between actions like walking, running, or attacking.&lt;/p>
&lt;h2 id="common-misunderstandings-about-design-patterns">Common Misunderstandings About Design Patterns
&lt;/h2>&lt;p>As you learn about design patterns, be aware of these common misconceptions:&lt;/p>
&lt;h3 id="misunderstanding-1-design-patterns-are-too-complex-for-beginners">Misunderstanding #1: &amp;ldquo;Design Patterns Are Too Complex for Beginners&amp;rdquo;
&lt;/h3>&lt;p>&lt;strong>Reality:&lt;/strong> While some patterns have complex implementations, the concepts behind them are accessible to beginners. Start with simpler patterns like Factory, Observer, and Strategy.&lt;/p>
&lt;h3 id="misunderstanding-2-i-should-use-design-patterns-everywhere">Misunderstanding #2: &amp;ldquo;I Should Use Design Patterns Everywhere&amp;rdquo;
&lt;/h3>&lt;p>&lt;strong>Reality:&lt;/strong> Design patterns are tools, not rules. They should be applied when they solve a specific problem, not forced into every situation. Sometimes simple, straightforward code is better.&lt;/p>
&lt;h3 id="misunderstanding-3-design-patterns-are-outdated">Misunderstanding #3: &amp;ldquo;Design Patterns Are Outdated&amp;rdquo;
&lt;/h3>&lt;p>&lt;strong>Reality:&lt;/strong> While some specific implementations may become less relevant as languages evolve, the core principles behind design patterns remain valuable. Modern languages and frameworks may offer built-in solutions for some patterns, but understanding the patterns helps you use these features more effectively.&lt;/p>
&lt;h2 id="how-to-start-learning-design-patterns">How to Start Learning Design Patterns
&lt;/h2>&lt;p>Ready to dive into design patterns? Here&amp;rsquo;s a beginner-friendly approach:&lt;/p>
&lt;h3 id="1-start-with-real-problems">1. Start with Real Problems
&lt;/h3>&lt;p>Rather than trying to memorize all 23 GoF patterns at once, focus on patterns that solve problems you&amp;rsquo;ve encountered. This makes the learning more relevant and memorable.&lt;/p>
&lt;h3 id="2-learn-through-examples">2. Learn Through Examples
&lt;/h3>&lt;p>Look for concrete examples of patterns in languages you&amp;rsquo;re familiar with. Many online resources provide code samples in different programming languages.&lt;/p>
&lt;h3 id="3-practice-implementation">3. Practice Implementation
&lt;/h3>&lt;p>Try implementing a simple version of each pattern you learn. This hands-on approach helps solidify your understanding.&lt;/p>
&lt;h3 id="4-refactor-existing-code">4. Refactor Existing Code
&lt;/h3>&lt;p>Take some code you&amp;rsquo;ve already written and refactor it using a design pattern. This exercise helps you see the benefits and trade-offs directly.&lt;/p>
&lt;h3 id="5-learn-patterns-in-groups">5. Learn Patterns in Groups
&lt;/h3>&lt;p>Study related patterns together to understand their similarities and differences. For example, learn Factory Method, Abstract Factory, and Builder together to understand different approaches to object creation.&lt;/p>
&lt;h2 id="a-deeper-look-at-five-essential-patterns-for-beginners">A Deeper Look at Five Essential Patterns for Beginners
&lt;/h2>&lt;p>Let&amp;rsquo;s explore five patterns that are particularly valuable for beginners to understand:&lt;/p>
&lt;h3 id="1-singleton-pattern">1. Singleton Pattern
&lt;/h3>&lt;p>&lt;strong>Problem it Solves:&lt;/strong> Sometimes you need exactly one instance of a class that is accessible globally, like a configuration manager or connection pool.&lt;/p>
&lt;p>&lt;strong>How it Works:&lt;/strong> The pattern ensures a class has only one instance and provides a global point to access it.&lt;/p>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">DatabaseConnection&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">static&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">DatabaseConnection&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">instance&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// Private constructor prevents direct instantiation&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">DatabaseConnection&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// Initialize connection&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">static&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">synchronized&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">DatabaseConnection&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">getInstance&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">instance&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">instance&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">DatabaseConnection&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">instance&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sql&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// Execute query using the single connection&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Usage&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">DatabaseConnection&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">connection&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">DatabaseConnection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getInstance&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SELECT * FROM users&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>When to Use It:&lt;/strong> When having multiple instances would cause problems (like multiple file writers trying to access the same file) or waste resources.&lt;/p>
&lt;p>&lt;strong>When to Avoid It:&lt;/strong> When you need different instances with different configurations or when it introduces unnecessary global state.&lt;/p>
&lt;h3 id="2-strategy-pattern">2. Strategy Pattern
&lt;/h3>&lt;p>&lt;strong>Problem it Solves:&lt;/strong> You need different variants of an algorithm, but don&amp;rsquo;t want to hardcode all the variants into a single class.&lt;/p>
&lt;p>&lt;strong>How it Works:&lt;/strong> Define a family of algorithms, encapsulate each one, and make them interchangeable.&lt;/p>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Strategy interface&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">PaymentStrategy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">pay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Concrete strategies&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">CreditCardPayment&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PaymentStrategy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">cardNumber&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">CreditCardPayment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">cardNumber&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">cardNumber&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">cardNumber&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">pay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34; paid with credit card &amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">cardNumber&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">PayPalPayment&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PaymentStrategy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">PayPalPayment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">email&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">pay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34; paid using PayPal account &amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Context&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">ShoppingCart&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PaymentStrategy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">paymentStrategy&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">setPaymentStrategy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">PaymentStrategy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">paymentStrategy&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">paymentStrategy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">paymentStrategy&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">checkout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">paymentStrategy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">pay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Usage&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">ShoppingCart&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ShoppingCart&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">setPaymentStrategy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CreditCardPayment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;1234-5678-9012-3456&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">checkout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">100&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">setPaymentStrategy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PayPalPayment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user@example.com&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">cart&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">checkout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">200&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>When to Use It:&lt;/strong> When you have multiple ways to perform an operation and need to switch between them dynamically.&lt;/p>
&lt;p>&lt;strong>When to Avoid It:&lt;/strong> When there&amp;rsquo;s only one or two simple variants of an algorithm that aren&amp;rsquo;t likely to change.&lt;/p>
&lt;h3 id="3-observer-pattern">3. Observer Pattern
&lt;/h3>&lt;p>&lt;strong>Problem it Solves:&lt;/strong> You need many objects to receive updates when another object changes.&lt;/p>
&lt;p>&lt;strong>How it Works:&lt;/strong> Define a one-to-many dependency between objects so that when one object changes state, all its dependents are notified.&lt;/p>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Subject interface&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">Subject&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">addObserver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Observer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">removeObserver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Observer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">notifyObservers&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Observer interface&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">Observer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">message&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Concrete subject&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">NewsAgency&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Subject&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Observer&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">observers&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ArrayList&lt;/span>&lt;span class="o">&amp;lt;&amp;gt;&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">news&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">addObserver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Observer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">observers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">removeObserver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Observer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">observers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">notifyObservers&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Observer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">observers&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">news&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">setNews&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">news&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">news&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">news&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">notifyObservers&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Concrete observer&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">NewsChannel&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Observer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">NewsChannel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">news&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34; received news: &amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">news&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Usage&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">NewsAgency&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">agency&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">NewsAgency&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">NewsChannel&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">channel1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">NewsChannel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Channel 1&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">NewsChannel&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">channel2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">NewsChannel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Channel 2&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">agency&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">addObserver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">channel1&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">agency&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">addObserver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">channel2&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">agency&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">setNews&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Breaking news: Design patterns are awesome!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>When to Use It:&lt;/strong> When changes to one object may require changing other objects, and you don&amp;rsquo;t know how many objects need to change.&lt;/p>
&lt;p>&lt;strong>When to Avoid It:&lt;/strong> When the notification logic becomes too complex or observers need to rely on notifications that might be missed (e.g., if they&amp;rsquo;re temporarily disconnected).&lt;/p>
&lt;h3 id="4-factory-method-pattern">4. Factory Method Pattern
&lt;/h3>&lt;p>&lt;strong>Problem it Solves:&lt;/strong> You need to create objects, but don&amp;rsquo;t know exactly what type of objects you&amp;rsquo;ll need to create until runtime.&lt;/p>
&lt;p>&lt;strong>How it Works:&lt;/strong> Define an interface for creating an object, but let subclasses decide which class to instantiate.&lt;/p>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Product interface&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">Vehicle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">drive&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Concrete products&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">Car&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Vehicle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">drive&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Driving a car...&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">Motorcycle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Vehicle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">drive&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Riding a motorcycle...&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Creator abstract class&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">abstract&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">VehicleFactory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">abstract&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Vehicle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">createVehicle&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">deliverVehicle&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Vehicle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">vehicle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">createVehicle&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Delivering the vehicle...&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">vehicle&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">drive&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Concrete creators&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">CarFactory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">extends&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">VehicleFactory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Vehicle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">createVehicle&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Car&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">MotorcycleFactory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">extends&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">VehicleFactory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Vehicle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">createVehicle&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Motorcycle&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Usage&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">VehicleFactory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">factory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CarFactory&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">factory&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">deliverVehicle&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">factory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MotorcycleFactory&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">factory&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">deliverVehicle&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>When to Use It:&lt;/strong> When a class can&amp;rsquo;t anticipate the type of objects it must create, or when a class wants its subclasses to specify the objects it creates.&lt;/p>
&lt;p>&lt;strong>When to Avoid It:&lt;/strong> When adding new products requires changing the factory interface, which violates the Open/Closed Principle.&lt;/p>
&lt;h3 id="5-decorator-pattern">5. Decorator Pattern
&lt;/h3>&lt;p>&lt;strong>Problem it Solves:&lt;/strong> You need to add responsibilities to objects dynamically without affecting other objects of the same class.&lt;/p>
&lt;p>&lt;strong>How it Works:&lt;/strong> Attach additional responsibilities to an object dynamically by placing it inside special wrapper objects.&lt;/p>
&lt;p>&lt;strong>Example:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Component interface&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">Coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">getDescription&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">double&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">cost&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Concrete component&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">SimpleCoffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">getDescription&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Simple coffee&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">double&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">cost&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Decorator abstract class&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">abstract&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">CoffeeDecorator&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">protected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">decoratedCoffee&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">CoffeeDecorator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">decoratedCoffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">getDescription&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">decoratedCoffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getDescription&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">double&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">cost&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">decoratedCoffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">cost&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Concrete decorators&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">MilkDecorator&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">extends&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CoffeeDecorator&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">MilkDecorator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">getDescription&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">decoratedCoffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getDescription&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;, milk&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">double&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">cost&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">decoratedCoffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">cost&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">5&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">SugarDecorator&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">extends&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CoffeeDecorator&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">SugarDecorator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">getDescription&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">decoratedCoffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getDescription&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;, sugar&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">double&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">cost&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">decoratedCoffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">cost&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">2&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Usage&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SimpleCoffee&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getDescription&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;: $&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">cost&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MilkDecorator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getDescription&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;: $&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">cost&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SugarDecorator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getDescription&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;: $&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">cost&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>When to Use It:&lt;/strong> When you need to add responsibilities to objects dynamically and transparently, without affecting other objects.&lt;/p>
&lt;p>&lt;strong>When to Avoid It:&lt;/strong> When the component hierarchy becomes too complex with many layers of decorators.&lt;/p>
&lt;h2 id="design-patterns-and-code-quality">Design Patterns and Code Quality
&lt;/h2>&lt;p>Beyond solving specific problems, design patterns contribute to overall code quality in several ways:&lt;/p>
&lt;h3 id="they-promote-the-solid-principles">They Promote the SOLID Principles
&lt;/h3>&lt;p>Many design patterns naturally align with the SOLID principles of object-oriented design:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Single Responsibility Principle:&lt;/strong> Patterns like Decorator and Strategy help separate different responsibilities.&lt;/li>
&lt;li>&lt;strong>Open/Closed Principle:&lt;/strong> Patterns like Factory Method allow for extension without modification.&lt;/li>
&lt;li>&lt;strong>Liskov Substitution Principle:&lt;/strong> Patterns ensure that subclasses can be used in place of their parent classes.&lt;/li>
&lt;li>&lt;strong>Interface Segregation Principle:&lt;/strong> Patterns like Adapter help create focused interfaces.&lt;/li>
&lt;li>&lt;strong>Dependency Inversion Principle:&lt;/strong> Patterns like Dependency Injection promote depending on abstractions.&lt;/li>
&lt;/ul>
&lt;h3 id="they-reduce-code-duplication">They Reduce Code Duplication
&lt;/h3>&lt;p>By providing standard solutions to common problems, patterns help avoid reinventing solutions, reducing duplicated code across projects.&lt;/p>
&lt;h3 id="they-improve-code-maintainability">They Improve Code Maintainability
&lt;/h3>&lt;p>Well-implemented patterns make code more modular and easier to understand, which simplifies maintenance and updates.&lt;/p>
&lt;h2 id="the-journey-from-pattern-user-to-pattern-creator">The Journey From Pattern User to Pattern Creator
&lt;/h2>&lt;p>As you grow as a developer, your relationship with design patterns will evolve:&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Pattern Recognizer:&lt;/strong> First, you&amp;rsquo;ll learn to identify when existing patterns apply to your problems.&lt;/li>
&lt;li>&lt;strong>Pattern Implementer:&lt;/strong> Then, you&amp;rsquo;ll become comfortable implementing standard patterns in your code.&lt;/li>
&lt;li>&lt;strong>Pattern Adapter:&lt;/strong> Next, you&amp;rsquo;ll adapt patterns to fit your specific needs, combining and modifying them as necessary.&lt;/li>
&lt;li>&lt;strong>Pattern Creator:&lt;/strong> Eventually, you might even develop your own patterns to address unique challenges in your domain.&lt;/li>
&lt;/ol>
&lt;h2 id="patterns-as-a-growth-investment">Patterns as a Growth Investment
&lt;/h2>&lt;p>Learning design patterns is one of the best investments you can make in your development career. They provide immediate benefits in code quality and long-term benefits in thinking about software architecture.&lt;/p>
&lt;p>Start small, focus on understanding the problems each pattern solves, and gradually incorporate them into your projects. Over time, you&amp;rsquo;ll find yourself naturally reaching for the right pattern when faced with a familiar challenge.&lt;/p>
&lt;p>Remember, the goal isn&amp;rsquo;t to use patterns for their own sake, but to solve problems efficiently and create maintainable code. When used appropriately, design patterns become powerful tools that elevate your work from merely functional to truly professional.&lt;/p>
&lt;p>Happy pattern hunting!&lt;/p>
&lt;h2 id="additional-resources-for-learning-design-patterns">Additional Resources for Learning Design Patterns
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Books:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&amp;ldquo;Head First Design Patterns&amp;rdquo; by Eric Freeman and Elisabeth Robson (beginner-friendly)&lt;/li>
&lt;li>&amp;ldquo;Design Patterns Explained&amp;rdquo; by Alan Shalloway and James Trott&lt;/li>
&lt;li>The original &amp;ldquo;Design Patterns&amp;rdquo; by the Gang of Four (more advanced)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Online Resources:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://Refactoring.Guru" target="_blank" rel="noopener"
>Refactoring.Guru&lt;/a> (visual explanations with examples in multiple languages)&lt;/li>
&lt;li>&lt;a class="link" href="http://SourceMaking.com" target="_blank" rel="noopener"
>SourceMaking.com&lt;/a> (pattern descriptions with real-world examples)&lt;/li>
&lt;li>Design Patterns in the Java Tutorials (Oracle&amp;rsquo;s official examples)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Practice Projects:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Try implementing a simple text editor with undo/redo using the Command pattern&lt;/li>
&lt;li>Build a notification system using the Observer pattern&lt;/li>
&lt;li>Create a document converter that can output different formats using the Strategy pattern&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Refactor a tightly coupled codebase by following SOLID Principles</title><link>https://blog.sparker0i.me/refactor-a-tightly-coupled-codebase-by-following-solid-principles/</link><pubDate>Tue, 06 Aug 2024 22:01:48 +0000</pubDate><guid>https://blog.sparker0i.me/refactor-a-tightly-coupled-codebase-by-following-solid-principles/</guid><description>&lt;img src="https://blog.sparker0i.me/refactor-a-tightly-coupled-codebase-by-following-solid-principles/66b29d4c63629cc69724f054.png" alt="Featured image of post Refactor a tightly coupled codebase by following SOLID Principles" />&lt;p>We&amp;rsquo;ve been developing an AI-enabled data engineering product at our company, using Scala as the core programming language. We also utilize Scala-related frameworks like Spark and Play to power various components. Recently, we conducted a vulnerability scan on our applications and discovered numerous security issues. The root cause was that we hadn&amp;rsquo;t updated our libraries in over three years.&lt;/p>
&lt;p>During this period, Scala underwent a major release and introduced its first Long-Term Support (LTS) version. Alongside these updates, our codebase had accumulated significant technical debt, providing us with an opportunity to address longstanding inefficiencies.&lt;/p>
&lt;h2 id="background">Background
&lt;/h2>&lt;p>We had been using the &lt;a class="link" href="https://github.com/scalaj/scalaj-http" target="_blank" rel="noopener"
>&lt;code>scalaj-http&lt;/code>&lt;/a> library for making HTTP calls in Scala. However, this library had reached its end-of-life (EOL) status over two years ago and was no longer receiving updates.&lt;/p>
&lt;p>This is a small snippet of our class which defines the methods making HTTP calls:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="n">makePostCall&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">body&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">authToken&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="kt">Int&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">JsValue&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;url: &amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;body: &amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">res&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Http&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Content-Type&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;application/json&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Authorization&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">s&amp;#34;Bearer &lt;/span>&lt;span class="si">$authToken&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Charset&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">option&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">HttpOptions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">readTimeout&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">100000000&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">option&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">HttpOptions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">connTimeout&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">100000000&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">postData&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">asString&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">code&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">response&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">parse&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="n">makeGetCall&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">authToken&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="kt">Int&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">JsValue&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;url: &amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">res&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Http&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Content-Type&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;application/json&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Authorization&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">s&amp;#34;Bearer &lt;/span>&lt;span class="si">$authToken&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Charset&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">option&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">HttpOptions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">readTimeout&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">100000000&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">option&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">HttpOptions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">connTimeout&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">100000000&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">asString&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">code&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">response&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">parse&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// More methods for more HTTP types.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>With our existing code base, there was no scope of any modification. It had a lot of limitations:&lt;/p>
&lt;ol>
&lt;li>HTTP call functions were hardcoded.&lt;/li>
&lt;li>Headers were not modifiable&lt;/li>
&lt;li>Authentication was limited to Bearer tokens&lt;/li>
&lt;li>The request body format was restricted to JSON&lt;/li>
&lt;li>HTTP methods could not be easily altered.&lt;/li>
&lt;/ol>
&lt;p>These limitations affected not only our HTTP class but also other classes that relied on it. With the EOL of &lt;code>scalaj-http&lt;/code>, we needed to refactor our codebase significantly.&lt;/p>
&lt;h2 id="inspiration">Inspiration
&lt;/h2>&lt;p>&lt;img src="https://blog.sparker0i.me/refactor-a-tightly-coupled-codebase-by-following-solid-principles/66b29d4c63629cc69724f054_f2e3b482-7e1b-45d3-a23e-4986ed15fcc6.jpeg"
width="3014"
height="1350"
srcset="https://blog.sparker0i.me/refactor-a-tightly-coupled-codebase-by-following-solid-principles/66b29d4c63629cc69724f054_f2e3b482-7e1b-45d3-a23e-4986ed15fcc6_hu_c67e156663a53662.jpeg 480w, https://blog.sparker0i.me/refactor-a-tightly-coupled-codebase-by-following-solid-principles/66b29d4c63629cc69724f054_f2e3b482-7e1b-45d3-a23e-4986ed15fcc6_hu_5cb423a2699cd6d6.jpeg 1024w"
loading="lazy"
alt="A sample REST API Client"
class="gallery-image"
data-flex-grow="223"
data-flex-basis="535px"
>&lt;/p>
&lt;p>Many software developers and testers use REST API clients to test API endpoints. Various REST API clients exist, and the one you see above is Bruno - One of the only REST clients that meet my org&amp;rsquo;s stringent IT Security Standards.&lt;/p>
&lt;p>The flexibility of API clients - allowing for different HTTP methods, body types, and authentication mechanisms - is crucial. This adaptability is possible because these clients are not hardcoded, unlike our previous implementation. Therefore, in our refactoring, we aimed to make our code modular and adhere to known design patterns and SOLID principles.&lt;/p>
&lt;h2 id="breakdown">Breakdown
&lt;/h2>&lt;p>In our previous implementation, constructing the HTTP request and making the call were done within a single file. This approach meant that any modification required changes across multiple classes, leading to tight coupling.&lt;/p>
&lt;p>To resolve this, we decided to separate our API package into three subpackages:&lt;/p>
&lt;ol>
&lt;li>&lt;code>request&lt;/code>&lt;/li>
&lt;li>&lt;code>client&lt;/code>&lt;/li>
&lt;li>&lt;code>apps&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>The &lt;code>request&lt;/code> and &lt;code>client&lt;/code> components are designed to be loosely coupled. This separation ensures that changes in one part, such as switching to a different client library, require minimal modifications elsewhere in the code. Ideally, only a single line should need updating to change the client library used throughout the program. Classes inside &lt;code>apps&lt;/code> would use the client to execute business processes by making the HTTP calls.&lt;/p>
&lt;h2 id="request-package">Request Package
&lt;/h2>&lt;p>To construct an HTTP request, there are five fundamental components:&lt;/p>
&lt;ol>
&lt;li>URL&lt;/li>
&lt;li>Headers&lt;/li>
&lt;li>HTTP Method&lt;/li>
&lt;li>Body&lt;/li>
&lt;li>Authentication&lt;/li>
&lt;/ol>
&lt;p>It&amp;rsquo;s a widely accepted convention that the URL is a &lt;code>String&lt;/code>, while headers are represented as a &lt;code>HashMap&lt;/code> with &lt;code>String&lt;/code> keys and values.&lt;/p>
&lt;p>The elements that can vary between HTTP requests are the Method, Body, and Authentication.&lt;/p>
&lt;h3 id="method">Method
&lt;/h3>&lt;p>In this initial implementation of the Request package, I&amp;rsquo;ve chosen to support the most commonly used HTTP methods:&lt;/p>
&lt;ol>
&lt;li>GET&lt;/li>
&lt;li>POST&lt;/li>
&lt;li>PUT&lt;/li>
&lt;li>DELETE&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">trait&lt;/span> &lt;span class="nc">ApiMethod&lt;/span> &lt;span class="c1">// trait is the equivalent for interface in OOP langugaes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">object&lt;/span> &lt;span class="nc">DELETE&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiMethod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">object&lt;/span> &lt;span class="nc">GET&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiMethod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">object&lt;/span> &lt;span class="nc">POST&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiMethod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">object&lt;/span> &lt;span class="nc">PUT&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiMethod&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>To implement these, I use a Scala-specific paradigm called &lt;a class="link" href="https://docs.scala-lang.org/overviews/scala-book/case-objects.html" target="_blank" rel="noopener"
>&lt;code>Case Object&lt;/code>&lt;/a>, which aligns with the &lt;a class="link" href="https://sourcemaking.com/design_patterns/singleton" target="_blank" rel="noopener"
>Singleton design pattern&lt;/a>. This approach is similar to enums in other programming languages.&lt;/p>
&lt;h3 id="body">Body
&lt;/h3>&lt;p>For the body of HTTP requests, I will support four types:&lt;/p>
&lt;ol>
&lt;li>JSON&lt;/li>
&lt;li>XML&lt;/li>
&lt;li>Binary&lt;/li>
&lt;li>FormURLEncoded&lt;/li>
&lt;/ol>
&lt;p>To manage these, I created an interface (&lt;code>ApiBody&lt;/code>) that specifies two methods: &lt;code>contentType&lt;/code> and &lt;code>content&lt;/code>. Each respective class will have a default constructor that includes a variable representing the content we intend to send.&lt;/p>
&lt;p>The &lt;code>contentType&lt;/code> method will return the MIME type, such as &lt;code>application/json&lt;/code> or &lt;code>application/xml&lt;/code>. The &lt;code>content&lt;/code> method will convert the body content into a byte array. The choice of a byte array is deliberate; while JSON and XML content can often be represented as a string, binary data cannot. By converting all types into a byte array, we provide a consistent interface for later client implementations.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">trait&lt;/span> &lt;span class="nc">ApiBody&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">contentType&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">JsonBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiBody&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">contentType&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;application/json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getBytes&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">XmlBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">xml&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiBody&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">contentType&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;application/xml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">xml&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getBytes&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">FormUrlEncodedBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">formData&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Map&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">String&lt;/span>, &lt;span class="kt">String&lt;/span>&lt;span class="o">])&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiBody&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">contentType&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;application/x-www-form-urlencoded&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">formData&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">e&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nc">URLEncoder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">encode&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_1&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nc">URLEncoder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">encode&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_2&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">mkString&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;&amp;amp;&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">getBytes&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">BinaryBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">])&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiBody&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">contentType&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;application/octet-stream&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="authentication">Authentication
&lt;/h3>&lt;p>We will implement two common types of authentication:&lt;/p>
&lt;ol>
&lt;li>Token based authentication&lt;/li>
&lt;li>Basic authentication (user/password)&lt;/li>
&lt;/ol>
&lt;p>The plan was to use the same approach as with Body and Method, by defining an interface and corresponding classes. However, there’s a challenge: different client libraries may handle authentication in unique ways. Since the Request package must remain unaware of the Client package&amp;rsquo;s specifics, a direct implementation isn’t feasible.&lt;/p>
&lt;p>One potential solution is to use headers since they can be represented as a key-value map. This method works for basic and token-based authentication but fails for more complex mechanisms, such as GitHub API or AWS S3 SDK with v4 signature. These mechanisms often require access to the request body to generate appropriate headers.&lt;/p>
&lt;p>In my implementation, I have kept Body and Authentication separate, and I intend to maintain that separation. The solution involves creating an interface and corresponding classes for authentication types, along with a wrapper that encapsulates all authentication mechanisms. This wrapper will then be implemented by the Client to execute the HTTP call.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">trait&lt;/span> &lt;span class="nc">AuthRequestProvider&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">addBearerToken&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Unit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">addBasicAuth&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Unit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">trait&lt;/span> &lt;span class="nc">ApiAuth&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">applyTo&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">AuthRequestProvider&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Unit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">BasicAuth&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiAuth&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">applyTo&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">AuthRequestProvider&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Unit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">addBasicAuth&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">TokenAuth&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiAuth&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">applyTo&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">AuthRequestProvider&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Unit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">addBearerToken&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>The implementation of the &lt;code>AuthRequestProvider&lt;/code> in the Client package will be discussed in a subsequent section.&lt;/p>
&lt;h3 id="api-request">API Request
&lt;/h3>&lt;p>With the basics of building an HTTP Request covered, the next step is to create a class representing our &lt;code>ApiRequest&lt;/code>. This class will be used by the client to execute the actual HTTP call.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">protected&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">api&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">ApiRequest&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">method&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiMethod&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">url&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">body&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Option&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">ApiBody&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">None&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">headers&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Map&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">String&lt;/span>, &lt;span class="kt">String&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Map&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">empty&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">authentication&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Option&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">ApiAuth&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>In this class, the &lt;code>Method&lt;/code> and &lt;code>URL&lt;/code> are mandatory components for making an HTTP call. While headers are optional, they are represented using a &lt;code>Map&lt;/code> data type, so no dedicated class is necessary. The &lt;code>Body&lt;/code> and &lt;code>Authentication&lt;/code> components are also optional and are encapsulated using the &lt;a class="link" href="https://docs.scala-lang.org/overviews/collections-2.13/conversion-between-option-and-the-collections.html#inner-main" target="_blank" rel="noopener"
>&lt;code>Option&lt;/code> wrapper&lt;/a>. If a component is absent, it will be represented as &lt;code>None&lt;/code>; if present, it will be enclosed within a &lt;code>Some&lt;/code> object.&lt;/p>
&lt;p>The &lt;code>protected[api]&lt;/code> modifier on the case class restricts its instantiation to within the &lt;code>api&lt;/code> package, which includes both the request and client sub-packages. This ensures that downstream classes cannot create substandard &lt;code>ApiRequest&lt;/code> instances, maintaining the integrity of our API implementation.&lt;/p>
&lt;h3 id="api-request-builder">API Request Builder
&lt;/h3>&lt;p>Downstream classes should use the &lt;code>ApiRequestBuilder&lt;/code> to create an &lt;code>ApiRequest&lt;/code> object, which they can then pass to the client for making the HTTP call. This implementation follows the &lt;a class="link" href="https://sourcemaking.com/design_patterns/builder" target="_blank" rel="noopener"
>Builder design pattern&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">ApiRequestBuilder&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">private&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Option&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">ApiMethod&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">GET&lt;/span>&lt;span class="o">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">private&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="n">url&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">private&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="n">body&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Option&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">ApiBody&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">None&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">private&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="n">headers&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Map&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">String&lt;/span>, &lt;span class="kt">String&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Map&lt;/span>&lt;span class="o">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">private&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="n">authentication&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Option&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">ApiAuth&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">withMethod&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiMethod&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiRequestBuilder&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">copy&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">method&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">withUrl&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiRequestBuilder&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">copy&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">url&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">url&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">withBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiBody&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiRequestBuilder&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">copy&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">body&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">withHeaders&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Map&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">String&lt;/span>, &lt;span class="kt">String&lt;/span>&lt;span class="o">])&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiRequestBuilder&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">copy&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">headers&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">headers&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">addHeader&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiRequestBuilder&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">copy&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">headers&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">headers&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">key&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">withAuthentication&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiAuth&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiRequestBuilder&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">copy&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">authentication&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">()&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiRequest&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isEmpty&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isEmpty&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">IllegalStateException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Method and URL cannot be empty&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">ApiRequest&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">url&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">body&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">headers&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">authentication&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>The usage is straightforward: methods like &lt;code>withUrl&lt;/code>, &lt;code>withHeaders&lt;/code> and others allow you to configure your request. The &lt;code>build()&lt;/code> method then produces the &lt;code>ApiRequest&lt;/code> object, which can be passed to the client from downstream classes.&lt;/p>
&lt;h3 id="api-response">API Response
&lt;/h3>&lt;p>When an HTTP request is made, a response is received, which can influence decisions within the application. The &lt;code>APIResponse&lt;/code> case class encapsulates this response, including the HTTP response code, response body, and response headers.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">ApiResponse&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">body&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiBody&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">headers&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Map&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">String&lt;/span>, &lt;span class="kt">String&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Map&lt;/span>&lt;span class="o">())&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>For the response body, we utilize the same &lt;code>ApiBody&lt;/code> interface as for the request body, maintaining consistency across request and response handling.&lt;/p>
&lt;h2 id="client">Client
&lt;/h2>&lt;p>With our Request package established, we now focus on the client responsible for making the actual HTTP call. The client will be defined as an interface with a single method, &lt;code>send&lt;/code>, which accepts an instance of &lt;code>ApiRequest&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">trait&lt;/span> &lt;span class="nc">ApiClient&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">send&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiRequest&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Either&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">ApiResponse&lt;/span>, &lt;span class="kt">ApiResponse&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="client-library">Client Library
&lt;/h3>&lt;p>For our client implementation, we use the Scala &lt;a class="link" href="https://github.com/softwaremill/sttp" target="_blank" rel="noopener"
>STTP&lt;/a> library, which will consume &lt;code>ApiRequest&lt;/code> and generate an &lt;code>ApiResponse&lt;/code>. Before implementing the client, we need to address two key components:&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Authentication Wrapper&lt;/strong>: An implementation to handle various authentication mechanisms.&lt;/li>
&lt;li>&lt;strong>Body Parser&lt;/strong>: To convert the response body into an appropriate &lt;code>ApiBody&lt;/code> implementation.&lt;/li>
&lt;/ol>
&lt;h3 id="authentication-wrapper">Authentication Wrapper
&lt;/h3>&lt;p>The authentication wrapper for the STTP library will accept an STTP &lt;code>Request&lt;/code> as a constructor argument and provide the necessary authentication logic.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">SttpRequestProviderWrapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">var&lt;/span> &lt;span class="n">request&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">sttp.client4.Request&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Either&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">String&lt;/span>, &lt;span class="kt">String&lt;/span>&lt;span class="o">]])&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">AuthRequestProvider&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">addBearerToken&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Unit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">request&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bearer&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">addBasicAuth&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Unit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">request&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">basic&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>This wrapper can be extended to support additional authentication mechanisms as needed. The request (&lt;code>sttp.client4.Request[Either[String, String]]&lt;/code>) will include the request body, allowing the wrapper to generate custom HTTP headers based on the body content.&lt;/p>
&lt;h3 id="body-parser">Body Parser
&lt;/h3>&lt;p>To transform the response body into one of our &lt;code>ApiBody&lt;/code> implementations, we create a &lt;code>BodyParser&lt;/code> interface. This interface will take the response content and headers, returning the appropriate body type.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">trait&lt;/span> &lt;span class="nc">BodyParser&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">parseBody&lt;/span>&lt;span class="o">()&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiBody&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">BinaryParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">],&lt;/span> &lt;span class="n">contentType&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">String&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">BodyParser&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">parseBody&lt;/span>&lt;span class="o">()&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiBody&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nc">BinaryBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">contentType&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">JsonParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">])&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">BodyParser&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">parseBody&lt;/span>&lt;span class="o">()&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiBody&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nc">JsonBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nc">String&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">XmlParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">])&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">BodyParser&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">parseBody&lt;/span>&lt;span class="o">()&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiBody&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nc">XmlBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nc">String&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">StringParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">])&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">BodyParser&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">parseBody&lt;/span>&lt;span class="o">()&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiBody&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nc">StringBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nc">String&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">FormUrlEncodedParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">])&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">BodyParser&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">parseBody&lt;/span>&lt;span class="o">()&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiBody&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">decodedContent&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">String&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">formData&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">decodedContent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;&amp;amp;&amp;#34;&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">map&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="n">pair&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="nc">Array&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">pair&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;=&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nc">URLDecoder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">decode&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nc">URLDecoder&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">decode&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}.&lt;/span>&lt;span class="n">toMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">FormUrlEncodedBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">formData&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>A &lt;a class="link" href="https://sourcemaking.com/design_patterns/factory_method" target="_blank" rel="noopener"
>Factory design pattern&lt;/a> will be used to instantiate the appropriate &lt;code>BodyParser&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">object&lt;/span> &lt;span class="nc">BodyParser&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">getParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Array&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Byte&lt;/span>&lt;span class="o">],&lt;/span> &lt;span class="n">headers&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Map&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">String&lt;/span>, &lt;span class="kt">String&lt;/span>&lt;span class="o">])&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Option&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">BodyParser&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">headers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;content-type&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">match&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="k">match&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;application/json&amp;#34;&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">JsonParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;application/xml&amp;#34;&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">XmlParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;application/x-www-form-urlencoded&amp;#34;&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">FormUrlEncodedParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="k">_&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">BinaryParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nc">None&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="nc">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="client-implementation">Client Implementation
&lt;/h3>&lt;p>With the building blocks in place, we implement the client. The client will use the &lt;code>ApiRequest&lt;/code> properties (method, URL, headers) to construct the initial request, apply the body if present, and then handle authentication if required.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">protected&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">api&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">SttpClient&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nc">ApiClient&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">private&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="n">backend&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">HttpURLConnectionBackend&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">send&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">ApiRequest&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Either&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">ApiResponse&lt;/span>, &lt;span class="kt">ApiResponse&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">new&lt;/span> &lt;span class="nc">URI&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">toURL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">catch&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">URISyntaxException&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nc">Left&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">ApiResponse&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">JsonBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ujson&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nc">Obj&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getMessage&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">toString&lt;/span>&lt;span class="o">())),&lt;/span> &lt;span class="nc">Map&lt;/span>&lt;span class="o">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">IllegalArgumentException&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nc">Left&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">ApiResponse&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">JsonBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ujson&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nc">Obj&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getMessage&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">toString&lt;/span>&lt;span class="o">())),&lt;/span> &lt;span class="nc">Map&lt;/span>&lt;span class="o">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">sttpRequest&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">sttp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">client4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">basicRequest&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sttp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nc">Method&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">toString&lt;/span>&lt;span class="o">),&lt;/span> &lt;span class="n">uri&lt;/span>&lt;span class="s">&amp;#34;${request.url}&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">foreach&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="k">case&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sttpRequest&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">sttpRequest&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">foreach&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="n">body&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sttpRequest&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">sttpRequest&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">contentType&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">contentType&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">authRequest&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">SttpRequestProviderWrapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sttpRequest&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authentication&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">foreach&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">_&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">applyTo&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">authRequest&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sttpRequest&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">authRequest&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">request&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">response&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">sttpRequest&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">asByteArray&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">backend&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">headers&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="n">h&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">h&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">toMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">responseEntity&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">ApiResponse&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">body&lt;/span> &lt;span class="k">match&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nc">Left&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="nc">BodyParser&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getBytes&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span> &lt;span class="n">headers&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">match&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">parseBody&lt;/span>&lt;span class="o">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nc">None&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="nc">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nc">Right&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span> &lt;span class="nc">Some&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">BodyParser&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getParser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">headers&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">parseBody&lt;/span>&lt;span class="o">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">headers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isClientError&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isServerError&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="nc">Left&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">responseEntity&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="nc">Right&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">responseEntity&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ensure-stability-of-api-package">Ensure stability of API package
&lt;/h2>&lt;p>A primary motivation for this rewrite is to minimize the impact of a library going end-of-life (EOL) in the future. If the STTP library becomes unsupported, we should only need to make a single line change in our code, ensuring the rest of the classes remain unaffected.&lt;/p>
&lt;p>In the &lt;code>SttpClient&lt;/code> implementation, the access modifier is set to &lt;code>protected[api]&lt;/code>. This restricts access to within the &lt;code>api&lt;/code> package, preventing direct usage outside. To facilitate client access, we define an &lt;code>ApiClient&lt;/code> object in the same file as the &lt;code>ApiClient&lt;/code> trait. This object includes an &lt;code>apply()&lt;/code> method that creates a new instance of &lt;code>SttpClient&lt;/code>, leveraging its position within the &lt;code>api&lt;/code> subpackage.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">object&lt;/span> &lt;span class="nc">ApiClient&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">apply&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">SttpClient&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>In the event that the STTP library goes EOL, we would need to:&lt;/p>
&lt;ol>
&lt;li>Implement a new authentication wrapper for the replacement library.&lt;/li>
&lt;li>Implement the new library&amp;rsquo;s client (similar to &lt;code>SttpClient&lt;/code>).&lt;/li>
&lt;li>Update the &lt;code>apply()&lt;/code> method in &lt;code>ApiClient&lt;/code> to return an instance of the new client. This single-line change ensures that no other classes are impacted by the transition.&lt;/li>
&lt;/ol>
&lt;h2 id="using-the-client">Using the client
&lt;/h2>&lt;p>With the foundational components in place, we can now use the &lt;code>ApiClient&lt;/code> to make an HTTP call. Here&amp;rsquo;s an example of how to perform an API call using the implemented code:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">request&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">ApiRequestBuilder&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">withUrl&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">withMethod&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">POST&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="c1">// Refers to the case object POST created above
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">withAuthentication&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">TokenAuth&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">withBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">JsonBody&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&amp;#34;{&amp;#34;key&amp;#34;:&amp;#34;value&amp;#34;}&amp;#34;&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nc">ApiClient&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">match&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nc">Left&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">Exception&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nc">Right&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">ApiResponse&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">_&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">body&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="k">_&lt;/span>&lt;span class="o">))&lt;/span> &lt;span class="k">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;API Call successful&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Note the use of &lt;code>ApiClient()&lt;/code> to initiate the HTTP call. In Scala, &lt;code>ApiClient()&lt;/code> is syntactic sugar that the compiler interprets as a call to the &lt;code>ApiClient.apply()&lt;/code> method.&lt;/p>
&lt;h2 id="adherence-to-solid-principles">Adherence to SOLID Principles
&lt;/h2>&lt;p>&lt;a class="link" href="https://en.wikipedia.org/wiki/SOLID" target="_blank" rel="noopener"
>SOLID&lt;/a> is a set of five principles of Object-Oriented class design. They are a set of rules and best practices to follow while designing a class structure. These five principles help us understand the need for certain design patterns and software architecture in general. I always strive to adhere to these principles whenever I&amp;rsquo;m developing software, and we will now have a look at how the code above adheres to the SOLID Principles.&lt;/p>
&lt;h3 id="single-responsibility-principle-srp">&lt;strong>S&lt;/strong>ingle Responsibility Principle (SRP)
&lt;/h3>&lt;p>A class should have one, and only one, reason to change. This principle promotes the separation of concerns within a system:&lt;/p>
&lt;ul>
&lt;li>Our &lt;code>HttpRequestBuilder&lt;/code> is solely responsible for building &lt;code>HttpRequest&lt;/code> objects. It encapsulates the construction logic and provides an interface for setting request properties.&lt;/li>
&lt;li>The &lt;code>BodyParser&lt;/code> isolates the logic for parsing different types of response bodies based on the content type, keeping this concern separate from other parts of the system&lt;/li>
&lt;li>Our &lt;code>SttpClient&lt;/code> implementation handles the responsibility of sending HTTP requests and processing responses. It doesn&amp;rsquo;t concern itself with the construction of requests or parsing of response bodies, which are handled by other classes.&lt;/li>
&lt;li>&lt;code>ApiResponse&lt;/code> encapsulates the response data, separating it from the request logic and the client implementation.&lt;/li>
&lt;li>&lt;code>ApiAuth&lt;/code> and its various subclasses have a single responsibility to apply a specific authentication mechanism.&lt;/li>
&lt;/ul>
&lt;h3 id="openclosed-principle-ocp">&lt;strong>O&lt;/strong>pen/Closed Principle (OCP)
&lt;/h3>&lt;p>Software entities should be open for extension but closed for modification. This means you can extend the behavior of a class without modifying its source code:&lt;/p>
&lt;ul>
&lt;li>The &lt;code>Body&lt;/code> trait and its subclasses allow for easy addition of new body types without altering existing code. For example, adding a new &lt;code>CsvBody&lt;/code> would involve creating a new case class that extends &lt;code>Body&lt;/code>.&lt;/li>
&lt;li>New implementations of &lt;code>ApiClient&lt;/code> can be created (e.g., &lt;code>JavaApiClient&lt;/code>, &lt;code>Http4sApiClient&lt;/code>) without modifying the existing &lt;code>SttpClient&lt;/code>. Each new client implementation can provide its own logic for sending requests.&lt;/li>
&lt;li>New authentication methods can be added by creating new classes that implement the &lt;code>Authentication&lt;/code> trait.&lt;/li>
&lt;/ul>
&lt;h3 id="liskov-substitution-principle-lsp">&lt;strong>L&lt;/strong>iskov Substitution Principle (LSP)
&lt;/h3>&lt;p>Objects of a superclass should be replaceable with objects of a subclass without affecting the correctness of the program:&lt;/p>
&lt;ul>
&lt;li>Anywhere a &lt;code>Body&lt;/code> is expected, any of its subclasses (&lt;code>JsonBody&lt;/code>, &lt;code>XmlBody&lt;/code>, etc.) can be used interchangeably.&lt;/li>
&lt;li>The system can use &lt;code>TokenAuthentication&lt;/code> or &lt;code>BasicAuthentication&lt;/code> interchangeably wherever &lt;code>Authentication&lt;/code> is expected, ensuring the &lt;code>applyTo&lt;/code> method works correctly for any subclass.&lt;/li>
&lt;/ul>
&lt;h3 id="interface-segregation-principle-isp">&lt;strong>I&lt;/strong>nterface Segregation Principle (ISP)
&lt;/h3>&lt;p>No client should be forced to depend on methods it does not use. This principle advocates for smaller, more specific interfaces:&lt;/p>
&lt;ul>
&lt;li>&lt;code>ApiAuth&lt;/code> &lt;strong>Interface&lt;/strong>: This interface is specifically for adding authentication to a request and does not include other unrelated methods. It ensures that only relevant methods are exposed to classes that implement this interface.&lt;/li>
&lt;li>&lt;code>ApiClient&lt;/code> &lt;strong>Interface&lt;/strong>: Defines a minimal interface for sending HTTP requests. It does not force implementing classes to expose unnecessary methods.&lt;/li>
&lt;/ul>
&lt;h3 id="dependency-inversion-principle-dip">&lt;strong>D&lt;/strong>ependency Inversion Principle (DIP)
&lt;/h3>&lt;p>High-level modules should not depend on low-level modules. Both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions:&lt;/p>
&lt;ul>
&lt;li>&lt;code>ApiClient&lt;/code> &lt;strong>Interface&lt;/strong>: The high-level code (such as a service using the HTTP client) depends on the &lt;code>ApiClient&lt;/code> abstraction, not on specific implementations like &lt;code>SttpClient&lt;/code>.&lt;/li>
&lt;li>&lt;strong>Dependency on Abstractions&lt;/strong>: The system uses the &lt;code>ApiAuth&lt;/code>, &lt;code>ApiBody&lt;/code>, and &lt;code>ApiClient&lt;/code> abstractions rather than concrete implementations, making it easy to swap out implementations as needed.&lt;/li>
&lt;/ul>
&lt;h2 id="conclusion">Conclusion
&lt;/h2>&lt;p>The goal was to modernize our HTTP client classes, moving from a rigid, outdated pieces to a flexible, modular architecture. By focusing on a clean separation of concerns and employing design patterns like Builder, Factory and Singleton, we created a robust framework that enhances maintainability and scalability.&lt;/p>
&lt;p>Key features include a modular request builder, an extensible authentication wrapper, and a consistent handling of API responses. The new design ensures easy adaptability to future changes, such as switching out libraries or updating security protocols, with minimal impact on the overall system.&lt;/p>
&lt;p>This streamlined, adaptable architecture not only addresses previous limitations but also positions our product for future growth and technological advancements.&lt;/p>
&lt;p>Code used inside this post is also available inside my &lt;a class="link" href="https://github.com/Sparker0i/API-Scala-with-SOLID-Principles" target="_blank" rel="noopener"
>GitHub repo&lt;/a>.&lt;/p></description></item><item><title>How to use Devcontainers to create apps with x86 architecture on an Apple Silicon Mac</title><link>https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/</link><pubDate>Tue, 09 Apr 2024 15:51:58 +0000</pubDate><guid>https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/</guid><description>&lt;img src="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf.png" alt="Featured image of post How to use Devcontainers to create apps with x86 architecture on an Apple Silicon Mac" />&lt;p>&lt;em>UPDATE 25th June 2024: Modified the article to include podman alongside colima.&lt;/em>&lt;/p>
&lt;p>Apps are a significant part of our lives today. There are various apps you might be using today. On a smartphone, you would be using WhatsApp, Snapchat, Instagram, YouTube and various other apps. On a PC/laptop, you would be using a browser, game launchers to start your favorite games and IDEs to develop applications.&lt;/p>
&lt;p>Many websites you know and love are apps themselves. As an example, the Facebook website is written using the React framework and packaged as a Web application to run in a browser. YouTube and various other websites by Google are written in the Angular framework and packaged as web apps too.&lt;/p>
&lt;p>To develop any kind of major applications, you would need a PC or a laptop and an IDE installed. There are various kinds of IDEs available based on the programming language and the kind of application you are developing. You would also need various libraries to create your application - lest write the code yourself. Which leads to the problem I&amp;rsquo;ll be tackling in today&amp;rsquo;s post.&lt;/p>
&lt;h2 id="background">Background
&lt;/h2>&lt;p>PCs and laptops sold today run on x86 architecture CPUs made by Intel and AMD. However in recent times, we have started to see a lot of laptops being sold with the CPUs using ARM architecture, which until recently was found only in mobile phones. Not only are these CPUs way more battery efficient, they also allow to wake a laptop from sleep a lot quicker than x86 based laptops. Most notable ARM based laptops are manufactured by Apple, which use the Apple Silicon chips - M1, M2, M3 etc.&lt;/p>
&lt;p>Like I&amp;rsquo;ve explained before when you are looking to build an application, you&amp;rsquo;d need various libraries to write code. Most libraries in the various programming languages are universal, ie. they are compatible to run on the architecture of your machine&amp;rsquo;s CPU. However, there are some libraries which do not run (yet) on an ARM machine.&lt;/p>
&lt;p>The most notable culprit for this is the &lt;a class="link" href="https://www.npmjs.com/package/ibm_db?ref=localhost" target="_blank" rel="noopener"
>ibm_db&lt;/a> library on Node. If you try to install that package on your Apple Silicon mac, you will see this error:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_9da41139-2d53-4bff-aa5e-8708e6bf7632.jpeg"
width="2000"
height="212"
srcset="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_9da41139-2d53-4bff-aa5e-8708e6bf7632_hu_702f32f70657ac3d.jpeg 480w, https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_9da41139-2d53-4bff-aa5e-8708e6bf7632_hu_7545e4898176640b.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="943"
data-flex-basis="2264px"
>&lt;/p>
&lt;p>Error installing ibm_db directly on the Apple Silicon MacBook&lt;/p>
&lt;p>Yup, it suggests to install the x64 version of NodeJS and then use the package. I had so many other NodeJS applications on my machine without ibm_db which were working pretty well, so I did not want to install an inefficient version of NodeJS for my machine. But I also had to work on this important project on the M1 mac for my org. I was in a dilemma. Enter &lt;strong>devcontainers&lt;/strong>:&lt;/p>
&lt;h2 id="devcontainers">Devcontainers
&lt;/h2>&lt;p>From its website, A devcontainer allows you to use a container as a full-featured development environment. It can be used to run an application, to separate tools, libraries, or runtimes needed for working with a codebase, and to aid in continuous integration and testing.&lt;/p>
&lt;p>This is very similar to how Python&amp;rsquo;s venv (Virtual Environments) work. Usually, all Python developers need that to do any basic development. But one key difference with devcontainers is that it opens your project folder inside a Docker container, and then any packages you install in the devcontainer remains inside that and does not cross over to your host machine.&lt;/p>
&lt;p>While the devcontainer spec is Open source and available independently, Visual Studio Code provides an easy way (UI) of doing stuff with it. Using devcontainers, I&amp;rsquo;ll be trying to run my NodeJS app with the ibm_db dependency on my MacBook with Apple Silicon.&lt;/p>
&lt;h2 id="create-the-virtual-machine">Create the Virtual Machine
&lt;/h2>&lt;p>Docker - or for that matter any of the open source containerization software - cannot run as is on a machine without a Linux Kernel. You&amp;rsquo;ll need a Linux virtual machine that acts as the place where all your containers will be run. The simplest solution to do this is to create a VM using &lt;a class="link" href="https://github.com/abiosoft/colima?ref=localhost" target="_blank" rel="noopener"
>Colima&lt;/a> or &lt;a class="link" href="https://podman.io" target="_blank" rel="noopener"
>Podman&lt;/a>.&lt;/p>
&lt;p>Here is the command to create a machine using Colima:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">colima start --cpu &lt;span class="m">2&lt;/span> --memory &lt;span class="m">4&lt;/span> --disk &lt;span class="m">50&lt;/span> --arch aarch64 --vm-type&lt;span class="o">=&lt;/span>vz --mount-type&lt;span class="o">=&lt;/span>virtiofs --vz-rosetta --very-verbose
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>The CPU, Memory and Disk parameters should be very obvious here.&lt;/li>
&lt;li>&lt;code>--very-verbose&lt;/code> is to see more detailed logging while the VM starts. It is useful to debug if anything is going wrong or not.&lt;/li>
&lt;li>&lt;code>--arch aarch64&lt;/code> tells the Lima CLI to create the VM with the ARM64 architecture. You cannot directly create an x86 machine on an ARM MacBook just like that. The next two options will help enable what I want to do.&lt;/li>
&lt;li>&lt;code>--vm-type=vz&lt;/code> will use the new MacOS &lt;a class="link" href="https://developer.apple.com/documentation/virtualization?language=objc&amp;amp;ref=localhost" target="_blank" rel="noopener"
>Virtualization API&lt;/a> to create the VMs.&lt;/li>
&lt;li>&lt;code>--vz-rosetta&lt;/code> will use Rosetta translation layer when interacting with the VM.&lt;/li>
&lt;li>&lt;code>--mount-type=virtiofs&lt;/code> creates a VM with the virtiofs volume driver. This allows you to share files from your host machine inside the Container.&lt;/li>
&lt;/ul>
&lt;p>Using the VZ APIs along with the virtiofs mount enables better performance running the VM.&lt;/p>
&lt;p>As of Podman 5.1, Rosetta translation layer is supported by default. If you have been using Podman for your other projects but holding back to the emulation issues, you may start using it instead of colima. Here is the command to create and start a similar VM for Podman:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">podman machine init --cpus&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span> --memory&lt;span class="o">=&lt;/span>&lt;span class="m">2048&lt;/span> --disk-size&lt;span class="o">=&lt;/span>&lt;span class="m">50&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman machine start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>It doesn&amp;rsquo;t matter what option you choose, any further steps from hereon are independent of your choice of Containerization Framework.&lt;/p>
&lt;h2 id="create-base-image-for-the-container">Create base image for the Container
&lt;/h2>&lt;p>Devcontainer runs your code inside a Docker container. The basic principle of running a Docker Container requires you to have a base image on top of which any operations can be performed.&lt;/p>
&lt;p>In this case I want to develop a NodeJS app which utilizes the ibm_db library. So I will need a base image with NodeJS installed. Thankfully, Microsoft provides base Docker images that work well with devcontainers inside VS Code. I&amp;rsquo;ll be using a base image which comes with NodeJS 20 installed.&lt;/p>
&lt;p>To create the base image I will use in my application, I will need to SSH into the Virtual Machine using the command and then create the base image from there. If you try to create the base image from your host terminal, the image gets created with the ARM architecture, which is not helpful for us as we want the image with an x86 architecture.&lt;/p>
&lt;p>This is the &lt;code>Dockerfile&lt;/code> I will be using:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span>&lt;span class="s"> --platform=linux/amd64 mcr.microsoft.com/devcontainers/typescript-node:20-bookworm &lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> uname -a&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Dockerfile contents&lt;/p>
&lt;p>To create the image, run the following commands:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>colima ssh&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>export DOCKER_DEFAULT_PLATFORM=linux/amd64&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Command to build image:&lt;/p>
&lt;ol>
&lt;li>&lt;code>docker build --no-cache --platform linux/amd64 --progress plain -t node20-amd64-localhost:latest .&lt;/code> (For Colima)&lt;/li>
&lt;li>&lt;code>podman build --no-cache --platform linux/amd64 --progress plain -t node20-amd64-localhost:latest .&lt;/code> (For Podman)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>exit&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>Once you build this image, you should see the output like below for the &lt;code>uname&lt;/code> command. If you don&amp;rsquo;t see the &lt;code>x86_64&lt;/code> like I&amp;rsquo;ve highlighted, then you might have not followed the guide properly:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_dbc607e1-1bb5-4bc5-bf36-3f71b5774630.jpeg"
width="1544"
height="116"
srcset="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_dbc607e1-1bb5-4bc5-bf36-3f71b5774630_hu_5d64eda0e3526b12.jpeg 480w, https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_dbc607e1-1bb5-4bc5-bf36-3f71b5774630_hu_3541994a93088819.jpeg 1024w"
loading="lazy"
alt="Output from Colima VM"
class="gallery-image"
data-flex-grow="1331"
data-flex-basis="3194px"
>&lt;/p>
&lt;p>&lt;em>PS: If you are using Podman and had a Podman VM created before installing v5.1, you may have to delete that VM and create another one in its place&lt;/em> &lt;em>&lt;strong>if you don&amp;rsquo;t see x86_64&lt;/strong>&lt;/em> &lt;em>as highlighted above. That will ensure that any new VMs created will have Rosetta translation layer by default.&lt;/em>&lt;/p>
&lt;h2 id="run-your-project-inside-a-devcontainer">Run your project inside a Devcontainer
&lt;/h2>&lt;p>I won&amp;rsquo;t be using any sample project for this article, as you may use any of your x86 based projects you wish to emulate inside a Devcontainer. To do that, you will need to create a folder called &lt;code>.devcontainer&lt;/code>, inside which you need to have two files: &lt;code>devcontainer.json&lt;/code> and &lt;code>Dockerfile&lt;/code>.&lt;/p>
&lt;p>The contents of the &lt;code>Dockerfile&lt;/code> is a single line which uses the base image that we had built in one of the previous sections:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span>&lt;span class="s"> --platform=linux/amd64 node20-amd64-localhost:latest&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>The &lt;code>devcontainer.json&lt;/code> would contain the following contents (Please do not copy the comments as is, it is only meant to explain what each line does:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;NodeJS with Typescript installed to build angular apps using x86-only libraries&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dockerfile&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Dockerfile&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;runArgs&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;${localWorkspaceFolder}:/workspace:cached&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;customizations&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;vscode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;extensions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ms-azuretools.vscode-docker&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;remoteUser&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;root&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;forwardPorts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>In line 4, &lt;code>${localWorkspaceFolder}&lt;/code> refers to your project&amp;rsquo;s location on the host machine, &lt;code>/workspace&lt;/code> is where your project files be mounted inside the devcontainer and the &lt;code>:cached&lt;/code> option is used to improve performance in Docker when mounting volumes.&lt;/p>
&lt;p>I want to use the user &lt;code>root&lt;/code> inside my devcontainer so that I don&amp;rsquo;t need to do a &lt;code>sudo&lt;/code> everytime to install an npm package inside the container. I&amp;rsquo;m forwarding the port 3000 from my container to my host machine as my NodeJS express app uses that port to listen onto requests.&lt;/p>
&lt;p>Once you are done with these two files, open your project inside VSCode, then install the &lt;a class="link" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers&amp;amp;ref=localhost" target="_blank" rel="noopener"
>Devcontainers&lt;/a> extension, Reload the window, press Cmd+Shift+P and then type &lt;code>Reopen in Container&lt;/code> and click on that option. This will build your Container image, mount your project and make it available inside &lt;code>/workspace&lt;/code> in the container and then you should be able to emulate projects using x86 libraries inside the devcontainer on your machine.&lt;/p>
&lt;p>To test that it works, I will try to install the &lt;code>ibm_db&lt;/code> package from within the container, and here&amp;rsquo;s how that went:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_7c5e0791-1363-4fd2-acb1-caafad5f6468.jpeg"
width="1212"
height="452"
srcset="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_7c5e0791-1363-4fd2-acb1-caafad5f6468_hu_4396c3ad44e6766b.jpeg 480w, https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_7c5e0791-1363-4fd2-acb1-caafad5f6468_hu_9e1f87fa77a9adfd.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="268"
data-flex-basis="643px"
>&lt;/p>
&lt;p>That went nicely. Now I need to run my app and see whether it is able to connect to my Database using this library or not:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_3cb9bb56-1433-45e0-ad11-b0a25fe83e9c.jpeg"
width="1320"
height="228"
srcset="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_3cb9bb56-1433-45e0-ad11-b0a25fe83e9c_hu_e9d9cf43596a800f.jpeg 480w, https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_3cb9bb56-1433-45e0-ad11-b0a25fe83e9c_hu_4686045eae16777c.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="578"
data-flex-basis="1389px"
>&lt;/p>
&lt;p>Yup it did connect well.&lt;/p>
&lt;h3 id="why-am-i-using-colima">Why am I using Colima
&lt;/h3>&lt;p>Colima has support for emulating x86 based VMs using the Rosetta 2 translation layer on Apple Silicon Macs. This is important as we needed ibm_db to work. I also think that building x86 images on ARM platforms will become common, as soon as ARM based laptops from Apple and others start becoming mainstream.&lt;/p>
&lt;p>Moreover, I&amp;rsquo;ve not yet found another easier way to create and run a Docker machine using CLI commands. Of course there&amp;rsquo;s Docker Desktop which gives a nice GUI, but its &lt;a class="link" href="https://www.docker.com/blog/updating-product-subscriptions/?ref=localhost" target="_blank" rel="noopener"
>license change&lt;/a> in 2022 wrecked havoc on many companies. Our org had to ban the installs of Docker Desktop completely. I have had to migrate to Podman &lt;a class="link" href="https://blog.sparker0i.me/podman-best-docker-alternative/?ref=localhost" target="_blank" rel="noopener"
>in the past&lt;/a> due to this. &lt;del>While it was fun, it didn&amp;rsquo;t help me solve my problem. Which brings us to:&lt;/del> Podman v5.1 now supports the Rosetta translation layer.&lt;/p>
&lt;h3 id="why-not-qemu">Why not QEMU?
&lt;/h3>&lt;p>I did try using QEMU based emulation by typing &lt;code>colima start --arch x86_64 -p qemu&lt;/code> but, While that worked okay, as in it started the container and I was able to run my app, I discovered that for my NodeJS based application it wasn&amp;rsquo;t really as efficient. Also, my M1 MacBook was heating up like it hadn&amp;rsquo;t done ever before. What is the point of having an M1 Mac if it&amp;rsquo;s going to behave the same as the Intel ones. Thus I felt using Rosetta based emulation was better for me.&lt;/p>
&lt;h3 id="colima-vs-podman">Colima vs Podman
&lt;/h3>&lt;p>I&amp;rsquo;ve updated the blog post in June 2024 with the instructions for Podman as well. Thus a performance comparison between both options was also needed. In real world performance on your Apple Silicon based machine, you will not notice any difference between using your projects with a Docker VM (through Colima) or a Podman VM.&lt;/p>
&lt;p>If you have a keen eye though, you&amp;rsquo;d notice that operations with Podman did finish 1-2s faster than on Colima. Even building the first &lt;code>node20-amd64&lt;/code> image on Podman took 2s lesser than that on Colima, despite using the same internet for both. If I were to make a guess, it could be due to one peculiar output I noticed when creating the first image on the Podman VM.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_586a406d-2e96-4a6e-a747-f8d0701d3ea0.jpeg"
width="1598"
height="92"
srcset="https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_586a406d-2e96-4a6e-a747-f8d0701d3ea0_hu_66f484125ea574d9.jpeg 480w, https://blog.sparker0i.me/running-vs-code-devcontainers-with-x86-runtime-apple-silicon/661c07fb9bb70e9dac2bfedf_586a406d-2e96-4a6e-a747-f8d0701d3ea0_hu_b28c58af807dfc44.jpeg 1024w"
loading="lazy"
alt="Output from Podman VM"
class="gallery-image"
data-flex-grow="1736"
data-flex-basis="4168px"
>&lt;/p>
&lt;p>Here I can see two things: &lt;code>SMP&lt;/code> and &lt;code>PREEMPT_DYNAMIC&lt;/code>, which were not available when I created the VM inside Colima. With a simple Google Search, I found &lt;a class="link" href="https://learn.farizizwan.com/infrastructure/system-administration-linux/redhat-derivatives/smp-preempt_dynamic-definitions" target="_blank" rel="noopener"
>this website&lt;/a> which helped explain both these things. In a nutshell, a combination of both those strings allows you to utilize resources better while providing better responsiveness.&lt;/p>
&lt;h3 id="how-about-windows">How about Windows?
&lt;/h3>&lt;p>While ARM based Windows laptops are set to make a debut later in 2024, I don&amp;rsquo;t believe there will be too much to be done to get it to work. There&amp;rsquo;s WSL which exists already, and one has to watch out how the x86 emulation plays out on these ARM machines using the Snapdragon X chips. If that ends up like how Rosetta has played out so far, all we&amp;rsquo;ll need is for WSL and its distros to support doing the same as well. Things are not yet clear on that front, and I will try to update my article as soon as the picture is clear.&lt;/p>
&lt;h2 id="conclusion">Conclusion
&lt;/h2>&lt;p>Right now I&amp;rsquo;ve just shown one example where I had to run an NodeJS app with x86 libraries on an M1 based Mac without spinning up a full fledged VM like inside VirtualBox or VMWare. You can also extend this concept to various other languages having x86-only libraries like Python etc.&lt;/p></description></item><item><title>Podman with Desktop Companion: The best alternative to Docker Desktop</title><link>https://blog.sparker0i.me/podman-best-docker-alternative/</link><pubDate>Sun, 03 Apr 2022 11:31:44 +0000</pubDate><guid>https://blog.sparker0i.me/podman-best-docker-alternative/</guid><description>&lt;img src="https://blog.sparker0i.me/podman-best-docker-alternative/661c08015ae500253ce7927c.png" alt="Featured image of post Podman with Desktop Companion: The best alternative to Docker Desktop" />&lt;h2 id="update">UPDATE
&lt;/h2>&lt;p>Ever since I wrote this article, the team behind Podman has released and improved their &lt;a class="link" href="https://podman-desktop.io/" target="_blank" rel="noopener"
>Podman Desktop&lt;/a> offering. This product improves upon Podman Desktop Companion and provides integration with other features from RedHat like Podman AI Lab, Code Ready Containers (OpenShift) within the app. I&amp;rsquo;d highly recommend to check that out instead.&lt;/p>
&lt;p>Containers and Docker have always been synonymous to the ears since eternity. For most of us, Docker has been the go-to tool for containerization - a way to pack a software application and all dependencies into an image that can be run anywhere. This allows application to remain separate from the infrastructure so that the app works regardless of where it runs.&lt;/p>
&lt;p>While working on multiple applications in my company, I had been using Docker Desktop as my containerization platform of choice, on my company provided MacBooks to build and debug application images. But we were dealt with a blow a few months ago when it was announced that effective January 31st 2022, Docker Desktop will &lt;a class="link" href="https://www.docker.com/blog/updating-product-subscriptions/?ref=localhost" target="_blank" rel="noopener"
>require a license for enterprises&lt;/a> with more than 250 employees. Unfortunately, my company IBM fell into Docker&amp;rsquo;s categorization of an enterprise.&lt;/p>
&lt;p>Naturally, I started looking at all available alternatives, given that Docker desktop annual subscription per user costs $250. Unfortunately there was no clear winner which could replicate everything that Docker Desktop could do - GUI support, Built in Kubernetes, Environments, Integration with IDEs etc. But all I needed was something with which I could build images locally in a secure manner and run containers locally, with an optional support of a GUI.&lt;/p>
&lt;p>Enter:&lt;/p>
&lt;h2 id="podman">Podman
&lt;/h2>&lt;p>Podman is a CLI tool that provides a Docker-compatible API. It is open source and published by Red Hat. The biggest advantage over Docker is that it is a Daemonless container engine which runs the containers in a rootless state by default. This brings in additional security layer, because even if the container engine, runtime or the orchestrator is compromized, the attacker won&amp;rsquo;t gain any root privileges on the host - which is a flaw in Docker&amp;rsquo;s architecture. You can read &lt;a class="link" href="https://www.imaginarycloud.com/blog/podman-vs-docker?ref=localhost" target="_blank" rel="noopener"
>this article&lt;/a> to understand the finer points of difference between Docker and Podman.&lt;/p>
&lt;p>Installation of Podman 4 is fairly simple on MacOS (using brew). Unfortunately for Linux based Operating Systems, only Fedora has an unofficial COPR that allows you to install Podman 4, while for other Operating Systems you have to build from source code in order to install podman 4.&lt;/p>
&lt;p>Once you install the podman binary, all you need to do is execute the below two commands for MacOS:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">podman machine init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman machine start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>This will start a Fedora CoreOS based VM in the background having podman installed. Once you have started this Podman VM, Almost all Docker CLI commands are compatible with Podman as well - &lt;code>run&lt;/code>, &lt;code>exec&lt;/code>, &lt;code>push&lt;/code> etc. It brings zero impact to the developers that operate on CLI - how you build images and whatever you do with that image using the Docker CLI remains the same. You can also add &lt;a class="link" href="https://podman.io/whatis.html?ref=localhost" target="_blank" rel="noopener"
>&lt;code>alias docker=podman&lt;/code>&lt;/a> to &lt;code>~/.zshrc&lt;/code> (MacOS) or &lt;code>~/.bash_profile&lt;/code> (Linux) so that you don&amp;rsquo;t need to keep reminding yourself to use podman instead of Docker.&lt;/p>
&lt;p>The CLI route is easy for users who have been working with Docker CLI. However what about those users who have been primarily using the Docker Desktop GUI for their workflows? Enter:&lt;/p>
&lt;h2 id="podman-desktop-companion">Podman Desktop Companion
&lt;/h2>&lt;p>&lt;a class="link" href="https://iongion.github.io/podman-desktop-companion/?ref=localhost" target="_blank" rel="noopener"
>Podman Desktop Companion&lt;/a> is a third-party app, which is an almost adequate drop-in replacement for the Docker Desktop GUI. Since this is not an official app, there are a few features this app lacks, most notably the absence of Kubernetes - though this won&amp;rsquo;t be a big deal for those who only want the containerization features of Podman. Here&amp;rsquo;s a screenshot of the app running on my MacBook:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/podman-best-docker-alternative/661c08015ae500253ce7927c_bc163f7c-0948-4378-ab5b-f995df78a27b.png"
width="2000"
height="1549"
srcset="https://blog.sparker0i.me/podman-best-docker-alternative/661c08015ae500253ce7927c_bc163f7c-0948-4378-ab5b-f995df78a27b_hu_b1f1fddd7e055e2c.png 480w, https://blog.sparker0i.me/podman-best-docker-alternative/661c08015ae500253ce7927c_bc163f7c-0948-4378-ab5b-f995df78a27b_hu_b9e3b99ec09f51fd.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="129"
data-flex-basis="309px"
>&lt;/p>
&lt;p>Podman Desktop Companion makes you feel right at home with the look and feel of Docker Desktop&lt;/p>
&lt;p>Feels familiar, doesn&amp;rsquo;t it? Unfortunately, the process to install this app is not as straightforward. For a MacBook, you will need to install &lt;code>lima-vm&lt;/code>, an app that launches Linux virtual machines with automatic file sharing and port forwarding - very similar to what WSL2 does, just that it is mostly for MacOS but can also be used on various Linux distros as well. Unfortunately if you want to proceed to the next step, you will have to stop the &lt;code>podman machine&lt;/code> you had created earlier.&lt;/p>
&lt;p>Lima offers the ability to create VMs using their sample YAML templates or by supplying user written YAML. When you create a VM with the Podman Template YAML, the VM will be running Podman v3. This lacks some key features from Podman 4 including Volume and Device mounts, as well as a vastly improved Network stack. Thus you will have to use a custom YAML if you want to install Podman 4.&lt;/p>
&lt;p>You need to ensure that the name of this VM is &lt;code>podman&lt;/code>. This is necessary for the Desktop Companion (This dependency on a specific VM name is a bad programming practice on the part of the Desktop Companion creator, but since this is a Beta version we can forgive them for now until they release a stable version). You can do this by running &lt;code>limactl start --name=podman /location/of/the/yaml/from/below&lt;/code>. To make things easier for you, I&amp;rsquo;ve written a YAML that worked well for me. You need to save this to a location and use the location of this YAML in the command above.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">images&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">location&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;https://download.fedoraproject.org/pub/fedora/linux/releases/35/Cloud/x86_64/images/Fedora-Cloud-Base-35-1.2.x86_64.qcow2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">arch&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;x86_64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">digest&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sha256:fe84502779b3477284a8d4c86731f642ca10dd3984d2b5eccdf82630a9ca2de6&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">location&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;https://download.fedoraproject.org/pub/fedora/linux/releases/35/Cloud/aarch64/images/Fedora-Cloud-Base-35-1.2.aarch64.qcow2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">arch&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;aarch64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">digest&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sha256:c71f2e6ce75b516d565e2c297ea9994c69b946cb3eaa0a4bbea400dbd6f59ae6&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cpus&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">memory&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="n">GiB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">disk&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">50&lt;/span> &lt;span class="n">GiB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mounts&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">location&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;~&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">location&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/tmp/lima&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">writable&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">provision&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">mode&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">script&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dnf&lt;/span> &lt;span class="n">copr&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">rhcontainerbot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">podman4&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">y&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dnf&lt;/span> &lt;span class="n">update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dnf&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">crun&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">mode&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">user&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">script&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">set&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">eux&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">pipefail&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">systemctl&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">now&lt;/span> &lt;span class="n">podman&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">socket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">probes&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">script&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">set&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">eux&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">pipefail&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">!&lt;/span> &lt;span class="n">timeout&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">bash&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="s2">&amp;#34;until command -v podman &amp;gt;/dev/null 2&amp;gt;&amp;amp;1; do sleep 3; done&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="o">&amp;gt;&amp;amp;&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="s2">&amp;#34;podman is not installed yet&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">exit&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hint&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">See&lt;/span> &lt;span class="s2">&amp;#34;/var/log/cloud-init-output.log&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">guest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">portForwards&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">guestSocket&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/run/user/{{.UID}}/podman/podman.sock&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hostSocket&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{{.Dir}}/sock/podman.sock&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">To&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="n">podman&lt;/span>&lt;span class="err">`&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">host&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">assumes&lt;/span> &lt;span class="n">podman&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">remote&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">installed&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">following&lt;/span> &lt;span class="n">commands&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">export&lt;/span> &lt;span class="n">CONTAINER_HOST&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">limactl&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">format&lt;/span> &lt;span class="s1">&amp;#39;unix://{{.Dir}}/sock/podman.sock&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">podman&lt;/span> &lt;span class="n">system&lt;/span> &lt;span class="n">connection&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">lima&lt;/span> &lt;span class="s2">&amp;#34;unix://{{.Dir}}/sock/podman.sock&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">podman&lt;/span> &lt;span class="n">system&lt;/span> &lt;span class="n">connection&lt;/span> &lt;span class="n">default&lt;/span> &lt;span class="n">lima&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">podman&lt;/span>&lt;span class="p">{{&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="n">eq&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">HostOS&lt;/span> &lt;span class="s2">&amp;#34;linux&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">remote&lt;/span>&lt;span class="p">{{&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="p">}}&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="n">quay&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">podman&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hello&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">------&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>I&amp;rsquo;m using a Fedora Base VM Image because there is a custom COPR available which can install Podman v4 in the VM image. Then once I&amp;rsquo;m done installing Podman and crun on the VM, I&amp;rsquo;m forwarding the VM&amp;rsquo;s socket to a socket on the host machine. This is needed so for the Desktop companion to establish connection and verify services running on the guest VM.&lt;/p>
&lt;p>Once the VM is installed and started, you also need 4 other commands on the host to notify the podman remote CLI to connect to the guest VM rather than listening on the host. Thus once you are done installing Lima, Podman Remote CLI on Host, Podman on Lima VM and the Desktop Companion, you will feel right at home, without missing Docker Desktop.&lt;/p></description></item><item><title>Factors to look at while dealing with Cryptocurrencies</title><link>https://blog.sparker0i.me/factors-to-look-dealing-crypto/</link><pubDate>Fri, 06 Aug 2021 04:20:59 +0000</pubDate><guid>https://blog.sparker0i.me/factors-to-look-dealing-crypto/</guid><description>&lt;img src="https://blog.sparker0i.me/factors-to-look-dealing-crypto/661c08055610fb416dbc1885.png" alt="Featured image of post Factors to look at while dealing with Cryptocurrencies" />&lt;p>Crypto-currencies are a hot subject today. From seeing multiple bull-runs, to governments trying to destroy the movement of sovereign independence, to countries adopting Bitcoin as a legal tender, cryptocurrencies have come a long way. I have been holding crypto-currencies since 2019, but it was only at the start of this year that I actually started trading and buying them.&lt;/p>
&lt;p>Now, if you ask anyone online about which crypto to buy, you will be frequently met with the term #DYOR - Do Your Own Research. Same was with me as well, whenever I&amp;rsquo;ve asked people on tips, I was told to #DYOR, but there were not many tips online about what to do in DYOR. Like many in the beginning, I&amp;rsquo;ve had my shares of success and failures in crypto hodling and trading. Here are a few tips I follow when looking to buy tokens.&lt;/p>
&lt;h2 id="initial-research-and-filtering-bad-assets">Initial Research and Filtering Bad Assets
&lt;/h2>&lt;p>Before I hodl or trade any tokens, I make sure to do some initial research with a few pointers. I&amp;rsquo;d feel great about those tokens that meet this initial criteria, while others become a big no-go for the rest of my life (unless something drastically changes in that particular crypto&amp;rsquo;s tech, but would be unlikely).&lt;/p>
&lt;p>The first thing I do is visit CoinMarketCap website, search for the particular crypto I&amp;rsquo;m looking to hodl or invest. Every major crypto asset listed on CoinMarketCap will have its own website, and that is the first thing I always look at. Within the website, the first thing you should read is the &lt;strong>Whitepaper&lt;/strong> of the token. When you read through the various pages on a particular crypto&amp;rsquo;s website, I am able to mostly detect any non-sense or BS. If it uses any terms or protocols that you find it hard to comprehend - like it &amp;ldquo;&lt;strong>promises&lt;/strong>&amp;rdquo; a huge payout or claims to have some tech that seems to good to be true (like self-mining) - immediately avoid it.&lt;/p>
&lt;p>You should also look for some more things like Roadmap of features for the particular project and the track record on how it has delivered so far on all those features. If a project has consistently failed or lagged behind to deliver new features, you should treat it as another yellow flag. I&amp;rsquo;d also look at how the crypto&amp;rsquo;s tech functions and the value a token is trying to create. If there are no unique use-cases or if the crypto does not require/benefit from the use of blockchain fundamentals, I&amp;rsquo;d give it a red flag and move on.&lt;/p>
&lt;p>Another thing that you should really look at is the Blockchain Explorer for a given crypto. First thing I&amp;rsquo;d check here is the max supply for the given crypto. Needless to say, stablecoins are a no-go here. If there&amp;rsquo;s no max supply for a token, it is usually a Red Flag from my side, although there are a very few exceptions for this - like Ethereum. If you still want to go ahead and deal with cryptos without a max supply, you should do it at your own risk and must usually look to own it only for the short-term and not hodl them.&lt;/p>
&lt;p>Next thing you should look at is the distribution of tokens across all wallet holders of the given token. If you see that one wallet holds more than 15-20% of the total current supply, I&amp;rsquo;d raise a red flag here. The moment a big whale dumps (sells) all those coins, the entire crypto will start reeling. Best example would be Vitalik Buterin &lt;a class="link" href="https://www.nzherald.co.nz/business/ethereum-co-founder-vitalik-buterin-destroys-410-trillion-shiba-inu-coins/VCNH2FDFQYRVDD6U3Q6VFYZ2XQ/?ref=localhost" target="_blank" rel="noopener"
>dumping 45% of the entire Shiba Inu coins in supply&lt;/a>, causing a massive drop in the price of the Shiba Inu coin. (More surprising in the case of Shiba Inu is that the Whitepaper of the coin still refers Buterin as a visionary - &amp;ldquo;like its anonymous founder&amp;rdquo; - even after he dumped the project&amp;rsquo;s worth)&lt;/p>
&lt;p>Some other pointers that you can consider to research would be browsing the source code of a given asset on GitHub and the amount of activity in its repos in the recent past. As an alternate means, try going through the blogs and subreddit of the given token and look for any threads that look skeptical to you.&lt;/p>
&lt;h2 id="avoid-scams">Avoid Scams
&lt;/h2>&lt;p>When you start off dealing with cryptos, you would be looking at ways to maximize money instantly. While I&amp;rsquo;d say it is not impossible, but I would advise you to not do that. Lured by the opportunity of making quick money, people might fall into the trap of crypto scams.&lt;/p>
&lt;p>Most of these scams happen on Telegram within groups which usually advertise quick money making schemes in the form of Token Airdrops. They will mostly look to lure you with &amp;ldquo;verified&amp;rdquo; token deposit screenshots from customers. These &amp;ldquo;customers&amp;rdquo; are either running the scam along with the admins of the group, or are accounts managed by the admins themselves. If you look to participate in such airdrops, you will end up losing all your life savings.&lt;/p>
&lt;p>However, I&amp;rsquo;m not saying all airdrops are bad. Some of them that have happened - like the Stellar Airdrops in 2017 and 2019. But that was done by a verified entity - the Stellar Foundation. Here we are talking about Telegram groups that are run by Anonymous Users. Such groups are always Bait and Scam, and I would recommend you to avoid them.&lt;/p>
&lt;h2 id="fill-out-an-investment-checklist">Fill out an Investment Checklist
&lt;/h2>&lt;p>Once I&amp;rsquo;m done filtering out the coins I invest in, I look to create an investment checklist where I have noted certain questions that I ask before I invest in a coin. Here are the details of the questions:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>What is the problem that a crypto is trying to solve?&lt;/strong> Like I mentioned in the previous section, if a token does not serve a purpose or does not solve a problem - not just with blockchains or the financial sector, but any sector, say Education or Supply Chain - I believe there is no reason for that coin to exist. Such coins are only hype driven and only good for short-term trading. I will call such hype-driven coins as &lt;strong>Shitcoins&lt;/strong> from now. Hodling them for a long term will leave you reeling.&lt;/li>
&lt;li>&lt;strong>What is the Dev Team like? What is their track record? How are they funded, organized?&lt;/strong> I will look for is the history of some of the Lead members on a project and see what they have worked on previously - via information they post online (say on LinkedIn). If they are anonymous members (exception: Satoshi Nakamoto, the creator of Bitcoin), I&amp;rsquo;ll automatically raise a Red flag on that crypto and move on. Then, I will also look at how they are funded. Whether they have partnerships with Enterprises or they have solved a critical problem for any pillar of the society - say government or law - or any other major piece of news regarding any advancement that was made possible because of a crypto.&lt;/li>
&lt;li>&lt;strong>Who is their competition and how big is the market they&amp;rsquo;re targeting?&lt;/strong> What is the roadmap they created? Like I&amp;rsquo;ve mentioned in the previous section, you should always have a look at the roadmap for a given token. No roadmap -&amp;gt; No progress -&amp;gt; Red Flag. Also you need to look at the other coins being offered in the market and how do they compete with the token you&amp;rsquo;re looking to buy. Because healthy competition always leads to success, unless you&amp;rsquo;re looking for a shitcoin, or the competitors of a given token are all shitcoins.&lt;/li>
&lt;li>&lt;strong>Is there a staking mechanism or is it transactional?&lt;/strong> There are cryptos which rely on various types of consensus mechanisms - Proof of Work (PoW), Proof of Stake (PoS), Proof of Time and Space etc.&lt;/li>
&lt;li>&lt;strong>How does the token/coin actually derive value for the holder?&lt;/strong>&lt;/li>
&lt;li>&lt;strong>What are the weaknesses or problems with this crypto?&lt;/strong> Of course there can never be some shortcoming associated with a given crypto. If there are none, it sounds too good to be true. (Even for Bitcoin, there&amp;rsquo;s only one disadvantage that I can think about - Electricity consumption. But that too is definitely lesser than electricity used for mining actual Gold, or by the entire banking system around the world)&lt;/li>
&lt;/ul>
&lt;h2 id="create-a-valuation-framework-for-a-token">Create a Valuation Framework for a token
&lt;/h2>&lt;p>With the boom that crypto trading has seen since November 2020, you must always be sure of what coins you want to invest in. I&amp;rsquo;ve been a part of various crypto groups on multiple sites like Facebook and Reddit. In it, I&amp;rsquo;ve seen a lot of people complain about the losses they&amp;rsquo;ve had to made while dealing with crypto, because they either bought high and then the market went bearish, or they invested in the pump-and-dump shitcoins.&lt;/p>
&lt;p>To avoid becoming one among such people, you need to have a certain valuation model for a given crypto. Even if you create a basic one, you&amp;rsquo;ll go miles ahead of your peers/other people. Here are some simple things you can consider doing:&lt;/p>
&lt;ul>
&lt;li>Look at the total market cap of the coin and compare it with the size of the market it is trying to address. Market cap here includes not only the circulating supply, but also the max supply possible for the crypto.&lt;/li>
&lt;li>Check for the total number of users of a given token. I believe that the value of a given crypto would be proportional to the number of users using the crypto. The best known crypto out there is Bitcoin and there are almost 100 Million people already using it. Compounded with its scarcity, its scale and community is why Bitcoin carries a huge value.&lt;/li>
&lt;/ul>
&lt;p>These were 2 very basic checks that I do for any crypto. I might add some other checks in the evaluation framework as well. Once you have a model setup, you can then evaluate one crypto against another, and also see why you would want to own this coin rather than do short-term trading. Doing this will lead you to think long term about dealing with a given crypto and think more about the &amp;ldquo;value&amp;rdquo; it provides.&lt;/p>
&lt;p>Once you do this, you will have more mental peace and have good confidence for your decision making. You would also not panic when there are any short-term price dips.&lt;/p>
&lt;h2 id="portfolio-allocation">Portfolio Allocation
&lt;/h2>&lt;p>This is one of the crucial aspects of your journey with crypto. You should think on how much fiat you can use to buy crypto, as well as how do you want to allocate your crypto portfolio between &amp;ldquo;safe&amp;rdquo; and &amp;ldquo;rigged&amp;rdquo; cryptos. (planned pump-and-dump, shitcoins etc.). If you&amp;rsquo;re just starting out, I would recommend you to not go with shitcoins to begin with. I have seen a few of my friends who started their crypto journeys because of celebrities who rig coins like Elon Musk and co. The peak of this came during Elon&amp;rsquo;s SNL appearance. Despite my advice against it, most of my friends bought Dogecoin only because of Elon&amp;rsquo;s appearance and thinking it&amp;rsquo;s price will keep going up if they bought then. Little did they know that it was the starting point for dumping Dogecoin, whose effects can still be felt today. Many of my friends felt cheated, and some of them have left the crypto space despite my assurances that not all cryptos are bad.&lt;/p>
&lt;p>So if you&amp;rsquo;re just starting out, I&amp;rsquo;d recommend having 80-90% of your portfolio filled with safe coins. Once you become more informed and confident, you can start dealing with Shitcoins and vary your portfolio allocation. You should also think in terms of crypto categories as well as the percentage of your portfolio in each of these segments. For starters, I categorise crypto into following categories: (You may disagree with how I&amp;rsquo;m grouping the cryptos, but we can agree to disagree)&lt;/p>
&lt;ul>
&lt;li>Core Holdings: Bitcoin (BTC), Litecoin (LTC)&lt;/li>
&lt;li>Smart Contracts: Ethereum (ETH), Cardano (ADA), Polkadot (DOT), ALGO, Solana etc.&lt;/li>
&lt;li>Crypto with Privacy?: Monero (XMR), ZCash&lt;/li>
&lt;li>Intermediary with fiat dealings/Bank Settlement: Stellar (XLM), Ripple (XRP)&lt;/li>
&lt;li>Enterprise Solutions: VeChain etc.&lt;/li>
&lt;li>Promising: NANO, IOTA, RVN, Algo etc.&lt;/li>
&lt;li>Coins without intrinsic value (Shitcoin): DOGE + the army of dog coins (Shiba, Kishu) etc.&lt;/li>
&lt;/ul>
&lt;p>You should also have a fair idea about the market conditions as there is a lot of uncertainty today, mostly due to policies+governments and others due to rigging shitcoins. Due to this uncertainty, you should best stick to the core holdings and then pick up coins in segments you are knowledgeable enough about. Example, if you don&amp;rsquo;t know about Smart Contracts, how can you be sure that ALGO is a game changer?&lt;/p>
&lt;p>This is where portfolio diversification and allocation comes into place. You should look to diversify, but in the ever-changing world of crypto you shouldn&amp;rsquo;t look to diversify way too much. It would be difficult for you to keep up with all the changes that have occurred across cryptos. I wouldn&amp;rsquo;t recommend you to have more than 10-12 cryptos. If you have more, I would recommend you to consolidate to the few segments you are well knowledgeable about.&lt;/p>
&lt;h2 id="learn-everyday">Learn Everyday
&lt;/h2>&lt;p>If you aren&amp;rsquo;t doing this already, read a bit daily on cryptocurrencies. There are decent YouTubers that talk about the market movements in the crypto space. You should also learn more about the underlying principles in the crypto space. More specifically, if you are not aware of basics like Proof-of-Work (PoW), Proof-of-Space (PoS), learn about it first.&lt;/p>
&lt;p>If you invest in stocks, one factor you would look for is what are the core offerings of a given company and how it performs against other peers. If you don&amp;rsquo;t know about how the underlying technology of a crypto works, learn about it as well. That will increase your belief if you want to buy that crypto. If you don&amp;rsquo;t care about the underlying technology or find reading about it very tedious, I believe you shouldn&amp;rsquo;t be in this crypto space at all and shouldn&amp;rsquo;t look to invest here, otherwise you will feel betrayed after your coins&amp;rsquo; value gets dumped.&lt;/p></description></item><item><title>Is the state of targeted digital advertising broken?</title><link>https://blog.sparker0i.me/health-targeted-digital-advertising-today/</link><pubDate>Sat, 23 Jan 2021 03:33:00 +0000</pubDate><guid>https://blog.sparker0i.me/health-targeted-digital-advertising-today/</guid><description>&lt;img src="https://blog.sparker0i.me/health-targeted-digital-advertising-today/661c080c8442574e70467574.png" alt="Featured image of post Is the state of targeted digital advertising broken?" />&lt;p>Advertisements are everywhere - You see ads on your newspaper, your family sees ads on TV channels, there are ads on billboards seen by people in and around an area, and you too see ads on almost any website you visit.&lt;/p>
&lt;p>But, internet advertising industry is broken. It&amp;rsquo;s failing the users and the advertisers themselves. Internet advertising majorly uses targeted/personalized ads to go after you and cater products you would most likely want. This ends up collecting as much data about you as it can.&lt;/p>
&lt;p>In this blog post, I will argue why the current model of internet advertising is bad, and how can you save yourself from being a victim of personalized ad targeting.&lt;/p>
&lt;h2 id="a-regular-users-perspective-on-advertising">A Regular User&amp;rsquo;s Perspective on Advertising
&lt;/h2>&lt;p>If you ask me what are the problems with the current model of advertising online, here are a few things I might suggest:&lt;/p>
&lt;ul>
&lt;li>Ads violate privacy: There&amp;rsquo;s no secret to this, internet advertising scoops up as much information about you from the services you visit and use.&lt;/li>
&lt;li>Ads are disruptive: As an example, sometimes you click on a blank area in a website, you then see a new pop-up window with an ad, despite your browser blocking pop-ups&lt;/li>
&lt;li>Ads are annoying: Sometimes you visit an interesting website, and the very next moment when you open a social media website, you start seeing ads about this almost everytime.&lt;/li>
&lt;li>Malicious Ads: A vast majority of the people of my generation shouldn&amp;rsquo;t be worried about Malicious ads, as our generation is aware about websites and malware, and we&amp;rsquo;d only visit website after due diligence. But our previous generations are not so well-informed about websites, they would click on any website and that site may end up spreading malware.&lt;/li>
&lt;/ul>
&lt;p>What I&amp;rsquo;m worried about is the first point - Digital Advertising violating our privacy. While our previous generations are not much aware about their Data Privacy, our current generation does worry about it.&lt;/p>
&lt;p>While we sit here, worrying about our privacy, IMF has &amp;ldquo;suggested&amp;rdquo; that a person&amp;rsquo;s &lt;a class="link" href="https://gizmodo.com/your-credit-score-should-be-based-on-your-web-history-1845912592?ref=localhost" target="_blank" rel="noopener"
>credit history should be based on their Web History&lt;/a>. That&amp;rsquo;s how ridiculous things may get in the future if things are not corrected today. A 2018 study by researchers at Data and Society &lt;a class="link" href="https://datasociety.net/wp-content/uploads/2018/10/DS_Digital_Influence_Machine.pdf?ref=localhost" target="_blank" rel="noopener"
>concluded&lt;/a> that “today’s digital advertising infrastructure creates disturbing new opportunities for political manipulation and other forms of antidemocratic strategic communication.”&lt;/p>
&lt;p>Even without concerns of privacy violations, there have been many efforts to try and fix some of the issues:&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.betterads.org/?ref=localhost" target="_blank" rel="noopener"
>Coalition for Better Ads&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://acceptableads.com/?ref=localhost" target="_blank" rel="noopener"
>Acceptable Ads&lt;/a>&lt;/li>
&lt;li>Brave&lt;/li>
&lt;/ul>
&lt;p>These only fix some of the problems with Advertising in general, not the entire problem.&lt;/p>
&lt;h2 id="attention-economy">Attention Economy
&lt;/h2>&lt;p>&lt;img src="https://blog.sparker0i.me/health-targeted-digital-advertising-today/661c080c8442574e70467574_0539926e-20df-47e5-b1d2-d29b2f29c14b.jpeg"
width="736"
height="328"
srcset="https://blog.sparker0i.me/health-targeted-digital-advertising-today/661c080c8442574e70467574_0539926e-20df-47e5-b1d2-d29b2f29c14b_hu_97cd83c52c0e46b2.jpeg 480w, https://blog.sparker0i.me/health-targeted-digital-advertising-today/661c080c8442574e70467574_0539926e-20df-47e5-b1d2-d29b2f29c14b_hu_c516593014c251ef.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="224"
data-flex-basis="538px"
>&lt;/p>
&lt;p>Multiple advertisements craving for your attention&lt;/p>
&lt;p>&lt;a class="link" href="https://medium.com/rsa-journal/democracy-distracted-cf3272ceb3c4?ref=localhost" target="_blank" rel="noopener"
>Herbert Simon argued in the 70s&lt;/a> that when information becomes abundant, attention becomes the scarce resource. In today&amp;rsquo;s modern age, we’re living through the pendulum swing of that reversal—yet we consistently overlook its implications.&lt;/p>
&lt;p>When you visit any website or browse through any app, you take some time out of your life - or your &lt;strong>attention&lt;/strong> to visit that resource. You are also using some of your attention to read this post (for which I&amp;rsquo;m eternally grateful). Now, you normally wouldn&amp;rsquo;t take out some of this attention to visit a website that you haven&amp;rsquo;t clicked by yourself. Thus, such websites/apps allow to advertise within itself (mostly as a small banner) via publishers, so that you don&amp;rsquo;t have to take out extra time off your life just to visit the standalone ad. Then, such publishers use your &amp;ldquo;actions&amp;rdquo;, and use such individualized data about you - collected via algorithms - and sell slots to advertisers to display ads.&lt;/p>
&lt;p>Wikipedia has a perfect definition for this - &lt;a class="link" href="https://en.wikipedia.org/wiki/Attention_economy?ref=localhost" target="_blank" rel="noopener"
>Attention Economy&lt;/a>.&lt;/p>
&lt;p>Who wouldn&amp;rsquo;t love to have an individualized feed of news. Sadly, individualization that happens today is neither for our own benefit nor for getting a peace of mind. Rather such a system only invites more outrage from us - users.&lt;/p>
&lt;p>Now, an incentive driven advertising system is good for the publishers, who earn good money; and advertisers, who get to sell lot more of their products. But this is bad for the user. There are literally billions of dollars being spent to figure out how to persuade you to look at a certain thing over a competitor&amp;rsquo;s; to care about one thing over another. This is the way most of the information in this world is being monetized today.&lt;/p>
&lt;p>We can all see the effects of Attention Economy - Social Media websites like Twitter and Facebook never want people of different groups to stop fighting - be it over religion, sports or their political bias. This is because these networks are optimized in a way to promote fighting, or spread fake news/propaganda very quickly. You may argue that companies are investing to stop fake news, but I believe that it is still relatively minor as they don&amp;rsquo;t really want their revenue streams to go down.&lt;/p>
&lt;h2 id="my-take-on-digital-ads">My take on digital ads
&lt;/h2>&lt;p>I don’t want any relevant ads, or any ad-driven products, ever. Other people might feel differently, but collecting the data is only half the problem. That data can be abused, even if only client-side - for example targeting could exploit you and persuade to buy stuff you don’t need. The whole point of ads is to change your behavior, if only slightly, with advertisers literally bidding for your attention, and then playing mind tricks, which work because of how our critical thinking often fails us a majority of the times.&lt;/p>
&lt;p>I believe great products have often been successful via word of mouth referrals. A great example would be &lt;strong>Cred&lt;/strong>. Only a few credit card users in India were aware of the Cred before September 2020. That month, a delayed IPL 2020 started, and Cred ads - which a majority of the Indians never understood - was everywhere on TV, getting people&amp;rsquo;s interest in knowing about the product, and eventually end up using it. There are tactics that don’t involve tricking people into changing their behavior. Conventional advertising is better than the targeted ones, because it’s not individualized. At least everybody else is seeing the same shit that you’re seeing.&lt;/p>
&lt;p>That brings us to the most important question - What should companies do? Honestly speaking, I don&amp;rsquo;t think that&amp;rsquo;s our problem. I don&amp;rsquo;t think any company should be entitled to our data or our attention. When was the last time you ever saw an ad that made you feel this is the real deal. I haven&amp;rsquo;t, have you?&lt;/p>
&lt;p>You know how the unethical behavior of companies is always excused via the requirement of company stakeholders to make money? Well, this goes both ways. We, the consumers, aren’t running any charity. I strongly feel it isn’t our job to save such dying business models.&lt;/p>
&lt;h3 id="first-party-ads">First Party Ads
&lt;/h3>&lt;p>One solution to the problem could be the content providers (websites/apps) serving ads based on content that is being viewed right now. This might ensure there is no need to keep user&amp;rsquo;s profile and history. Your data will no longer be shared to third-parties and hence the quality of ads shown will get better - which also means no scam ads and no malvertising.&lt;/p>
&lt;p>This too has a problem. Even if there is a whitelist for “acceptable ads”, the problem is those ads are still downloaded Javascript code, with no way to review what they do. Further, third-party requests could get disguised as first-party ones. In such cases, you have to trust the publishers, which I&amp;rsquo;d usually find a hard time to do.&lt;/p>
&lt;h3 id="then-wouldnt-ad-blocking-affect-the-internet">Then, Wouldn&amp;rsquo;t Ad-Blocking affect the Internet?
&lt;/h3>&lt;p>Given a choice between receiving ads, and no ads, sane people would obviously choose no ads. Nobody likes ads. If its forced, we have to gulp it down our throat, because either there&amp;rsquo;s no clear alternative (Facebook), or the price of no-ads option is way too high (Youtube, Spotify, Apple Music, Hotstar et al.).&lt;/p>
&lt;p>Almost no browser ships with an aggressive ad-blocker enabled by default. This is because somewhere or the other, their business model is also dependent on ads, even if they don&amp;rsquo;t serve ads directly. It will only make the end user&amp;rsquo;s experience much better. Many browsers that claim to do aggressive ad-blocking like Microsoft Edge, Brave, Samsung, Vivaldi et al. earn a lot of money from advertising.&lt;/p>
&lt;p>Now, wouldn&amp;rsquo;t ad-blocking affect the Internet&amp;rsquo;s health? Yes, it will. Negatively, on the advertisers and publishers&amp;rsquo; wallets; Positively on the rest of the internet, because it can only get better from there on.&lt;/p>
&lt;h2 id="solutions">Solutions
&lt;/h2>&lt;h2 id="pay-for-the-things-you-use">Pay for the things you use
&lt;/h2>&lt;p>A wise man once said,&lt;/p>
&lt;blockquote>
&lt;p>&amp;ldquo;If you are not paying for a product, &lt;strong>you are the product&lt;/strong>&amp;rdquo;.&lt;/p>&lt;/blockquote>
&lt;p>If I really enjoy something, I don&amp;rsquo;t mind paying for it. For example, I&amp;rsquo;ve been using &lt;strong>Hey email&lt;/strong> since July. It did not catch my attention because of all the amazing features it brings, but rather because of its infamous &lt;a class="link" href="https://hey.com/apple/?ref=localhost" target="_blank" rel="noopener"
>feud with Apple&lt;/a>. In short, Hey is a radical re-thinking of what an Email client should be. As one Twitter user puts it:&lt;/p>
&lt;blockquote>
&lt;p>In positive news, &lt;a class="link" href="https://t.co/lwKSOQNcFe?ref=localhost" target="_blank" rel="noopener"
>https://t.co/lwKSOQNcFe&lt;/a> seems to have finally solved email (!!!). Been using it several weeks and no longer dealing with spam, long lists of “unread” messages, or sorting out annoying but important docs. The relief is so real 🙌🏼&lt;/p>
&lt;p>— Dr. Darya Rose 🇺🇸 (@summertomato) &lt;a class="link" href="https://twitter.com/summertomato/status/1270816132102930433?ref_src=twsrc%5Etfw&amp;amp;ref=localhost" target="_blank" rel="noopener"
>June 10, 2020&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>I&amp;rsquo;ve been using it so far without any major problems. All advertising mails are now screened out, so that they never take my attention again. I&amp;rsquo;ve changed emails for all my online accounts to reflect to my hey.com email address. Now there are certain services like stock and mutual fund brokers, whose email change process has to be offline. Once all of my services are moved over to Hey, I&amp;rsquo;m deleting all my non Hey mail accounts (except primary Google Play Store and Microsoft Store accounts, because all my app/in-app purchase history is sitting in those 2 accounts).&lt;/p>
&lt;p>Similarly, I&amp;rsquo;m also using &lt;strong>Spotify Premium&lt;/strong> because I don&amp;rsquo;t want myself to be exposed to their ads right after one song.&lt;/p>
&lt;p>I also pay for &lt;strong>Xbox Game Pass for PC&lt;/strong>. It has more than 100 AAA PC games that I can easily play on my Lenovo Legion Y740 laptop. There are no ads in the games that are played via XGP. I regularly play Age of Empires 2: DE, Flight Simulator, Doom Eternal, Moto GP20 and The Outer Worlds. Buying all those games individually would&amp;rsquo;ve cost me a fortune, but at Rs 489/month (577 if you include taxes) it is a killer deal, specially for gamers like me. I am also using &lt;strong>Kindle Unlimited&lt;/strong> for Reading as many Books as I can.&lt;/p>
&lt;p>With all the information I&amp;rsquo;m unearthing every single day about the shady practices of all developers, I&amp;rsquo;m removing all ads-enabled apps from my mobiles. Moreover, if I find that any app is sharing data that is unwanted, I promptly uninstall that app. If at all I really need to use the app&amp;rsquo;s services which provide ads, I would find a browser-based alternative for it - Eg. Youtube, Twitter, Facebook, IG, Amazon + Entertainment apps.&lt;/p>
&lt;h2 id="block-all-ads">Block All Ads
&lt;/h2>&lt;p>Even if you may think that some ads are fine, but do you know whether those are targeted specifically to you or not? Even if there&amp;rsquo;s a whitelist of &amp;ldquo;acceptable ads&amp;rdquo;, it&amp;rsquo;s still Javascript code downloaded from the internet, which I have no idea about its functionality. It&amp;rsquo;s still intrusive, and drives you to buy things you don&amp;rsquo;t really want.&lt;/p>
&lt;p>I really think it is wrong that Publishers think they can run code on our devices. If publishers think otherwise, they can feel free to block me from using their services. If I see any website that serves me ads (and gets caught by my ad blockers), I&amp;rsquo;d really start looking for alternatives.&lt;/p>
&lt;h3 id="blocking-for-all-devices">Blocking for all devices
&lt;/h3>&lt;p>DNS blocking has worked well so far. That is until apps/sites starting using DNS-over-HTTPS over their own servers. Still there are techniques to circumvent this too.&lt;/p>
&lt;p>&lt;strong>PiHole&lt;/strong>: I had a Raspberry Pi 3B sitting idle at home for the last 1 year or so. When I got to know that I could run a service like Pihole on it, I wasted no time to set it up. Ever since Christmas eve, I&amp;rsquo;ve been using Pihole to block ads for all the devices my family uses. And the stats are great too:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/health-targeted-digital-advertising-today/661c080c8442574e70467574_69ede8a4-a0cd-486d-9d56-7f128890c177.png"
width="1013"
height="135"
srcset="https://blog.sparker0i.me/health-targeted-digital-advertising-today/661c080c8442574e70467574_69ede8a4-a0cd-486d-9d56-7f128890c177_hu_9f5e538726198c9d.png 480w, https://blog.sparker0i.me/health-targeted-digital-advertising-today/661c080c8442574e70467574_69ede8a4-a0cd-486d-9d56-7f128890c177_hu_1edc6a50beff1b9e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="750"
data-flex-basis="1800px"
>&lt;/p>
&lt;p>Pihole stats since December 23, 2020&lt;/p>
&lt;p>Though the only downside to this is that I&amp;rsquo;ve had to change my router to use static IP address assignment. There was some initial hassle in setting up my router and the devices, but once that was done, ads were a thing of the past (except Youtube ads, for which there is no working solution in 2021. Screw you, Google).&lt;/p>
&lt;p>&lt;strong>Hosted services&lt;/strong>: 3 months before trying out Pihole, I tried using NextDNS. While the results were incredible, I felt that giving away Rs. 159 every month (187 including taxes) was a bit too much for me. I&amp;rsquo;ve also heard about Adguard DNS, but I haven&amp;rsquo;t used it so far.&lt;/p>
&lt;h2 id="individual-devices">Individual Devices
&lt;/h2>&lt;h3 id="desktoplaptop--android-devices">Desktop/Laptop + Android devices
&lt;/h3>&lt;p>Even before I&amp;rsquo;ve been using PiHole, I had experimented with ad blocking via browser extensions. The best combination I&amp;rsquo;ve found is Firefox + uBlock Origin + Privacy Badger. It simply works.&lt;/p>
&lt;p>uBlock Origin is by far the best ad blocker I&amp;rsquo;ve ever used. Ever since installing it, I&amp;rsquo;ve noticed far better loading speeds, because there are lesser resources to be loaded. It also protects against CNAME cloaking, where 3rd party requests masquerade as 1st party ones and you might not even notice it.&lt;/p>
&lt;p>Sadly, this won&amp;rsquo;t work with Google Chrome and other Chromium forked browsers in the near future. This is because Manifest v3 for Chrome extensions will be deployed in Google Chrome sometime in January (with the release of v88). Simply put, Manifest is something any extension developer will have to follow while developing an extension. This particular Manifest v3 changes the way ad-blocking extensions function. This negatively impacts ad-blockers and uBlock is one of them.&lt;/p>
&lt;p>My take on this will be to ditch Chrome/Chromium forked browsers ASAP. Switch to Firefox while you still can, because Mozilla&amp;rsquo;s financials aren&amp;rsquo;t great, and the browser could go kaput anytime.&lt;/p>
&lt;p>The same combination also works well for Android as well, just that you will have to update the Firefox browser to whichever latest version is available.&lt;/p>
&lt;h3 id="what-about-brave-browser">What about Brave Browser?
&lt;/h3>&lt;p>&lt;img src="https://blog.sparker0i.me/health-targeted-digital-advertising-today/661c080c8442574e70467574_3f42d5de-d923-4f65-8f9c-7d9aff8de5f4.jpeg"
width="773"
height="553"
srcset="https://blog.sparker0i.me/health-targeted-digital-advertising-today/661c080c8442574e70467574_3f42d5de-d923-4f65-8f9c-7d9aff8de5f4_hu_881bdfcfdcd9be1c.jpeg 480w, https://blog.sparker0i.me/health-targeted-digital-advertising-today/661c080c8442574e70467574_3f42d5de-d923-4f65-8f9c-7d9aff8de5f4_hu_3ccbe893474f4d9a.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="335px"
>&lt;/p>
&lt;p>Brave browser displaying ads from Brave Network via OS notifications&lt;/p>
&lt;p>Brave is yet another Chromium fork which focuses on user privacy by blocking trackers, scripts and ads by default. So inside some pages where ads don&amp;rsquo;t load properly, you might be forced to turn down Brave Shields, which will then open up the website to show you ads.&lt;/p>
&lt;p>By the time you&amp;rsquo;ve reached here, you must&amp;rsquo;ve realised that internet is up and running, all thanks to advertisements. The content you might be seeing for free is able to remain free because of advertising. This is profitable for both advertisers and publishers, but not the users.&lt;/p>
&lt;p>Brave attempts to change the advertising model by flipping the pyramid upside down. What I mean is, users get paid for getting advertisements on their devices. It allows users to opt-in to its own Brave rewards system (in other words, another advertising system). Brave serves ads after blocking ads from third party providers on websites, and then start showing ads from their own advertising platform via OS level notifications.&lt;/p>
&lt;p>Once you&amp;rsquo;ve opted-in, Brave will display you &amp;lsquo;privacy-respecting&amp;rsquo; ads (it&amp;rsquo;s still an advertisement btw 😂) and if you receive an ad, you will be rewarded with a BAT cryptocurrency (BAT = Basic Attention Token), which you can use to support Brave verified creators (You can&amp;rsquo;t withdraw those tokens to your crypto wallet yet, that&amp;rsquo;s coming soon though).&lt;/p>
&lt;p>Brave intends to serve ads as per user interests, in an anonymised way. This could be either via client-side profiling, or simply piggybacking what a user is currently viewing. While rewards and ads maybe opt-in for users, they are not for publishers, leaving us in a very awkward position. If a publisher wants a cut of the rewards, they need to be a part of the Brave Partner program.&lt;/p>
&lt;p>With this behaviour, I feel that Brave is yet another middleman between the user and the advertiser. Other companies also have the same model of running their business. You are trusting an advertising company (Brave) - just like Google - to preserve your privacy. What an irony.&lt;/p>
&lt;h3 id="conclusion">Conclusion
&lt;/h3>&lt;p>I want the targeted advertisement system to die. I will go to all lengths to block all ads. I feel companies are not entitled to my data or my time (&amp;lsquo;attention&amp;rsquo;).&lt;/p>
&lt;p>Read More:&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://practicaltypography.com/the-cowardice-of-brave.html?ref=localhost" target="_blank" rel="noopener"
>The cowardice of Brave&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://openlibrary.org/works/OL19744680W/Ten_arguments_for_deleting_your_social_media_accounts_right_now?ref=localhost" target="_blank" rel="noopener"
>Ten arguments for deleting your Social Media account right now&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://news.ycombinator.com/item?id=18734999&amp;amp;ref=localhost" target="_blank" rel="noopener"
>Brave taking Cryptocurrency donations &amp;ldquo;for me&amp;rdquo; without my consent&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>How to run Spark 3.0 applications on your GPU</title><link>https://blog.sparker0i.me/run-spark-3-applications-on-gpu/</link><pubDate>Sat, 19 Sep 2020 03:44:00 +0000</pubDate><guid>https://blog.sparker0i.me/run-spark-3-applications-on-gpu/</guid><description>&lt;img src="https://blog.sparker0i.me/run-spark-3-applications-on-gpu/661c08139bb70e9dac2bfee1.png" alt="Featured image of post How to run Spark 3.0 applications on your GPU" />&lt;p>In one of my previous blog posts, I&amp;rsquo;d mentioned that Spark 3.0 is coming with Native GPU support. A few days after that, Spark 3.0 released on 18th June 2020. While it did release, there were no mentions of how to run your Spark 3.0 code on a GPU anywhere on the internet. &lt;strong>It changes now.&lt;/strong>&lt;/p>
&lt;p>In this post, you&amp;rsquo;ll see the prerequisites for running Spark on GPU on a local machine, as well as all installation instructions.&lt;/p>
&lt;h2 id="prerequisites">Prerequisites
&lt;/h2>&lt;p>To run Spark applications on your GPU, it is recommended that you have an &lt;strong>Nvidia GPU&lt;/strong> of &lt;strong>Pascal Architecture&lt;/strong> or better. This means that you will need an &lt;strong>Nvidia Geforce GTX 1050 or better&lt;/strong>. Other requirements are the same as Apache Spark requirements.&lt;/p>
&lt;p>&lt;em>(PS. I don&amp;rsquo;t have an AMD GPU, so can&amp;rsquo;t really test and confirm whether this will work with it or not, but chances are very slim as you need a tool called&lt;/em> &lt;code>nvidia-smi&lt;/code>, which works only with Nvidia GPUs)&lt;/p>
&lt;p>You will also need to install &lt;a class="link" href="https://spark.apache.org/downloads.html?ref=localhost" target="_blank" rel="noopener"
>Apache Spark 3.0&lt;/a>, &lt;a class="link" href="https://developer.nvidia.com/cuda-downloads?ref=localhost" target="_blank" rel="noopener"
>Nvidia CUDA&lt;/a> on your machine.&lt;/p>
&lt;p>Other than these, you will also need 2 JARs: &lt;a class="link" href="https://mvnrepository.com/artifact/com.nvidia/rapids-4-spark_2.12?ref=localhost" target="_blank" rel="noopener"
>Rapids Accelerator&lt;/a> and &lt;a class="link" href="https://repo1.maven.org/maven2/ai/rapids/cudf/0.15/?ref=localhost" target="_blank" rel="noopener"
>NVIDIA CUDF&lt;/a> (for CUDA 11).&lt;/p>
&lt;p>You will also need a Linux system to run your jobs. This won&amp;rsquo;t work on Windows as CUDF isn&amp;rsquo;t supported on that platform. However, the CUDF team says they will support CUDA Running on WSL 2.0. To get CUDA Running with WSL, you&amp;rsquo;ll need to be a part of the Windows Insider Program.&lt;/p>
&lt;p>You will also need a GPU Discovery script which tells the program the addresses of GPUs available on your system. Fortunately, the Spark repo has a &lt;a class="link" href="https://github.com/apache/spark/blob/master/examples/src/main/scripts/getGpusResources.sh?ref=localhost" target="_blank" rel="noopener"
>GPU discovery script&lt;/a> handy which can be readily used.&lt;/p>
&lt;h2 id="running">Running
&lt;/h2>&lt;p>For Spark 3.0 to recognize that you will be running your jobs on a GPU, you need to pass a few parameters as Spark confs:&lt;/p>
&lt;ul>
&lt;li>&lt;code>spark.rapids.sql.enabled&lt;/code> as &lt;code>true&lt;/code>&lt;/li>
&lt;li>&lt;code>spark.plugins&lt;/code> as &lt;code>com.nvidia.spark.SQLPlugin&lt;/code>&lt;/li>
&lt;li>&lt;code>spark.driver.resource.gpu.discoveryScript&lt;/code> as &lt;The location where you have downloaded the GPU discovery script from above>&lt;/li>
&lt;/ul>
&lt;p>You can either run this with &lt;code>spark-shell&lt;/code> or you can create your own JAR and run it using &lt;code>spark-submit&lt;/code> and then pass these configurations.&lt;/p>
&lt;h2 id="performance">Performance
&lt;/h2>&lt;p>In order to illustrate the performance difference between running your Spark program on a CPU vs GPU, I will be using a very simple program which is very much self explanatory:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">values&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">List&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="kt">Int&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">List&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">5000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">10000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">50000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">100000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">500000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">1000000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">5000000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">10000000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">50000000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">100000000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">500000000&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">1000000000&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">upperBound&lt;/span> &lt;span class="k">&amp;lt;-&lt;/span> &lt;span class="n">values&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">df&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">makeRDD&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">upperBound&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">toDF&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="n">df2&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">makeRDD&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">upperBound&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">toDF&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">df2&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">$&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="n">$&lt;/span>&lt;span class="s">&amp;#34;b&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Spark program for testing performance: CPU vs GPU&lt;/p>
&lt;p>Further, in order to level the playing field between the 2 runs, I&amp;rsquo;m setting certain common configs:&lt;/p>
&lt;ul>
&lt;li>&lt;code>spark.locality.wait&lt;/code> = &lt;code>0s&lt;/code>&lt;/li>
&lt;li>&lt;code>spark.driver.memory&lt;/code> = &lt;code>10G&lt;/code>&lt;/li>
&lt;li>&lt;code>spark.sql.files.maxPartitionBytes&lt;/code> = &lt;code>512 * 1024 * 1024&lt;/code>&lt;/li>
&lt;li>&lt;code>spark.sql.shuffle.partitions&lt;/code> = &lt;code>10&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Here are the specs of the laptop which I used to perform this test:&lt;/p>
&lt;ul>
&lt;li>6-core Intel Core i7-8750H&lt;/li>
&lt;li>16GB DDR4 RAM, 256GB NVME SSD&lt;/li>
&lt;li>8GB Nvidia Geforce RTX 2080 Graphics Card&lt;/li>
&lt;/ul>
&lt;p>Here are two plots showing the &lt;code>upperBound&lt;/code> against time taken:&lt;/p>
&lt;p>chart created with amCharts | amChartschart created with amCharts | amCharts&lt;/p>
&lt;p>As you can see from the graphs above, for very less records - with sizes within a few Megabytes - it is faster on the CPU than on the GPU because of the less time taken to propagate the results.&lt;/p>
&lt;p>But things change for the better, when a high volume of records have to start processing. For very high records, you can see a difference of almost 3x.&lt;/p>
&lt;p>Moreover, for 1000000000 records (the last one), my Spark program crashed when run against the CPU. So the 13 minutes that you see above was until when it was successfully running.&lt;/p>
&lt;h2 id="conclusion">Conclusion
&lt;/h2>&lt;p>To confirm whether your program is running against the GPU or not, you can go to the SQL tab, select your job, and then you will see something like &lt;code>GpuRowToColumnar&lt;/code>, indicating that the job is running against the GPU.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/run-spark-3-applications-on-gpu/661c08139bb70e9dac2bfee1_874ebbca-5a3f-4902-a421-16112adc8d2f.png"
width="1920"
height="1080"
srcset="https://blog.sparker0i.me/run-spark-3-applications-on-gpu/661c08139bb70e9dac2bfee1_874ebbca-5a3f-4902-a421-16112adc8d2f_hu_354b7185493a6435.png 480w, https://blog.sparker0i.me/run-spark-3-applications-on-gpu/661c08139bb70e9dac2bfee1_874ebbca-5a3f-4902-a421-16112adc8d2f_hu_c7a2c3f618c7e370.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>Spark running on GPU&lt;/p>
&lt;p>So if you&amp;rsquo;ve got heavy workloads, try and offload them to the GPU as much as you can :)&lt;/p></description></item><item><title>Cool Spark ML - Part 2: Preprocessing of Data</title><link>https://blog.sparker0i.me/spark-ml-data-preprocessing/</link><pubDate>Sat, 06 Jun 2020 08:02:00 +0000</pubDate><guid>https://blog.sparker0i.me/spark-ml-data-preprocessing/</guid><description>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47.png" alt="Featured image of post Cool Spark ML - Part 2: Preprocessing of Data" />&lt;p>&lt;em>Note: This is the second article of the series: Cool Spark ML. The other parts can be found below:&lt;/em>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.sparker0i.me/spark-machine-learning-knn/" target="_blank" rel="noopener"
>Part 1: K Nearest Neighbours&lt;/a>&lt;/li>
&lt;li>Part 2: Preprocessing of Data (current)&lt;/li>
&lt;/ul>
&lt;p>People who have been performing Machine Learning for quite a long time know that Data Preprocessing is a key step before running any algorithms on the data. In a majority of datasets, you might always find null, or incomplete values. The data would also be inconsistent across columns, which directly affects algorithms using distance measures.&lt;/p>
&lt;p>This is where Data Preprocessing comes in. It is a crucial step which involves cleaning and organizing the data to make it suitable for building models. In other words, if you don&amp;rsquo;t perform Preprocessing, your models may not be accurate.&lt;/p>
&lt;p>While there are quite a lot of articles online about Data Preprocessing in Python, there aren&amp;rsquo;t a lot of them in Spark, or even Scala. In this post, I will be dealing with the ways you can perform Data Preprocessing in Spark on Scala.&lt;/p>
&lt;p>&lt;em>PS. You might be asking why I&amp;rsquo;m dealing with this now when I have actually written KNN in Spark before. The truth is, KNN isn&amp;rsquo;t officially supported inside Spark ML module. What I wrote in the previous article was a top-to-bottom version of KNN performed using Spark. You can also say that I&amp;rsquo;m doing a complete reset of this series 😅&lt;/em>&lt;/p>
&lt;p>Just like always, the codes for all posts in this series will be available on &lt;a class="link" href="https://github.com/Sparker0i/Cool-Spark-ML?ref=localhost" target="_blank" rel="noopener"
>my GitHub repo&lt;/a>.&lt;/p>
&lt;h2 id="types-of-preprocessing-in-spark">Types of Preprocessing in Spark
&lt;/h2>&lt;p>There are two types of preprocessing:&lt;/p>
&lt;ul>
&lt;li>Numeric Data&lt;/li>
&lt;li>Text Data&lt;/li>
&lt;/ul>
&lt;h2 id="numeric-data">Numeric Data
&lt;/h2>&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_013c380e-319f-4422-a230-92cd5dce8c9e.png"
width="744"
height="291"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_013c380e-319f-4422-a230-92cd5dce8c9e_hu_a661649faac3f5a4.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_013c380e-319f-4422-a230-92cd5dce8c9e_hu_12db0115b3c706bb.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="255"
data-flex-basis="613px"
>&lt;/p>
&lt;p>There are three ways you can preprocess numeric data in Spark:&lt;/p>
&lt;ul>
&lt;li>Normalize&lt;/li>
&lt;li>Standardize&lt;/li>
&lt;li>Bucketize&lt;/li>
&lt;/ul>
&lt;p>To illustrate Normalize and Standardize, I&amp;rsquo;ll be using some Scala magic which will generate my points as a Vector. Each vector represents a point in a 3-Dimensional Space.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">points&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="k">&amp;lt;-&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">yield&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nc">Vectors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dense&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">Array&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">))&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="mi">10000&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="o">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mf">1000.0&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">featuresDf&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">points&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">toDF&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;features&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Doing the above results in the following &lt;code>DataFrame&lt;/code>:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_cef59b8a-1ff3-44fe-ab23-93a073b574e3.png"
width="577"
height="508"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_cef59b8a-1ff3-44fe-ab23-93a073b574e3_hu_e44d68fae859d626.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_cef59b8a-1ff3-44fe-ab23-93a073b574e3_hu_6122e23b16f7d93.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="113"
data-flex-basis="272px"
>&lt;/p>
&lt;p>Each element inside Features column represents a point in a 3-D space.&lt;/p>
&lt;h3 id="normalize">Normalize
&lt;/h3>&lt;p>Normalization is the process of mapping numeric data from their original range into a range of 0 to 1. The lowest value of the original range gets value of 0, and the highest gets the value 1. All the other values in the original range will fall between these two.&lt;/p>
&lt;p>This is important because there may be multiple attributes with different ranges. &lt;em>E.g. Salary values may range between 3 and 8+ digit numbers, years in company will be between 1- and 2-digit numbers.&lt;/em> The reason we want to normalize those attributes in a &lt;code>[0,1]&lt;/code> range is so that when algorithms that use distance as a measure, they don&amp;rsquo;t weigh some attributes like salary more heavily than others.&lt;/p>
&lt;p>The formula to convert values in an un-normalized column to a normalized form is given by:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_03103cb8-0d5d-4960-b635-33c1a62ec52c.png"
width="220"
height="88"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_03103cb8-0d5d-4960-b635-33c1a62ec52c_hu_5c8f5f3c3406b51f.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_03103cb8-0d5d-4960-b635-33c1a62ec52c_hu_bf30bc0d48a5c834.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="250"
data-flex-basis="600px"
>&lt;/p>
&lt;p>Normalization Formula&lt;/p>
&lt;p>Where:&lt;/p>
&lt;ul>
&lt;li>&lt;code>x&lt;/code> is the value inside a column to be normalized,&lt;/li>
&lt;li>&lt;code>x(new)&lt;/code> is the normalized value,&lt;/li>
&lt;li>&lt;code>x(min)&lt;/code> is the minimum value of that column, and&lt;/li>
&lt;li>&lt;code>x(max)&lt;/code> is the maximum value of that column&lt;/li>
&lt;/ul>
&lt;p>Working on the &lt;code>featuresDf&lt;/code> created above, we will import &lt;code>MinMaxScaler&lt;/code> from the &lt;code>org.apache.spark.ml.feature&lt;/code> package. We now have to create an instance of the &lt;code>MinMaxScaler&lt;/code>. It will take two parameters: Input column name, and an Output Column name. This object will transform the contents of the input column vectors into a scaled version, and save it into the output column.&lt;/p>
&lt;p>In our case, we will be using our &lt;code>features&lt;/code> column inside &lt;code>featuresDf&lt;/code> as the input column, and our output column will be named &lt;code>sFeatures&lt;/code>. We create the instance in this manner:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">featureScaler&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">MinMaxScaler&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setInputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;features&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setOutputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sfeatures&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Next, we have to &lt;code>fit&lt;/code> the data present in our &lt;code>featuresDf&lt;/code> inside this &lt;code>featureScaler&lt;/code> and later &lt;code>transform&lt;/code> to create the scaled data. This is done using the code below:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">scaledDf&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">featureScaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">featuresDf&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">transform&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">featuresDf&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Transforming original values into normalized ones&lt;/p>
&lt;p>Now, if we have a look at our transformed data:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_58d6eebe-732e-499e-8cb9-08961bd34c03.png"
width="1170"
height="499"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_58d6eebe-732e-499e-8cb9-08961bd34c03_hu_47ff0effba0c7922.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_58d6eebe-732e-499e-8cb9-08961bd34c03_hu_f07a2e91d95b1737.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="234"
data-flex-basis="562px"
>&lt;/p>
&lt;p>Normalized &lt;code>DataFrame&lt;/code>&lt;/p>
&lt;p>You can then use this new &lt;code>sFeatures&lt;/code> to calculate distances among points.&lt;/p>
&lt;h3 id="standardize">Standardize
&lt;/h3>&lt;p>Now, we may have data whose values can be mapped to a bell-shaped curve, or normally distributed but maybe not exactly. With standardization, we map our data and transform it, which has a variance of 1 and/or a mean value of 0. This is done because some machine learning algorithms, like SVM, work better this way.&lt;/p>
&lt;p>Thus, what happens is when we apply standardization, our data is slightly shifted in its shape so that it becomes more normalized, or more like a bell curve. The formula to convert values in a non-standardized column to a standardized form is given by:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_af201ed8-65e8-4341-8861-fde84255b7ea.png"
width="214"
height="87"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_af201ed8-65e8-4341-8861-fde84255b7ea_hu_e9428b7044f5744d.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_af201ed8-65e8-4341-8861-fde84255b7ea_hu_76b46cd750961242.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="245"
data-flex-basis="590px"
>&lt;/p>
&lt;p>Standardization Formula&lt;/p>
&lt;p>Where:&lt;/p>
&lt;ul>
&lt;li>&lt;code>x&lt;/code> is the value to be standardized&lt;/li>
&lt;li>&lt;code>x(new)&lt;/code> is the standardized value&lt;/li>
&lt;li>&lt;code>μ&lt;/code> is the mean of the column&lt;/li>
&lt;li>&lt;code>σ&lt;/code> is the standard deviation of the column.&lt;/li>
&lt;/ul>
&lt;p>Again, we will be using the &lt;code>featuresDf&lt;/code> created above. We will import &lt;code>StandardScaler&lt;/code> from the &lt;code>org.apache.spark.ml.feature&lt;/code> package. Just like &lt;code>MinMaxScaler&lt;/code>, an instance of &lt;code>StandardScaler&lt;/code> will require an input column and an output column. In our case, we will still continue with &lt;code>features&lt;/code> and &lt;code>sFeatures&lt;/code>. We will then &lt;code>fit&lt;/code> the data inside the scaler and later &lt;code>transform&lt;/code> the data. I&amp;rsquo;ve combined both these steps into a single code snippet:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">featureStandardScaler&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">StandardScaler&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setInputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;features&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setOutputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sfeatures&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setWithStd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setWithMean&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">standardizedDf&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">featureStandardScaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">featuresDf&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">transform&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">featuresDf&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Now if we have a look at our transformed data:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_069f19b3-5a7d-4b8a-bb0f-6875947e17ff.png"
width="1168"
height="495"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_069f19b3-5a7d-4b8a-bb0f-6875947e17ff_hu_4df59158823a7545.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_069f19b3-5a7d-4b8a-bb0f-6875947e17ff_hu_86937542ea1a8ac7.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="235"
data-flex-basis="566px"
>&lt;/p>
&lt;p>Standardized Numeric Data&lt;/p>
&lt;p>Wait, weren&amp;rsquo;t the values supposed to be scaled within the range of &lt;code>[-1, 1]&lt;/code>? Well, that&amp;rsquo;s the surprise associated with the &lt;code>StandardScaler&lt;/code>. It uses the unbiased sample standard deviation instead of the population standard deviation.&lt;/p>
&lt;p>In other words, while the standard deviation will be 1 (or very close to 1), the mean may not be necessarily 0. To scale your data in a way that the range of numbers is between &lt;code>[-1,1]&lt;/code> and the standard deviation is 1 and mean 0, you will have to follow &lt;a class="link" href="https://stackoverflow.com/a/51755387/2451763?ref=localhost" target="_blank" rel="noopener"
>this accepted StackOverflow answer&lt;/a>. Even otherwise with this process, the data has been standardized.&lt;/p>
&lt;h3 id="bucketize">Bucketize
&lt;/h3>&lt;p>Bucketization is done when we have to organize continuous ranges of data into different buckets. &lt;code>Bucketizer&lt;/code> allows us to group data based on boundaries, so a list of boundaries has to be provided. I will call it &lt;code>splits&lt;/code> with the domain of all buckets when added looks like: &lt;code>{(-∞, -500.0) ⋃ [-500.0, -100.0) ⋃ [-100.0, -10.0) ⋃ [-10.0, 0.0) ⋃ [0.0, 10.0) ⋃ [10.0, 100.0) ⋃ [100.0, 500.0) ⋃ [500.0, ∞)}&lt;/code>.&lt;/p>
&lt;p>Then I&amp;rsquo;ll generate 1000 random points that fall in the range of &lt;code>[-10000.0, 10000.0]&lt;/code> and save it in a &lt;code>DataFrame&lt;/code> with column name as &lt;code>features&lt;/code>. This is done using the below code:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">splits&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Array&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">Float&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nc">NegativeInfinity&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mf">500.0&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mf">100.0&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mf">10.0&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mf">0.0&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mf">10.0&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mf">100.0&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mf">500.0&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nc">Float&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nc">PositiveInfinity&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">bucketData&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="k">for&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="k">&amp;lt;-&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="mi">10000&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">yield&lt;/span> &lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">10000.0&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">bucketDf&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">bucketData&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">toDF&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;features&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Now, our &lt;code>Bucketizer&lt;/code> needs three inputs: the splits, input column name, and output column name. Then I&amp;rsquo;ll &lt;code>transform&lt;/code> that data which would then give me the element and which bucket it belongs to:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">bucketizer&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">Bucketizer&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setSplits&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">splits&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setInputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;features&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setOutputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;bfeatures&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">bucketedDf&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">bucketizer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">transform&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">bucketDf&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Notice that I didn&amp;rsquo;t have to do a &lt;code>fit&lt;/code> operation before doing a &lt;code>transform&lt;/code>. This is because Bucketizing is fairly simple and you only need to find which bucket a number belongs to. Thus, there are no operations like scaling which happened in the other 2 sections, and hence you don&amp;rsquo;t need to &lt;code>fit&lt;/code> your data. Now if we have a look at the created &lt;code>DataFrame&lt;/code>:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_0fb28aab-611f-48ed-8abe-1c8794d3c20f.png"
width="298"
height="510"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_0fb28aab-611f-48ed-8abe-1c8794d3c20f_hu_f998aa47506f8847.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_0fb28aab-611f-48ed-8abe-1c8794d3c20f_hu_796a64ef7381ef30.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="58"
data-flex-basis="140px"
>&lt;/p>
&lt;p>Bucketized DataFrame&lt;/p>
&lt;p>Now you might also want to know how many numbers are there in a particular bucket. So, I will do a &lt;code>groupBy&lt;/code> on &lt;code>bFeatures&lt;/code> column and retrieve the count of occurrences. The following code does that and displays my generated data:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_5ae7705a-2089-45b7-8f55-be6804bdda60.png"
width="160"
height="231"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_5ae7705a-2089-45b7-8f55-be6804bdda60_hu_ec9c2eab740d4bf2.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_5ae7705a-2089-45b7-8f55-be6804bdda60_hu_7949b11a7e5f43a8.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="69"
data-flex-basis="166px"
>&lt;/p>
&lt;p>Fairly easy, isn&amp;rsquo;t it?&lt;/p>
&lt;h2 id="text">Text
&lt;/h2>&lt;p>There are two ways in which you can preprocess text-based data in Spark:&lt;/p>
&lt;ul>
&lt;li>Tokenize&lt;/li>
&lt;li>TF-IDF&lt;/li>
&lt;/ul>
&lt;p>To illustrate both of them, I will be using &lt;code>sentencesDf&lt;/code> created using this code:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">sentencesDf&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="nc">Seq&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;This is an introduction to Spark ML&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;MLLib includes libraries for classification and regression&amp;#34;&lt;/span>&lt;span class="o">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;It also contains supporting tools for pipelines&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">).&lt;/span>&lt;span class="n">toDF&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;sentence&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="tokenize">Tokenize
&lt;/h3>&lt;p>In tokenization, you map your string containing a sentence into a set of tokens, or words. As an Example, the sentence &lt;em>&amp;ldquo;This is an introduction to Spark ML&amp;rdquo;&lt;/em> can be mapped into a list of 7 words - &lt;code>{This, is, an, introduction, to, Spark, ML}&lt;/code>.&lt;/p>
&lt;p>We will first import &lt;code>Tokenizer&lt;/code> from the &lt;code>org.apache.spark.ml.feature&lt;/code> package. Now an instance of this will need two parameters - input column and output column. Our input will be &lt;code>sentence&lt;/code> and the output will be &lt;code>words&lt;/code>, because that is what the &lt;code>Tokenizer&lt;/code> will produce. Then we will apply &lt;code>transform&lt;/code> on the sentences above.&lt;/p>
&lt;p>Now, just like bucketing, we are not &lt;code>fit&lt;/code>ting any data here. &lt;code>Tokenizer&lt;/code> already knows its job - Split strings into the separate words. The above process is illustrated in the code below:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">sentenceToken&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">Tokenizer&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setInputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;sentence&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setOutputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;words&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">sentenceTokenizedDf&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">sentenceToken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">transform&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sentencesDf&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Now, if we have a look at our data:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_34e46d62-61a0-4814-aa63-461ded227671.png"
width="1195"
height="164"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_34e46d62-61a0-4814-aa63-461ded227671_hu_92a327a34d5cae14.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_34e46d62-61a0-4814-aa63-461ded227671_hu_8584960d546cd83a.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="728"
data-flex-basis="1748px"
>&lt;/p>
&lt;p>The &lt;code>words&lt;/code> column contains lists of words that have been broken up in the ways you would expect a regular expression pattern matching to break up a sentence into words - based on white space, punctuation, etc.&lt;/p>
&lt;p>Easy, isn&amp;rsquo;t it?&lt;/p>
&lt;h3 id="term-frequency-inverse-document-frequency-tf-idf">Term Frequency-Inverse Document Frequency (TF-IDF)
&lt;/h3>&lt;p>Here we map text from a single, typically long string, to a vector, indicating the frequency of each word in a text relative to a group of texts such as a corpus. This transformation is widely used in text classification.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_932f49cd-4e0a-403b-918d-968c1151c804.png"
width="820"
height="433"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_932f49cd-4e0a-403b-918d-968c1151c804_hu_23ab18036869a4d7.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_932f49cd-4e0a-403b-918d-968c1151c804_hu_e2319ff2c75b6f56.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="189"
data-flex-basis="454px"
>&lt;/p>
&lt;p>TF-IDF captures the intuition that infrequently used words are more useful for distinguishing categories of text than frequently used words. Considering the above figure as an example, &lt;em>Normalizing&lt;/em> appears only once, &lt;em>to&lt;/em> appears twice and so on. Like this, we go through all the documents in our corpus, which is nothing but a collection of documents. Then we count up how often a term appears across all of the documents. In this example &lt;em>normalizing&lt;/em> is a very rare word. Whereas other words like &lt;em>maps, data&lt;/em> and &lt;em>to&lt;/em> show up more frequently. We use these two sets of counts and feed those two into the term frequency-inverse document frequency calculation. And that gives us our TF-IDF measures.&lt;/p>
&lt;p>I will use the same &lt;code>sentenceTokenizedDf&lt;/code> created above for this exercise as well. Just like other processes mentioned above, we will need to import a few things from &lt;code>org.apache.spark.ml.feature&lt;/code> package - &lt;code>HashingTF&lt;/code> (for hashing Term Frequency), &lt;code>IDF&lt;/code> (for Inverse Document Frequency), &lt;code>Tokenizer&lt;/code>.&lt;/p>
&lt;p>First, I will create a &lt;code>HashingTF&lt;/code> instance - which takes an input column (&lt;code>words&lt;/code>), an output column (&lt;code>rawFeatures&lt;/code>) and the number of features to keep track of (&lt;code>20&lt;/code>) as the parameters. Now we apply our &lt;code>transform&lt;/code>ation on this and get a new &lt;code>DataFrame&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">hashingTF&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">HashingTF&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setInputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;words&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setOutputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;rawFeatures&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setNumFeatures&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">sentenceHashingFunctionTermFrequencyDf&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">hashingTF&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">transform&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sentenceTokenizedDf&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sentenceHashingFunctionTermFrequencyDf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Now if we have a look at our data, it has added an extra column which is of &lt;code>Vector&lt;/code> type. It has mapped each word to an index, so for example, &lt;em>this&lt;/em> maps to 1, &lt;em>is&lt;/em> maps to 4, &lt;em>an&lt;/em> -&amp;gt; 5, and so on.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_5a42bed0-8330-4ea2-9c07-50730eacf3d8.png"
width="1688"
height="154"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_5a42bed0-8330-4ea2-9c07-50730eacf3d8_hu_dc939f94e76812db.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_5a42bed0-8330-4ea2-9c07-50730eacf3d8_hu_c57048eb454f7550.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="1096"
data-flex-basis="2630px"
>&lt;/p>
&lt;p>Now we&amp;rsquo;re going to scale the &lt;code>rawFeatures&lt;/code> vector values and we&amp;rsquo;re going to scale them based on how often the words appear in the entire collection of sentences. To do this we&amp;rsquo;re going to create an &lt;code>IDF&lt;/code> instance. Again, we have to specify an input column (&lt;code>rawFeatures&lt;/code>) and an output column (&lt;code>idfFeatures&lt;/code>) as parameters.&lt;/p>
&lt;p>Let&amp;rsquo;s use the term frequency data we just calculated to &lt;code>fit&lt;/code> the inverse document frequency model. And to do that I&amp;rsquo;m going to create an &lt;code>idfModel&lt;/code>, and we&amp;rsquo;re going to call the &lt;code>idf&lt;/code> object I just created, and I&amp;rsquo;m going to fit it using our term frequency data. Then we apply the IDF &lt;code>transform&lt;/code>ation to create a new &lt;code>DataFrame&lt;/code> that has both the term frequency and the inverse document frequency transformations applied.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">idf&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nc">IDF&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setInputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;rawFeatures&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">setOutputCol&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;idfFeatures&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">idfModel&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">idf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sentenceHashingFunctionTermFrequencyDf&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="n">tfIdfDf&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">idfModel&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">transform&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sentenceHashingFunctionTermFrequencyDf&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Now if we have a look at our data (I&amp;rsquo;m selecting only the &lt;code>rawFeatures&lt;/code> and &lt;code>idfFeatures&lt;/code> columns to fit in the screen):&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_14c44800-1c47-461b-84cf-084d26a3606a.png"
width="1871"
height="159"
srcset="https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_14c44800-1c47-461b-84cf-084d26a3606a_hu_ab78ff15b2aad54.png 480w, https://blog.sparker0i.me/spark-ml-data-preprocessing/661c082397510b44fe969e47_14c44800-1c47-461b-84cf-084d26a3606a_hu_b8b1bede67a8fffe.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="1176"
data-flex-basis="2824px"
>&lt;/p>
&lt;p>Now we have a new column which contains the inverse document frequency features. These are measures of each word relative to how frequently they occur in the entire corpus. In our case our corpus is just three sentences.&lt;/p>
&lt;h2 id="conclusion">CONCLUSION
&lt;/h2>&lt;p>Preprocessing is indeed a tough challenge where you will have to know what kinds of data you might get and what kinds of processing you want to apply on your data. If not done properly, your machine learning models might not be of much use.&lt;/p></description></item><item><title>My journey to 10k post views on LinkedIn</title><link>https://blog.sparker0i.me/journey-10k-post-views-linkedin/</link><pubDate>Mon, 18 May 2020 19:02:45 +0000</pubDate><guid>https://blog.sparker0i.me/journey-10k-post-views-linkedin/</guid><description>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e.png" alt="Featured image of post My journey to 10k post views on LinkedIn" />&lt;p>&amp;ldquo;Going Viral&amp;rdquo; and &amp;ldquo;Trending&amp;rdquo; are probably two words which are a big deal in today&amp;rsquo;s world and use networking platforms to connect and grow.&lt;/p>
&lt;p>It&amp;rsquo;s an even bigger deal for a software developer like me who just started a career almost 1.5 years back. I would have never thought that one of my posts on LinkedIn would ever be trending.&lt;/p>
&lt;p>But it has happened, and here I am putting out my story.&lt;/p>
&lt;h2 id="how-did-i-perform-on-linkedin-earlier">How did I perform on LinkedIn earlier?
&lt;/h2>&lt;p>Before May 2020 started, I used to have around 200 connections. Whenever I used to share something on my LinkedIn profile, it would mostly go unnoticed.&lt;/p>
&lt;p>Views would never cross the double-digit mark. Likes were usually single digit numbers, if not 0. 0 Comments. Period.&lt;/p>
&lt;p>Whereas, the people I was following, had a lot of likes and comments on their posts. When I had a look at their posts, their content was very well structured. Their posts were written as if they were telling a story. Then I realized they used to like and comment on these posts because they were able to relate themselves to it.&lt;/p>
&lt;p>Later, when I had a look at my posts on LinkedIn, they never had content. They used to be mostly reshares of someone else&amp;rsquo;s content. You can see a few examples below, along with the view count of that post:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_f2fc9696-7a54-476b-b903-fcebd9fc6270.png"
width="551"
height="743"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_f2fc9696-7a54-476b-b903-fcebd9fc6270_hu_ab0aeee8e7b0f587.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_f2fc9696-7a54-476b-b903-fcebd9fc6270_hu_f392fbf8239af98b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_312cd67a-021d-48df-9eef-6abfba4b1e3b.png"
width="552"
height="650"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_312cd67a-021d-48df-9eef-6abfba4b1e3b_hu_9e6d177b7a0dff58.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_312cd67a-021d-48df-9eef-6abfba4b1e3b_hu_1626f276c0f96499.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="84"
data-flex-basis="203px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_673ea854-8919-4610-9a1b-c621b761807e.png"
width="550"
height="728"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_673ea854-8919-4610-9a1b-c621b761807e_hu_15ce5b45df4cd84c.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_673ea854-8919-4610-9a1b-c621b761807e_hu_cd10a6565c54e8df.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="181px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_249bb93a-9554-4e5e-a533-9914337a3639.png"
width="554"
height="572"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_249bb93a-9554-4e5e-a533-9914337a3639_hu_d238e2457c793a12.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_249bb93a-9554-4e5e-a533-9914337a3639_hu_bbade47ba94116b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="96"
data-flex-basis="232px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_a9c1a2b3-6807-4016-823c-9cf24d65ef61.png"
width="550"
height="405"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_a9c1a2b3-6807-4016-823c-9cf24d65ef61_hu_2e2371de8e8e17f8.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_a9c1a2b3-6807-4016-823c-9cf24d65ef61_hu_e57d96b87d4f45e9.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="135"
data-flex-basis="325px"
>&lt;/p>
&lt;h2 id="what-triggered-a-change">What triggered a change?
&lt;/h2>&lt;p>Around March 2020, I saw an amazing article on a website which gave a glimpse on the new features coming to Spark 3.0 (You can find that post &lt;a class="link" href="https://towardsdatascience.com/glimpse-into-spark-3-0-early-access-c1854327d6c?ref=localhost" target="_blank" rel="noopener"
>here&lt;/a>). This time around, while sharing this post on LinkedIn, I decided to put in my thoughts on what I felt about the release of Spark 3. Find this post below:&lt;/p>
&lt;p>This was the first time the View count on any of my posts stepped into the triple-figure mark. This was also the first time the Reaction count on my posts touched 5 (the previous best at this point was 3, as shown in the screenshot above).&lt;/p>
&lt;p>Because there&amp;rsquo;s always a first time for everything ;)&lt;/p>
&lt;p>This was the time I realized that if I put my thoughts on what I felt about something, I would surely gain more views and likes. I definitely wanted to grow more on LinkedIn and realized that I had to put my content in a better way that people don&amp;rsquo;t find crowded. (That embedded post above had only 1 paragraph which felt cluttered).&lt;/p>
&lt;h2 id="the-guru">The Guru
&lt;/h2>&lt;p>Around a month later, I saw one of my connections, Vaibhav Sisinty commenting on people&amp;rsquo;s posts about his 5-Day LinkedIn workshop. That&amp;rsquo;s not just once. I saw his comments on multiple people&amp;rsquo;s posts.&lt;/p>
&lt;p>While reading the posts, I actually felt that this isn&amp;rsquo;t promotion going on. People are telling their experiences out of the workshop. People were telling the steps they executed and were also showing the results they achieved.&lt;/p>
&lt;p>The cost of the workshop was a measly Rs. 500. It isn&amp;rsquo;t a huge amount where we would have to empty our pockets to grow. I actually contemplated on whether to join his workshop or not a lot. I was in a dilemma because I was just another (inexperienced) software developer on LinkedIn, amongst 1000s of others. I also had other thoughts on my mind - whether this will workshop will help me as a software developer or not.&lt;/p>
&lt;p>Then I took a leap of faith&amp;hellip; and joined his 5-Day LinkedIn Workshop.&lt;/p>
&lt;h2 id="the-workshop">The workshop
&lt;/h2>&lt;p>I was a part of Batch 3 of his workshop, which ran from 5th-11th May. In short, the content of the workshop was divided into a few parts, each taken over a period of 5 days (actually 6, because he gave one extra day off to complete one of the tasks):&lt;/p>
&lt;ul>
&lt;li>Understanding Target Audience&lt;/li>
&lt;li>Optimizing LinkedIn profile&lt;/li>
&lt;li>Connect with the target audience&lt;/li>
&lt;li>Create good content&lt;/li>
&lt;/ul>
&lt;p>The content for each of those points in the workshop was well defined. He had recorded sessions for each of those 5 days, and at 9PM he used to have a Live Q&amp;amp;A session of that day&amp;rsquo;s topic. Despite all of the above, execution is key.&lt;/p>
&lt;p>&amp;ldquo;No Execution, No Results&amp;rdquo;.&lt;/p>
&lt;p>This is one of the golden words Vaibhav used to frequently tell inside his videos and the Facebook and WhatsApp groups {Yes, he used to engage with us on WhatsApp as well ;) }. He would also send reminder emails (I guess he sent around 50-70 such mails) to me (and I guess each participant).&lt;/p>
&lt;h2 id="the-content-boom">The content boom
&lt;/h2>&lt;p>Ever since the workshop, I posted few contents, whose views and Reaction count were significantly higher than any of my previous posts. Have a look at the two screenshots below:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_aac13273-f1b6-4b27-be17-bc4fddb02c25.png"
width="553"
height="549"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_aac13273-f1b6-4b27-be17-bc4fddb02c25_hu_30d52020b9e08996.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_aac13273-f1b6-4b27-be17-bc4fddb02c25_hu_cb55143c07e343a9.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="241px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_225549e6-79b8-4578-9a8c-e74b17a38cd5.png"
width="496"
height="859"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_225549e6-79b8-4578-9a8c-e74b17a38cd5_hu_82924a23db9dbe96.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_225549e6-79b8-4578-9a8c-e74b17a38cd5_hu_1e898b0a9d5e046d.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="57"
data-flex-basis="138px"
>&lt;/p>
&lt;p>Views and Reaction count on my posts after executing the contents of the workshop&lt;/p>
&lt;p>At least 3x the usual reaction counts and 5-8x views of my posts. I was definitely improving in my LinkedIn game.&lt;/p>
&lt;p>Profile views and search appearances were up as well:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_0815abb9-ffb1-469d-bbeb-f09559201b7b.png"
width="838"
height="354"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_0815abb9-ffb1-469d-bbeb-f09559201b7b_hu_ac2632900d50a9ea.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_0815abb9-ffb1-469d-bbeb-f09559201b7b_hu_1b6d89eff04f722b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="236"
data-flex-basis="568px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_adcdb721-be59-4492-be3a-46de7de6eb3c.png"
width="835"
height="331"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_adcdb721-be59-4492-be3a-46de7de6eb3c_hu_723a5ce5e1051b7d.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_adcdb721-be59-4492-be3a-46de7de6eb3c_hu_8aab1d69a1ede31c.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="252"
data-flex-basis="605px"
>&lt;/p>
&lt;p>Profile views after executing contents of the workshop&lt;/p>
&lt;p>Then came the blockbuster. On May 15th 2020 at around 10:15pm, I put up a post on LinkedIn regarding native GPU support for Spark. This was a recent news, and Spark was something I&amp;rsquo;m working on at my workplace. Posting my thoughts on that news definitely made sense. Have a look at that post below:&lt;/p>
&lt;p>This was the post where I&amp;rsquo;ve got the best results on inside LinkedIn. Look at the counts below. These numbers are insane for a software developer who had just started out his career:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_3d403e88-0170-4760-a586-1acfd560151b.png"
width="553"
height="139"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_3d403e88-0170-4760-a586-1acfd560151b_hu_ec475b48757eb7d2.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_3d403e88-0170-4760-a586-1acfd560151b_hu_7a609d1e3f523dfb.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="397"
data-flex-basis="954px"
>&lt;/p>
&lt;p>View and Reaction count for the above post&lt;/p>
&lt;p>Oh yes, and the &amp;ldquo;Trending on LinkedIn&amp;rdquo; happened as well, 2.5 days after putting up that post:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_e79bc1dc-4722-4547-beaf-d7abd0df817d.png"
width="604"
height="111"
srcset="https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_e79bc1dc-4722-4547-beaf-d7abd0df817d_hu_77a6e5700918b55f.png 480w, https://blog.sparker0i.me/journey-10k-post-views-linkedin/661c08335ae500253ce7927e_e79bc1dc-4722-4547-beaf-d7abd0df817d_hu_9e82f1bd0d30398a.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="544"
data-flex-basis="1305px"
>&lt;/p>
&lt;p>The Trending part&lt;/p>
&lt;p>Couldn&amp;rsquo;t expect more for myself.&lt;/p>
&lt;h2 id="conclusion">Conclusion
&lt;/h2>&lt;p>While I did start to see great numbers after executing contents in the workshop, complacency isn&amp;rsquo;t allowed. The workshop contents are supposed to be executed for long (unless LinkedIn detects you are a Super User and stops you from executing for the rest of the day).&lt;/p>
&lt;p>Vaibhav&amp;rsquo;s workshop is a great place to get started whoever you are - from an entry level Software Developer, to a Digital Marketer, to someone finding the next job - this workshop is for everyone who wants to improve their LinkedIn profile.&lt;/p>
&lt;p>Do visit &lt;a class="link" href="https://www.linkedin.com/in/vaibhavsisinty/?ref=localhost" target="_blank" rel="noopener"
>Vaibhav&amp;rsquo;s profile on LinkedIn&lt;/a>.&lt;/p>
&lt;p>Until another post, ciao.&lt;/p>
&lt;p>&lt;em>(PS. Not a promotional post. These are definitely my experiences out of this workshop. You can see the results for yourselves)&lt;/em>&lt;/p></description></item><item><title>Spark 3.0 adds native GPU integration: Why that matters?</title><link>https://blog.sparker0i.me/spark-3-native-gpu-integration/</link><pubDate>Sat, 16 May 2020 18:01:34 +0000</pubDate><guid>https://blog.sparker0i.me/spark-3-native-gpu-integration/</guid><description>&lt;img src="https://blog.sparker0i.me/spark-3-native-gpu-integration/661c08375610fb416dbc1887.png" alt="Featured image of post Spark 3.0 adds native GPU integration: Why that matters?" />&lt;p>You can soon run your Apache Spark programs natively on your GPU. This became possible thanks to collaboration between Nvidia and Databricks. At the GPU Technology Conference, both the companies have presented a solution that brings GPU Acceleration to Spark 3.0 without major code changes.&lt;/p>
&lt;h2 id="how-things-were-before">How things were before?
&lt;/h2>&lt;p>GPU based solutions have existed for Spark for a long time, so what has changed?&lt;/p>
&lt;p>Such GPU integrations into Spark were provided by either third party libraries in Java/Scala, or you had to depend on Cloud Providers which would provide such an infrastructure to run Spark on GPU. Also, programs would usually be restricted to applications based on Spark ML, thus they generally couldn&amp;rsquo;t be applied to other Big Data uses on Scale.&lt;/p>
&lt;p>When it comes to Spark/Python, you had to use custom tools like Horovod, which would also end up using popular Python based libraries like Numpy and Tensorflow. Thus, this approach severely limits the performance of the Spark Programs due to the nature of Python, where programs are dynamically interpreted.&lt;/p>
&lt;p>Don&amp;rsquo;t get me wrong, Python has its very own unique use-cases which Scala doesn&amp;rsquo;t provide (yet), but because Spark was built to do Big Data operations effectively, Python severely restricts the performance.&lt;/p>
&lt;h2 id="what-happened-now">What happened now?
&lt;/h2>&lt;p>With the release of Spark 3.0, native GPU based acceleration will be provided within Spark. This acceleration is based on the open source &lt;a class="link" href="https://www.anrdoezrs.net/links/9041660/type/dlg/sid/zd-ad14a02e5d404bd4822065953dda157b--%7Cxid:fr1589641152241fef/https://developer.nvidia.com/rapids?ref=localhost" target="_blank" rel="noopener"
>RAPIDS&lt;/a> suite of software libraries, Nvidia built on &lt;a class="link" href="https://www.anrdoezrs.net/links/9041660/type/dlg/sid/zd-ad14a02e5d404bd4822065953dda157b--%7Cxid:fr1589641152241dce/https://developer.nvidia.com/machine-learning?ref=localhost" target="_blank" rel="noopener"
>CUDA-X AI&lt;/a>. This will allow developers to run Spark code without any modifications on GPUs - thereby alleviating load off the CPU.&lt;/p>
&lt;p>This also benefits Spark SQL and &lt;code>DataFrame&lt;/code> operations, thereby making the GPU acceleration benefits available for non-Machine Learning workloads as well. This will also bring capabilities where we don&amp;rsquo;t have to provision a dedicated Spark Cluster for AI and ML based jobs.&lt;/p>
&lt;p>In an advanced briefing for members of the press, NVidia CEO Jensen Huang explained that users of Spark clusters on &lt;a class="link" href="https://click.linksynergy.com/deeplink?id=IokOf8qagZo&amp;amp;mid=24542&amp;amp;u1=zd-ad14a02e5d404bd4822065953dda157b--%7Cxid%3Afr1589641152241ghb&amp;amp;murl=https%3A%2F%2Fazure.microsoft.com%2Fservices%2Fmachine-learning%2F&amp;amp;ref=localhost" target="_blank" rel="noopener"
>Azure Machine Learning&lt;/a> or &lt;a class="link" href="https://aws.amazon.com/sagemaker/?ref=localhost" target="_blank" rel="noopener"
>Amazon SageMaker&lt;/a> can benefit from the GPU acceleration as well. This means that the infrastructure is already in place, it is now upon other cloud providers to provide the necessary infrastructure, and upon developers to adopt and build their workloads to the new changes.&lt;/p>
&lt;h2 id="adobe--spark-gpu-acceleration">Adobe + Spark GPU Acceleration
&lt;/h2>&lt;p>Adobe and Nvidia had signed a &lt;a class="link" href="https://news.adobe.com/news/news-details/2018/Adobe-and-NVIDIA-Announce-Partnership-to-Deliver-New-AI-Services-for-Creativity-and-Digital-Experiences/default.aspx?ref=localhost" target="_blank" rel="noopener"
>deal&lt;/a> in 2018 where they will utilize Nvidia&amp;rsquo;s AI capabilities for their solutions. Building upon this deal, Adobe has been an early adopter for this new GPU Acceleration on Spark, and they have shown a 7x improvement in performance of their workloads, while saving up to 90% of the costs.&lt;/p>
&lt;p>These are serious numbers. Imagine, if a company as huge as Adobe is able to bring down costs while improving performance, other companies too can follow suit and we could see Profits and Performance for everyone. Period.&lt;/p>
&lt;h2 id="conclusion">Conclusion
&lt;/h2>&lt;p>Imagine how game changing this can prove to be for the Big Data community overall. No longer will we have to wait for operations to complete when we can utilize the GPU, we have on our local Gaming PCs and laptops. We will also be able to utilize GPU servers on Cloud for Spark without doing major changes.&lt;/p>
&lt;p>This can also encourage many people to start using Scala for AI and Machine Learning instead of Python. While I do realize that there are no major visualization libraries supporting Spark available in Scala, an encouragement to do machine learning with Spark shall bring more enthusiasm for Scala, due to the disadvantages I mentioned for Python above. This in turn will lead to a growth in the Scala community, which will further result in availability of more and more libraries.&lt;/p>
&lt;p>For now, there is a Scala visualization library that supports Spark, in active development, which when released to MVN Repository could be a game changer. Head over to &lt;a class="link" href="https://github.com/MarkCLewis/SwiftVis2?ref=localhost" target="_blank" rel="noopener"
>SwiftViz2&amp;rsquo;s GitHub repo&lt;/a> for more info. You can place safe bets on this one :)&lt;/p>
&lt;p>In short, this is a win-win situation for everyone involved in this ecosystem.&lt;/p>
&lt;p>Until another blog post, Ciao.&lt;/p>
&lt;h2 id="sources">SOURCES
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.zdnet.com/article/nvidia-and-databricks-announce-gpu-acceleration-for-spark-3-0/?ref=localhost" target="_blank" rel="noopener"
>ZdNet&lt;/a>, &lt;a class="link" href="https://nvidianews.nvidia.com/news/nvidia-accelerates-apache-spark-worlds-leading-data-analytics-platform?ref=localhost" target="_blank" rel="noopener"
>Nvidia Newsroom&lt;/a>&lt;/p></description></item><item><title>Tail Recursion: Why and How-to Use in Scala</title><link>https://blog.sparker0i.me/tail-recursion-scala-why-how-to/</link><pubDate>Thu, 07 May 2020 19:45:00 +0000</pubDate><guid>https://blog.sparker0i.me/tail-recursion-scala-why-how-to/</guid><description>&lt;img src="https://blog.sparker0i.me/tail-recursion-scala-why-how-to/661c083cdbf837e5981954ca.png" alt="Featured image of post Tail Recursion: Why and How-to Use in Scala" />&lt;p>In the below code, I have written a recursive function that multiplies all the natural numbers up to the number passed as a parameter to the function. As you might have guessed, this is nothing but computing the factorial of a particular number.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">BigInt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Recursive Factorial Program&lt;/p>
&lt;p>Let us see how this function is being executed as a whole assuming we executed &lt;code>recursiveProd(5)&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">5&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">120&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>From above, each recursive call has to be completed first before the actual work of calculating the product begins. Each recursive call saves the current state, and proceeds to call the next recursive function. This happens repeatedly until the base case is reached. In between, you might also encounter the Stack Overflow error.&lt;/p>
&lt;p>So, in each step you execute 2 steps, retrieve the current value and the value from the next stage (as a recursive call), and then multiply them. Subsequent recursive calls will do the same. If you can visualize this correctly, you will notice this recursive call was completed in &lt;strong>14 computations&lt;/strong> (4 multiplications, 5 recursive calls, 5 returning values), with computations happening in each step.&lt;/p>
&lt;h3 id="tail-recursion">Tail Recursion
&lt;/h3>&lt;p>Now let’s consider Tail Recursion. In Tail Recursion, all the processing related to the recursive function must finish before the recursive call takes place. This means that &lt;strong>if a function is tail-recursive, the last action is a call to itself&lt;/strong>.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="n">tailRecursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">currentTotal&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">BigInt&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">BigInt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">currentTotal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">tailRecursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">currentTotal&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>In this scenario, despite there being a multiplication operation, it happens when the argument is passed to the next recursive call. In short, we send the current state of the recursive call to the next state, and the same process will be repeated until the base case is reached. Let us see how this is executed:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="mi">120&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">120&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>In this way, we can save up additional stack memory which would&amp;rsquo;ve otherwise be wasted to compute the multiplications at every return step. Thus, this implementation only takes 10 computations (5 recursive calls, 5 returning values). This is equivalent of you using a loop to process the factorial.&lt;/p>
&lt;p>Thus, you should always try and convert your recursive function into a tail recursive function wherever possible.&lt;/p>
&lt;h3 id="tail-recursion-in-scala">Tail Recursion in Scala
&lt;/h3>&lt;p>One good thing about Scala is that it automatically recognizes two types of tail-recursive methods automatically and optimizes them. These types are:&lt;/p>
&lt;ol>
&lt;li>Methods within an &lt;code>object&lt;/code>&lt;/li>
&lt;li>Methods defined as &lt;code>final&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>Sadly, if you write a non-&lt;code>final&lt;/code> tail-recursive function inside a &lt;code>class&lt;/code>, or even a &lt;code>case class&lt;/code>, it will not be automatically optimized by the Scala Compiler because a &lt;code>class&lt;/code> can be &lt;code>extend&lt;/code>ed and these methods can be &lt;code>override&lt;/code>n. Consider my code given below:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">object&lt;/span> &lt;span class="nc">Bm&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">nTailRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="n">nTailRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Bm&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">tailRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="n">tailRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">final&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">tailsRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="n">tailsRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>You can see that all these functions are doing the same task. Now:&lt;/p>
&lt;ol>
&lt;li>Start a Scala REPL (Install Scala on your machine, then type &lt;code>scala&lt;/code> on your command line/terminal and press Enter)&lt;/li>
&lt;li>Type &lt;code>:paste&lt;/code> and press Enter&lt;/li>
&lt;li>Paste the code snippet above&lt;/li>
&lt;li>Press &lt;code>Ctrl-D&lt;/code> to exit the paste mode&lt;/li>
&lt;/ol>
&lt;p>Then, try running &lt;code>Bm.nTailRecursion(60000)&lt;/code> and &lt;code>Bm().tailsRecursion(60000)&lt;/code>. I&amp;rsquo;ve tried that on my current laptop with an Intel i7-8750H processor and 16GB RAM, and both of them worked fine. Now, when you try running &lt;code>Bm().tailRecursion(60000)&lt;/code>, you see a familiar &lt;code>java.lang.StackOverflowError&lt;/code> which usually occurs with recursive function:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/tail-recursion-scala-why-how-to/661c083cdbf837e5981954ca_fb49ff24-b09e-4750-a4a3-655c2362f5bd.png"
width="736"
height="378"
srcset="https://blog.sparker0i.me/tail-recursion-scala-why-how-to/661c083cdbf837e5981954ca_fb49ff24-b09e-4750-a4a3-655c2362f5bd_hu_6b59f2017af88916.png 480w, https://blog.sparker0i.me/tail-recursion-scala-why-how-to/661c083cdbf837e5981954ca_fb49ff24-b09e-4750-a4a3-655c2362f5bd_hu_aa147e143e9b05b8.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="194"
data-flex-basis="467px"
>&lt;/p>
&lt;p>Sure, you could play around with the JVM memory limits and possibly execute this function properly. You must always remember that memory is an intensive resource, and non-availability of memory might crash other programs, as well as your current program.&lt;/p>
&lt;p>Fortunately, Scala provides the &lt;code>@tailrec&lt;/code> annotation to denote that a method is actually tail-recursive. First you will have to import &lt;code>scala.annotation.tailrec&lt;/code> and place that annotation before the function you want to mark as tail-recursive. Place this annotation before &lt;code>tailRecursion()&lt;/code> inside the &lt;code>case class&lt;/code> and now copy-paste inside the REPL and try again. This time it won&amp;rsquo;t throw the dreaded &lt;code>java.lang.StackOverflowError&lt;/code> Exception.&lt;/p>
&lt;h3 id="convert-a-recursive-function-to-a-tail-recursive-function">Convert a recursive function to a tail-recursive function
&lt;/h3>&lt;p>In some cases, you might want to retain the original method&amp;rsquo;s signature (eg. Factorial). This can be done using the following steps:&lt;/p>
&lt;ol>
&lt;li>Create a second function&lt;/li>
&lt;/ol>
&lt;p>Within the &lt;code>recursiveProd&lt;/code> as defined in the first code piece above, we now define another method, &lt;code>cumulativeRecursion&lt;/code> with two parameters: &lt;code>n&lt;/code>, our number and &lt;code>res&lt;/code>, the result of recursion. We retain the algorithm of the first method as is. At this point our new method looks like:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">cumulativeRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>Modify the second method&amp;rsquo;s algorithm&lt;/li>
&lt;/ol>
&lt;p>We will now utilize the accumulator we&amp;rsquo;ve just created, &lt;code>res&lt;/code> and modify the function such that the base case returns the accumulated value and the other case recursively calls the new method again:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">cumulativeRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">res&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="n">cumulativeRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">res&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>Annotate the second method and call the new method&lt;/li>
&lt;/ol>
&lt;p>We will now annotate our new method with &lt;code>@tailrec&lt;/code> as shown earlier and we will now call this method from our original method:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="n">recursiveProd&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@tailrec&lt;/span> &lt;span class="k">def&lt;/span> &lt;span class="n">cumulativeRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">res&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="n">cumulativeRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">res&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cumulativeRecursion&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Hence, you retain your method&amp;rsquo;s original signature, as well as converted it into a tail-recursive call (Though this will add 1 extra stack call to the new function).&lt;/p>
&lt;h3 id="conclusion">CONCLUSION
&lt;/h3>&lt;p>In this post, I have:&lt;/p>
&lt;ul>
&lt;li>Defined Tail Recursion&lt;/li>
&lt;li>Introduced &lt;code>@tailrec&lt;/code> annotation&lt;/li>
&lt;li>Shown a formula to convert a recursive function into a tail-recursive one.&lt;/li>
&lt;/ul>
&lt;p>Hope you have enjoyed this post. Do follow my profiles on &lt;a class="link" href="https://www.linkedin.com/in/sparker0i?ref=localhost" target="_blank" rel="noopener"
>LinkedIn&lt;/a>, &lt;a class="link" href="https://github.com/Sparker0i?ref=localhost" target="_blank" rel="noopener"
>GitHub&lt;/a> and &lt;a class="link" href="https://twiiter.com/Sparker0i?ref=localhost" target="_blank" rel="noopener"
>Twitter&lt;/a>.&lt;/p>
&lt;p>Ciao, until the next post.&lt;/p>
&lt;p>Reference: &lt;a class="link" href="https://alvinalexander.com/scala/fp-book/tail-recursive-algorithms/?ref=localhost" target="_blank" rel="noopener"
>Tail Recursive Algorithms&lt;/a>&lt;/p></description></item><item><title>Cool Spark ML: K Nearest Neighbors</title><link>https://blog.sparker0i.me/spark-machine-learning-knn/</link><pubDate>Sun, 19 Apr 2020 05:41:03 +0000</pubDate><guid>https://blog.sparker0i.me/spark-machine-learning-knn/</guid><description>&lt;img src="https://blog.sparker0i.me/spark-machine-learning-knn/661c0843dbf837e5981954cc.png" alt="Featured image of post Cool Spark ML: K Nearest Neighbors" />&lt;p>&lt;em>Note: This article is the first of the Series: Cool Spark ML. Other parts are coming soon.&lt;/em>&lt;/p>
&lt;p>I had taken up a few machine learning courses in my college throughout 2018. Most of the problems there were solved using Python and the necessary libraries - NumPy, Pandas, Scikit-Learn and Matplotlib. With my daily work at IBM now requiring me to use Scala and Spark, I decided to use my free time during the lockdown to try out Spark ML.&lt;/p>
&lt;p>&lt;em>Note: All the codes in the Cool Spark ML Series will be available on&lt;/em> &lt;a class="link" href="https://github.com/Sparker0i/Cool-Spark-ML?ref=localhost" target="_blank" rel="noopener"
>&lt;em>my GitHub repo&lt;/em>&lt;/a>&lt;/p>
&lt;h3 id="intro-to-spark-ml">Intro to Spark ML
&lt;/h3>&lt;p>As the name suggests, Spark ML is the Machine Learning library consisting of common Machine learning algorithms - classification, regression, clustering etc.&lt;/p>
&lt;h3 id="why-spark-ml">Why Spark ML?
&lt;/h3>&lt;p>Pandas - a Python library - won’t work every time. It is a single machine tool, so it&amp;rsquo;s constrained by the machine&amp;rsquo;s limits. Moreover, pandas doesn’t have any parallelism built in, which means it uses only one CPU core. You may hit a dead-end on datasets of the size of a few gigabytes. Pandas won&amp;rsquo;t help if you want to work on very big datasets.&lt;/p>
&lt;p>We are now in the Big Data era, where gigabytes of data are generated every few seconds. Such datasets will require powerful systems to run even the basic machine learning algorithms. The cost of getting such a powerful system will be huge, as well as the costs to scale them up. With distributed computers, such calculations can be sent to multiple low-end machines, which prevents the cost of getting a single high-end machine.&lt;/p>
&lt;p>This is where Spark kicks in. Spark has the concept of &lt;code>DataFrame&lt;/code> (now deprecated in favor of Datasets), which behaves very similar to how a Pandas &lt;code>DataFrame&lt;/code> would do, including having very similar APIs too. The advantage of using Spark &lt;code>DataFrame&lt;/code> is that it was designed from ground-up to support Big Data. Spark can also distribute such &lt;code>DataFrame&lt;/code>s across multiple machines and collect the calculated results.&lt;/p>
&lt;h3 id="knn-k-nearest-neighbors">KNN: K-Nearest Neighbors
&lt;/h3>&lt;p>The process in KNN is pretty simple. You load your entire dataset first, each of which will have input columns and one output column. This is then split into a training set and a testing set. You then use your training set to train your model, and then use the testing set to predict the output column value by testing it against the model. You then compare the actual and the predicted target values and calculate the accuracy of your model.&lt;/p>
&lt;h3 id="problem-definition">Problem Definition
&lt;/h3>&lt;p>We are going to train a model to predict the famous &lt;a class="link" href="http://archive.ics.uci.edu/ml/datasets/iris?ref=localhost" target="_blank" rel="noopener"
>Iris dataset&lt;/a>. The Iris Flower Dataset involves predicting the flower species given measurements of iris flowers.&lt;/p>
&lt;p>It is a multiclass classification problem. The number of observations for each class is the same. The dataset is small in size with only 150 rows with 4 input variables and 1 output variable.&lt;/p>
&lt;p>The 4 features are described as follows:&lt;/p>
&lt;ol>
&lt;li>Sepal-Length, in cm&lt;/li>
&lt;li>Sepal-Width, in cm&lt;/li>
&lt;li>Petal-Length, in cm&lt;/li>
&lt;li>Petal-Width, in cm&lt;/li>
&lt;/ol>
&lt;h3 id="prerequisites">Prerequisites
&lt;/h3>&lt;ol>
&lt;li>Create a Scala project in IntelliJ IDEA based on SBT&lt;/li>
&lt;li>Select Scala version 2.11.12&lt;/li>
&lt;li>Include &lt;code>spark-core&lt;/code>, &lt;code>spark-sql&lt;/code> and &lt;code>spark-ml&lt;/code> 2.4.5 as library dependencies in your &lt;code>build.sbt&lt;/code>&lt;/li>
&lt;/ol>
&lt;h3 id="knn-steps">KNN Steps
&lt;/h3>&lt;p>In this blog post, I will be developing KNN algorithm from scratch. The process to perform KNN can be broken down into 3 easy steps:&lt;/p>
&lt;ol>
&lt;li>Calculate Euclidean Distance&lt;/li>
&lt;li>Get Nearest Neighbors&lt;/li>
&lt;li>Make Predictions&lt;/li>
&lt;/ol>
&lt;h3 id="step-1-calculate-euclidean-distance">Step 1: Calculate Euclidean Distance
&lt;/h3>&lt;p>The first step will be to calculate the distance between two rows in a Dataset. Rows of data are mostly made up of numbers and an easy way to calculate the distance between two rows or vectors of numbers is to draw a straight line.&lt;/p>
&lt;p>Euclidean Distance is calculated as the square root of the sum of the squared differences between the two vectors, as given in the image below:&lt;/p>
&lt;p>&lt;a class="link" href="https://www.codecogs.com/eqnedit.php?latex=%5Cinline&amp;amp;space%3B%5Cbg_white=&amp;amp;space%3B%7B%5Ccolor%7BRed%7D=&amp;amp;space%3B%24%24dist_%7Bx_1%2Cx_2%7D=&amp;amp;space%3B=&amp;amp;space%3B%5Csqrt%7B%5Csum_%7Bi=0%7D%5E%7BN%7D&amp;amp;space%3B%28%7Bx_1_i=&amp;amp;space%3B-=&amp;amp;space%3Bx_2_i%7D%29%5E2%7D.%24%24%7D=&amp;amp;ref=localhost" target="_blank" rel="noopener"
>&lt;img src="https://latex.codecogs.com/gif.latex?%5Cinline&amp;amp;space;%5Cbg_white&amp;amp;space;%7B%5Ccolor%7BRed%7D&amp;amp;space;$$dist_%7Bx_1,x_2%7D&amp;amp;space;=&amp;amp;space;%5Csqrt%7B%5Csum_%7Bi=0%7D%5E%7BN%7D&amp;amp;space;%28%7Bx_1_i&amp;amp;space;-&amp;amp;space;x_2_i%7D%29%5E2%7D.$$%7D"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>Where &lt;code>x1&lt;/code> is the first row of data, &lt;code>x2&lt;/code> is the second row of data, and &lt;code>i&lt;/code> is a specific index for a column as we sum across all columns. Smaller the value, more similar will be the two rows.&lt;/p>
&lt;p>Since we will be reading our data and transforming it using Spark, to compute distances between two &lt;code>Row&lt;/code>s in a &lt;code>DataFrame&lt;/code>, we write the function below in Scala:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">computeEuclideanDistance&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">row1&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Row&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">row2&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Row&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">Double&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">distance&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">until&lt;/span> &lt;span class="n">row1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">length&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">distance&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">row1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getDouble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">row2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getDouble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sqrt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">distance&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>You can see that the function assumes that the last column in each row is an output value which is ignored from the distance calculation.&lt;/p>
&lt;h3 id="step-2-get-nearest-neighbors">Step 2: Get Nearest Neighbors
&lt;/h3>&lt;p>Neighbors for a new piece of data in the dataset are the k closest instances, as defined by our distance measure. To locate the neighbors for a new piece of data within a dataset we must first calculate the distance between each record in the dataset to the new piece of data. We can do this using our distance function prepared above.&lt;/p>
&lt;p>We can do this by keeping track of the distance for each record in the dataset as a tuple, sort the list of tuples by the distance, and then retrieve the neighbors. The below function does this job in Scala:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">getNeighbours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainSet&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="ne">Array&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">Row&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">testRow&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Row&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">Row&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">distances&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mutable&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">MutableList&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">Row&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Double&lt;/span>&lt;span class="p">)]()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trainSet&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">foreach&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">trainRow&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="n">dist&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">computeEuclideanDistance&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainRow&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">testRow&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trainRow&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dist&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">distances&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">x&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">distances&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">distances&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sortBy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">neighbours&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mutable&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">MutableList&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">Row&lt;/span>&lt;span class="p">]()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">neighbours&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">distances&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">_1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">neighbours&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">toList&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="step-3-make-predictions">Step 3: Make Predictions
&lt;/h3>&lt;p>The most similar neighbors collected from the training dataset can be used to make predictions. In the case of classification, we can return the most represented output value (Class) among the neighbors.&lt;/p>
&lt;p>We would first map the class values to the number of times it appears among the neighbors, then sort the counts in descending order and get the most appeared class value. The below function does exactly that in Scala:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">def predictClassification(trainSet: Array[Row], testRow: Row, k: Int): String =
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> val neighbours = getNeighbours(trainSet, testRow, k)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> val outputValues = for (row &amp;lt;- neighbours) yield row.getString(trainSet(0).length - 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> outputValues.groupBy(identity)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .mapValues(_.size)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .toSeq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .sortWith(_._2 &amp;gt; _._2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .head._1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="apply-the-above-concepts-to-iris-dataset">Apply the above concepts to Iris Dataset
&lt;/h3>&lt;p>We will now apply the concepts above to perform KNN on the Iris Dataset.&lt;/p>
&lt;p>First, we have to load the dataset into the program. This is done using the &lt;code>readCsv&lt;/code> function I&amp;rsquo;ve written below:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">readCsv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fileName&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="ne">String&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">header&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Boolean&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">DataFrame&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">spark&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;csv&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">option&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;header&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">header&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">option&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;inferSchema&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">header&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fileName&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">repartition&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="s2">&amp;#34;Class&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>We also have to normalize the data we have. This is because KNN is based on distance between records. Unless data is normalized distance will be incorrectly calculated, because different attributes will not contribute to the distance in a uniform way. Attributes having a larger value range will have an unduly large influence on the distance, because they make greater contribution to the distance. If the dataset requires that some columns be given a greater preference over others, then normalization isn&amp;rsquo;t recommended, but this is not true in the case of the Iris dataset.&lt;/p>
&lt;p>We use the Z Score Normalization technique. With this, we subtract the mean of the respective column from each cell, and divide that with the standard deviation of that column. &lt;a class="link" href="https://towardsdatascience.com/understand-data-normalization-in-machine-learning-8ff3062101f0?ref=localhost" target="_blank" rel="noopener"
>This&lt;/a> article describes Data Normalization in good detail.&lt;/p>
&lt;p>The following function does our job:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">def normalizeData(): Unit = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> df.columns.filterNot(e =&amp;gt; e == &amp;#34;Class&amp;#34;).foreach{col =&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> val (mean_col, stddev_col) = df.select(mean(col), stddev(col))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .as[(Double, Double)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .first()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> df = df.withColumn(s&amp;#34;$col.norm&amp;#34;, ($&amp;#34;$col&amp;#34; - mean_col) / stddev_col)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .drop(col)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .withColumnRenamed(s&amp;#34;$col.norm&amp;#34;, col)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>As you can see above, we are filtering out the class value, because we will not be using this value to compute the distance. There&amp;rsquo;s one problem with our approach though, our KNN functions written above assume that the class value will be the last column. In the way we&amp;rsquo;ve normalized the data, we are dropping the original column, and adding the normalized column in place. This will push the &lt;code>Class&lt;/code> column to the beginning. So, I&amp;rsquo;ve written another function which will move the column back to where it should actually be:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">def moveClassToEnd(): Unit = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> val cols = df.columns.filterNot(_ == &amp;#34;Class&amp;#34;) ++ Array(&amp;#34;Class&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> df = df.select(cols.head, cols.tail: _*)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>We will evaluate our algorithm using K-fold cross-validation with 5 folds. This means that we will have 150/5 = 30 rows per fold. We will use helper functions &lt;code>evaluateAlgorithm()&lt;/code> and &lt;code>accuracyMetric()&lt;/code> to evaluate the algorithm for cross-validation and calculate the accuracy of our predictions respectively.&lt;/p>
&lt;p>Since Spark does not allow any of its operations inside a Spark transformation, we will have to perform a &lt;code>collect()&lt;/code> on the Train set and Test set &lt;code>DataFrame&lt;/code>s every time before passing it to any function. A sample run with &lt;code>k = 3&lt;/code> produces the following output:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-machine-learning-knn/661c0843dbf837e5981954cc_1316a779-2e73-40a0-aef1-ae450ca01420.png"
width="383"
height="64"
srcset="https://blog.sparker0i.me/spark-machine-learning-knn/661c0843dbf837e5981954cc_1316a779-2e73-40a0-aef1-ae450ca01420_hu_85b7fcfa19312aff.png 480w, https://blog.sparker0i.me/spark-machine-learning-knn/661c0843dbf837e5981954cc_1316a779-2e73-40a0-aef1-ae450ca01420_hu_1740d1c92b4e1874.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="598"
data-flex-basis="1436px"
>&lt;/p>
&lt;p>Let&amp;rsquo;s go one step further and run our program over different values of &lt;code>k&lt;/code>. I&amp;rsquo;m running it for &lt;code>k&lt;/code> from &lt;code>1 to 10&lt;/code>, and here are some results (this may not be the same everytime):&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/spark-machine-learning-knn/661c0843dbf837e5981954cc_cb17fce4-6f7f-4070-8fc0-ff27ece000e4.png"
width="682"
height="585"
srcset="https://blog.sparker0i.me/spark-machine-learning-knn/661c0843dbf837e5981954cc_cb17fce4-6f7f-4070-8fc0-ff27ece000e4_hu_158f5b034d8b9663.png 480w, https://blog.sparker0i.me/spark-machine-learning-knn/661c0843dbf837e5981954cc_cb17fce4-6f7f-4070-8fc0-ff27ece000e4_hu_c5a645ae67b8192d.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="116"
data-flex-basis="279px"
>&lt;/p>
&lt;p>KNN accuracy for a variety of k values&lt;/p>
&lt;p>You can find the entire code below:&lt;/p>
&lt;h3 id="conclusion">CONCLUSION
&lt;/h3>&lt;p>While Spark ideally shouldn&amp;rsquo;t be used smaller datasets like this, you could apply the same thought process and transform this code to use for some larger datasets, and there you will see the magic of Spark over Pandas.&lt;/p>
&lt;p>Inspired heavily from &lt;a class="link" href="https://machinelearningmastery.com/tutorial-to-implement-k-nearest-neighbors-in-python-from-scratch/?ref=localhost" target="_blank" rel="noopener"
>this&lt;/a> great article.&lt;/p></description></item><item><title>Add new functions to existing classes the Scala way</title><link>https://blog.sparker0i.me/scala-add-new-functions-to-existing-class/</link><pubDate>Fri, 10 Apr 2020 18:09:42 +0000</pubDate><guid>https://blog.sparker0i.me/scala-add-new-functions-to-existing-class/</guid><description>&lt;img src="https://blog.sparker0i.me/scala-add-new-functions-to-existing-class/661c08479bb70e9dac2bfee3.png" alt="Featured image of post Add new functions to existing classes the Scala way" />&lt;h2 id="background">Background
&lt;/h2>&lt;p>A &lt;a class="link" href="https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/package.scala?ref=localhost#L46" target="_blank" rel="noopener"
>Spark &lt;code>DataFrame&lt;/code>&lt;/a> has a better advantage over a &lt;a class="link" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html?ref=localhost" target="_blank" rel="noopener"
>Pandas &lt;code>DataFrame&lt;/code>&lt;/a> when it comes to the ability to scale and process it. I&amp;rsquo;m writing more on this in another blog post which will arrive shortly after this one.&lt;/p>
&lt;p>Functionally, both Spark and Pandas have an almost same set of functionalities, and their APIs are not so different either. There&amp;rsquo;s one function which is used extensively in the data science community with Pandas - &lt;a class="link" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.shape.html?ref=localhost" target="_blank" rel="noopener"
>&lt;code>shape()&lt;/code>&lt;/a>. This function returns you the return the row and column count coupled inside a Tuple. Sadly, this functionality isn&amp;rsquo;t available with Spark &lt;code>DataFrame&lt;/code> (&lt;a class="link" href="https://issues.apache.org/jira/browse/SPARK-27756?ref=localhost" target="_blank" rel="noopener"
>and won&amp;rsquo;t come either&lt;/a>).&lt;/p>
&lt;h2 id="implicit-classes-in-scala">Implicit classes in Scala
&lt;/h2>&lt;p>Fortunately, we have Implicit classes in Scala for our rescue. Implicit classes enable us to add some new functionality on top of an existing class&amp;rsquo; functionalities. To know more about Implicit Classes, you can read &lt;a class="link" href="http://www.lihaoyi.com/post/ImplicitDesignPatternsinScala.html?ref=localhost" target="_blank" rel="noopener"
>this&lt;/a> article for diving deep.&lt;/p>
&lt;p>First, we need to define a new implicit class with the method we want to add. In this case, I want to add the &lt;code>shape()&lt;/code> function on top of the Spark &lt;code>DataFrame&lt;/code> class.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">implicit&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">DataFramePlus&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">DataFrame&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">shape&lt;/span>&lt;span class="o">()&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="kt">Long&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Then all you need to do is print the shape of the &lt;code>DataFrame&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="n">df&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="n">spark&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;&amp;lt;something&amp;gt;&amp;#34;&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;&amp;lt;Filename&amp;gt;&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="o">())&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>This solved a major pain point for me without having to extend an existing class.&lt;/p>
&lt;h2 id="best-practice">Best Practice
&lt;/h2>&lt;p>While writing these codes inside the Scala REPL (Scala/Spark Shell on Terminal) might seem a little easier to implement, openly exposing your code for everyone to use isn&amp;rsquo;t a great idea.&lt;/p>
&lt;p>Instead, you could implement the implicit class in a package object like this:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">package&lt;/span> &lt;span class="nn">me.sparker0i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="nn">org.apache.spark.sql.DataFrame&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">package&lt;/span> &lt;span class="nn">object&lt;/span> &lt;span class="n">machinelearning&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">implicit&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">DataFramePlus&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">DataFrame&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">shape&lt;/span>&lt;span class="o">()&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="kt">Long&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">Int&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="k">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Then you&amp;rsquo;ll need to add the proper import statement in your class, after which you can use the shape method with any &lt;code>DataFrame&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">package&lt;/span> &lt;span class="nn">me.sparker0i.machinelearning.regression&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="nn">org.apache.spark.sql.DataFrame&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="nn">me.sparker0i.machinelearning._&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">LinearRegression&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="n">function&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">DataFrame&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="k">:&lt;/span> &lt;span class="kt">Unit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="o">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="conclusion">CONCLUSION
&lt;/h3>&lt;p>With this approach of using implicit classes in Scala, we no longer have to extend any existing class just to add additional functionality to it. You define the behavior you want, and then add that behavior to existing class instances after adding the proper &lt;code>import&lt;/code> statements.&lt;/p>
&lt;p>Inspired heavily from &lt;a class="link" href="https://alvinalexander.com/scala/scala-2.10-implicit-class-example/?ref=localhost" target="_blank" rel="noopener"
>Alvin Alexander&amp;rsquo;s article&lt;/a>&lt;/p></description></item><item><title>IPL 2020 auction experience with RCB</title><link>https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/</link><pubDate>Sun, 22 Dec 2019 09:55:23 +0000</pubDate><guid>https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/</guid><description>&lt;img src="https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/rcb.jpg" alt="Featured image of post IPL 2020 auction experience with RCB" />&lt;p>Everyone reading my blog knows that I am a huge RCB fan (Shame on you if you don&amp;rsquo;t). I&amp;rsquo;ve been showing my love, affection and madness for this franchise across all social media platforms.&lt;/p>
&lt;p>I got invited by the RCB management - along with a few more mad fans like me - to cheer for RCB whenever we bought a player during the IPL auction.  Imagine how it feels when you get recognized for showing madness for a team by them. It just happened to me, and this will go down as one of the best things that has ever happened in my life.&lt;/p>
&lt;p>We were to do a livestream on Instagram, Facebook and the official RCB app on the day. The host of the day was - RCB&amp;rsquo;s 12th Man - Navneeth Krishna. I even got lucky as I got to talk with him, and took a selfie as well:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/nks.jpg"
width="1440"
height="1080"
srcset="https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/nks_hu_4a31471ae62f54a6.jpg 480w, https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/nks_hu_9c14a46954cafaa9.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>To start it off, we had a good brunch - dosa and chutney - to warm up before we cheered like there was no tomorrow. Then we were given some special tips on how to reply when a question was asked during the livestream.&lt;/p>
&lt;p>The first hour, we bought two big players - Aaron Finch and Chris Morris, both would help in solving two critical problems RCB has had to face over the years - Solid Opener (so that Virat and ABD can be destructive in the middle order) and a Death Bowler. While all of us there felt that they were a little too pricey, but still all of us believed that these 2 players will be the key for RCB to win their first trophy in 2020.&lt;/p>
&lt;p>During the first break, I also got to meet another person who is special for RCB. Guess who: Sugumar Kumar, RCB&amp;rsquo;s biggest fan ever.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/sgk.jpg"
width="1440"
height="1080"
srcset="https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/sgk_hu_3f94aac7a9b06d76.jpg 480w, https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/sgk_hu_553a0a677bf4f763.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>When the auction ended, I also got a match ball signed by the famous spinner - Yuzvendra Chahal (PS. He wasn&amp;rsquo;t there but I got this from RCB). This will be among the prized possessions in my life:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/yzc.jpg"
width="4000"
height="3000"
srcset="https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/yzc_hu_dc5a9587754a4f8e.jpg 480w, https://blog.sparker0i.me/ipl-2020-auction-experience-with-rcb/yzc_hu_4f9b5fcc2cbf1493.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>Signed ball by Yuzvendra Chahal&lt;/p>
&lt;p>It was my dream come true when I met these special persons for RCB. Never did I expect in life that I will get recognized for my madness for this team. Now here&amp;rsquo;s to hoping I get to show more madness like this at the M Chinnaswamy Stadium, when the IPL actually starts.&lt;/p>
&lt;p>Before I sign off, here are a few other RCB fans I met during the day:&lt;/p>
&lt;blockquote
class="instagram-media"
data-instgrm-captioned
data-instgrm-permalink="https://www.instagram.com/p/B6RHsBTFuXh"
data-instgrm-version="14"
style="
background: #fff;
border: 0;
border-radius: 3px;
box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.5), 0 1px 10px 0 rgba(0, 0, 0, 0.15);
margin: 1px;
max-width: 540px;
min-width: 326px;
padding: 0;
width: 99.375%;
width: -webkit-calc(100% - 2px);
width: calc(100% - 2px);
"
>
&lt;div style="padding: 16px">
&lt;a
href="https://www.instagram.com/p/B6RHsBTFuXh"
style="
background: #ffffff;
line-height: 0;
padding: 0 0;
text-align: center;
text-decoration: none;
width: 100%;
"
target="_blank"
>
&lt;div style="display: flex; flex-direction: row; align-items: center">
&lt;div
style="
background-color: #f4f4f4;
border-radius: 50%;
flex-grow: 0;
height: 40px;
margin-right: 14px;
width: 40px;
"
>&lt;/div>
&lt;div
style="
display: flex;
flex-direction: column;
flex-grow: 1;
justify-content: center;
"
>
&lt;div
style="
background-color: #f4f4f4;
border-radius: 4px;
flex-grow: 0;
height: 14px;
margin-bottom: 6px;
width: 100px;
"
>&lt;/div>
&lt;div
style="
background-color: #f4f4f4;
border-radius: 4px;
flex-grow: 0;
height: 14px;
width: 60px;
"
>&lt;/div>
&lt;/div>
&lt;/div>
&lt;div style="padding: 19% 0">&lt;/div>
&lt;div
style="display: block; height: 50px; margin: 0 auto 12px; width: 50px"
>
&lt;svg
width="50px"
height="50px"
viewBox="0 0 60 60"
version="1.1"
xmlns="https://www.w3.org/2000/svg"
xmlns:xlink="https://www.w3.org/1999/xlink"
>
&lt;g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
&lt;g transform="translate(-511.000000, -20.000000)" fill="#000000">
&lt;g>
&lt;path
d="M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631"
>&lt;/path>
&lt;/g>
&lt;/g>
&lt;/g>
&lt;/svg>
&lt;/div>
&lt;div style="padding-top: 8px">
&lt;div
style="
color: #3897f0;
font-family: Arial, sans-serif;
font-size: 14px;
font-style: normal;
font-weight: 550;
line-height: 18px;
"
>
View this post on Instagram
&lt;/div>
&lt;/div>
&lt;div style="padding: 12.5% 0">&lt;/div>
&lt;div
style="
display: flex;
flex-direction: row;
margin-bottom: 14px;
align-items: center;
"
>
&lt;div>
&lt;div
style="
background-color: #f4f4f4;
border-radius: 50%;
height: 12.5px;
width: 12.5px;
transform: translateX(0px) translateY(7px);
"
>&lt;/div>
&lt;div
style="
background-color: #f4f4f4;
height: 12.5px;
transform: rotate(-45deg) translateX(3px) translateY(1px);
width: 12.5px;
flex-grow: 0;
margin-right: 14px;
margin-left: 2px;
"
>&lt;/div>
&lt;div
style="
background-color: #f4f4f4;
border-radius: 50%;
height: 12.5px;
width: 12.5px;
transform: translateX(9px) translateY(-18px);
"
>&lt;/div>
&lt;/div>
&lt;div style="margin-left: 8px">
&lt;div
style="
background-color: #f4f4f4;
border-radius: 50%;
flex-grow: 0;
height: 20px;
width: 20px;
"
>&lt;/div>
&lt;div
style="
width: 0;
height: 0;
border-top: 2px solid transparent;
border-left: 6px solid #f4f4f4;
border-bottom: 2px solid transparent;
transform: translateX(16px) translateY(-4px) rotate(30deg);
"
>&lt;/div>
&lt;/div>
&lt;div style="margin-left: auto">
&lt;div
style="
width: 0px;
border-top: 8px solid #f4f4f4;
border-right: 8px solid transparent;
transform: translateY(16px);
"
>&lt;/div>
&lt;div
style="
background-color: #f4f4f4;
flex-grow: 0;
height: 12px;
width: 16px;
transform: translateY(-4px);
"
>&lt;/div>
&lt;div
style="
width: 0;
height: 0;
border-top: 8px solid #f4f4f4;
border-left: 8px solid transparent;
transform: translateY(-4px) translateX(8px);
"
>&lt;/div>
&lt;/div>
&lt;/div>
&lt;div
style="
display: flex;
flex-direction: column;
flex-grow: 1;
justify-content: center;
margin-bottom: 24px;
"
>
&lt;div
style="
background-color: #f4f4f4;
border-radius: 4px;
flex-grow: 0;
height: 14px;
margin-bottom: 6px;
width: 224px;
"
>&lt;/div>
&lt;div
style="
background-color: #f4f4f4;
border-radius: 4px;
flex-grow: 0;
height: 14px;
width: 144px;
"
>&lt;/div>&lt;/div
>&lt;/a>
&lt;/div>
&lt;/blockquote>&lt;script async src="https://www.instagram.com/embed.js">&lt;/script>
&lt;p>Lucky indeed.&lt;/p></description></item><item><title>MySQL installation inside Docker on Mac</title><link>https://blog.sparker0i.me/mysql-installation-inside-docker-on-mac/</link><pubDate>Thu, 28 Mar 2019 19:25:50 +0000</pubDate><guid>https://blog.sparker0i.me/mysql-installation-inside-docker-on-mac/</guid><description>&lt;img src="https://blog.sparker0i.me/mysql-installation-inside-docker-on-mac/661c084eec6af0386c750e4a.png" alt="Featured image of post MySQL installation inside Docker on Mac" />&lt;p>I’ve never liked to make changes to my laptop by providing my admin credentials to install various tools, like MySQL because I love doing things at a user level. Programs like VSCode and Atom are good examples of that when all you do is drag the application icon to the Applications folder. Homebrew is also a good example to install command line applications at a user level.&lt;/p>
&lt;p>If you were to install using the official installer, you’d have to give administrator rights. You will also have to make changes to your bash profile to access mysql in terminal. All these problems can be alleviated by installing a MySQL container inside Docker.&lt;/p>
&lt;h3 id="install-docker-community-edition">INSTALL DOCKER COMMUNITY EDITION
&lt;/h3>&lt;p>Download Docker Desktop for Mac by visiting this &lt;a class="link" href="https://hub.docker.com/search/?type=edition&amp;amp;offering=community&amp;amp;ref=localhost" target="_blank" rel="noopener"
>link.&lt;/a> Then you need to install Docker on your Mac by following the installation steps. It is recommended not to change any defaults if prompted.&lt;/p>
&lt;p>Once you are done with that, we will now proceed with the installation of MySQL container inside Docker. You can either do it inside a terminal, or use a tool like Kitematic using which you can manage multiple containers in your system once you create them.&lt;/p>
&lt;p>Fire up a terminal, and write this command&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run --name=mysql -d -p 3306:3306 -e MYSQL_USER=developer -e MYSQL_PASSWORD=mydbpwd -e MYSQL_DATABASE=mydb mysql/mysql-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Here we will use the &lt;code>mysql/mysql-server&lt;/code> image, and our Username, password and Database are &lt;code>developer&lt;/code>, &lt;code>mydbpwd&lt;/code> and &lt;code>mydb&lt;/code> respectively. Then do the port mapping between the container and the host. We bind Container’s port 3306 to the Mac’s port 3306.&lt;/p>
&lt;p>If everything goes fine, you should see a combination of alphabets and numbers as an output. This is the container ID. Type this command:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker exec -it mysql bash -c &amp;#34;mysql -u developer -p&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Then enter the password you entered while creating the container (In this case &lt;code>mydbpwd&lt;/code>). Then you will have an instance up and running inside Docker.&lt;/p>
&lt;h3 id="check-mysql-connectivity-inside-mysql-workbench">CHECK MYSQL CONNECTIVITY INSIDE MYSQL WORKBENCH
&lt;/h3>&lt;p>First up install MySQL Workbench, either using the official installer or using the brew command &lt;code>brew cask install mysqlworkbench&lt;/code>. Once you open up the MySQLWorkbench, click on the add connection button, then enter as following:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/mysql-installation-inside-docker-on-mac/661c084eec6af0386c750e4a_196bbda6-607c-4b35-8675-4358657423b4.png"
width="798"
height="500"
srcset="https://blog.sparker0i.me/mysql-installation-inside-docker-on-mac/661c084eec6af0386c750e4a_196bbda6-607c-4b35-8675-4358657423b4_hu_cbb0d7d1e8773b66.png 480w, https://blog.sparker0i.me/mysql-installation-inside-docker-on-mac/661c084eec6af0386c750e4a_196bbda6-607c-4b35-8675-4358657423b4_hu_72e99538578fb6ad.png 1024w"
loading="lazy"
alt="Creating a new connection inside MySQL Workbench"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;p>Creating a new connection inside MySQL Workbench&lt;/p>
&lt;p>Then click the Test Connection button. If everything goes alright, you will get this popup:&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/mysql-installation-inside-docker-on-mac/661c084eec6af0386c750e4a_0988817e-9314-441e-a248-5fd705bdf609.png"
width="420"
height="236"
srcset="https://blog.sparker0i.me/mysql-installation-inside-docker-on-mac/661c084eec6af0386c750e4a_0988817e-9314-441e-a248-5fd705bdf609_hu_8065cca634ed767.png 480w, https://blog.sparker0i.me/mysql-installation-inside-docker-on-mac/661c084eec6af0386c750e4a_0988817e-9314-441e-a248-5fd705bdf609_hu_c0c999683a8f5a19.png 1024w"
loading="lazy"
alt="Connection established with MySQL Container in Docker"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="427px"
>&lt;/p>
&lt;p>Connection established with MySQL Container in Docker&lt;/p>
&lt;h3 id="conclusion">CONCLUSION
&lt;/h3>&lt;p>Installing MySQL in Docker on your PC is a safer approach to installing MySQL than providing Admin credentials to install using the official installer. If anything goes wrong, all you have to do is delete the container and create a new one in Docker.&lt;/p>
&lt;h3 id="references">REFERENCES
&lt;/h3>&lt;p>&lt;a class="link" href="https://medium.com/@crmcmullen/how-to-run-mysql-in-a-docker-container-on-macos-with-persistent-local-data-58b89aec496a?ref=localhost" target="_blank" rel="noopener"
>Run MySQL in a Docker Container – Medium&lt;/a>&lt;/p></description></item><item><title>Factory Visit - Episode of a visit to a Wood Cutting Factory</title><link>https://blog.sparker0i.me/factory-visit-wood-cutting-factory/</link><pubDate>Sun, 26 Aug 2018 02:24:58 +0000</pubDate><guid>https://blog.sparker0i.me/factory-visit-wood-cutting-factory/</guid><description>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/neem2sheet.jpg" alt="Featured image of post Factory Visit - Episode of a visit to a Wood Cutting Factory" />&lt;p>Hey all, today I will write about my visit to a wood cutting factory situated near my home. This visit was back in December 2017, so I’m sorry for such a long delay because I got busy with academics and other important tasks.&lt;/p>
&lt;h2 id="cutting-the-wood-in-factory">CUTTING THE WOOD IN FACTORY
&lt;/h2>&lt;p>The process starts with cutting the wood logs in the factory. This factory uses the logs of the Neem tree to obtain the final product because they are of the best quality.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/neem.jpg"
width="4608"
height="3456"
srcset="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/neem_hu_93a0febb49b659a9.jpg 480w, https://blog.sparker0i.me/factory-visit-wood-cutting-factory/neem_hu_236f532e98a1401.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>These wood logs are first passed into a machine, from where you will get wood sheets as output. Here is a video that illustrates this better. The image below the video will show you the output of that machine.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/cutlogs.jpg"
width="4608"
height="3456"
srcset="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/cutlogs_hu_6a907c1b2a3f26f4.jpg 480w, https://blog.sparker0i.me/factory-visit-wood-cutting-factory/cutlogs_hu_b86520f5b8daa0d2.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>Processing of a wood log into a wood sheet&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/neem2sheet.jpg"
width="4608"
height="3456"
srcset="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/neem2sheet_hu_6c6965611806ba49.jpg 480w, https://blog.sparker0i.me/factory-visit-wood-cutting-factory/neem2sheet_hu_1263e91694a72780.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>Wood sheets from the machine&lt;/p>
&lt;p>The next step is to send these wood sheets to cutting, which gives us the wood sheets of required dimensions. Therefore we obtain a combination of good wood and bad wood sheets. The bad wood is sent to a burning plant in Tamilnadu to generate electricity.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/cutsheet.jpg"
width="4608"
height="3456"
srcset="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/cutsheet_hu_7ed4f2a126db4cb2.jpg 480w, https://blog.sparker0i.me/factory-visit-wood-cutting-factory/cutsheet_hu_1ceab355c2b016a7.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>Bad wood obtained after cutting&lt;/p>
&lt;p>The good wood goes on to become plywood. Here’s the good wood.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/goodwood.jpg"
width="4608"
height="3456"
srcset="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/goodwood_hu_940cbf4f88c0a5fd.jpg 480w, https://blog.sparker0i.me/factory-visit-wood-cutting-factory/goodwood_hu_b0094ceb99923497.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>Good wood obtained after cutting&lt;/p>
&lt;p>Similarly, there’s also another process of cutting the bad wood into a sheet of dimensions. The video below helps describe this better&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/cutbadwood.jpg"
width="4608"
height="3456"
srcset="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/cutbadwood_hu_ee6b5a36db23212f.jpg 480w, https://blog.sparker0i.me/factory-visit-wood-cutting-factory/cutbadwood_hu_8d128845df1773d2.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;h2 id="drying">DRYING
&lt;/h2>&lt;p>Once we get the sheets of good wood, these sheets dry under the sun. Usually, this finishes in around 4-5 hours, but it may vary. Here is a picture illustrating drying of good sheets.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/sheetdry.jpg"
width="4608"
height="3456"
srcset="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/sheetdry_hu_f32c6487f8ec9998.jpg 480w, https://blog.sparker0i.me/factory-visit-wood-cutting-factory/sheetdry_hu_d563bf4d60c254c5.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>Good sheets kept for drying&lt;/p>
&lt;p>Only 1 lakh sq. Km of sheets can dry at a time due to space restrictions. With a drying machine, drying wood sheets of 1 lakh + 4 lakh km sq = 5 lakh sq. km is not an issue.&lt;/p>
&lt;p>These sheets sell in huge numbers to plywood factories, from where we obtain plywood. Each sheet will have crests and troughs. The reason is that the sheets dry under the sun. With a drying machine, this would never happen, because we get a straight sheet of wood.&lt;/p>
&lt;h2 id="plywood">PLYWOOD
&lt;/h2>&lt;p>This is a plywood made from the sheets supplied by this factory.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/plywood.jpg"
width="4608"
height="3456"
srcset="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/plywood_hu_c93e0c0235da3ad8.jpg 480w, https://blog.sparker0i.me/factory-visit-wood-cutting-factory/plywood_hu_9430964976a4fcf5.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>Plywood made from the wood sheets of this factory&lt;/p>
&lt;p>Likewise, you can see stripes between the plywood on its lateral side. Many dried wood sheets are glued together to create this, apart from the other factory processes.&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/lateral.jpg"
width="4608"
height="3456"
srcset="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/lateral_hu_82a15e5da48e5a1c.jpg 480w, https://blog.sparker0i.me/factory-visit-wood-cutting-factory/lateral_hu_1d9145cc043ad6e2.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>Lateral side of the plywood&lt;/p>
&lt;h2 id="a-plywood-machine-perhaps">A PLYWOOD MACHINE PERHAPS?
&lt;/h2>&lt;p>Ever since this factory trip took place, a drying machine was installed here. Also, there are plans on having the plywood machine as well.&lt;/p>
&lt;p>Moreover, adding a plywood making machine alongside will give four-fold benefits:&lt;/p>
&lt;ul>
&lt;li>Good quality of dried sheets&lt;/li>
&lt;li>Good quality of plywood&lt;/li>
&lt;li>Increased employment, due to increasing machinery and scalability requirements&lt;/li>
&lt;li>Increased production, giving profit to owners&lt;/li>
&lt;/ul>
&lt;h2 id="signing-off">SIGNING-OFF
&lt;/h2>&lt;p>Most importantly, I can’t sign off before thanking those people, because of whom I could have a hands-on tour of the factory. Here’s a pic of the factory owners (Pro tip: The one on the right is &lt;a class="link" href="https://twitter.com/theamritanair" target="_blank" rel="noopener"
>@theamritanair&lt;/a>‘s uncle)&lt;/p>
&lt;p>&lt;img src="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/owners.jpg"
width="4608"
height="3456"
srcset="https://blog.sparker0i.me/factory-visit-wood-cutting-factory/owners_hu_d59cf0881ec48a4a.jpg 480w, https://blog.sparker0i.me/factory-visit-wood-cutting-factory/owners_hu_e318b7e75aa4bade.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>The factory owners&lt;/p>
&lt;p>Until another post, ciao.&lt;/p></description></item></channel></rss>